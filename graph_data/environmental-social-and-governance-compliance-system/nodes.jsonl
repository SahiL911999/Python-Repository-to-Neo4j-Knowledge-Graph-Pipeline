{"id": "eef930b0bbdecdb4715ec81abc1592059f27eff8", "type": "Repository", "name": "environmental-social-and-governance-compliance-system", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system"}
{"id": "5d2f78c7d2bf2bd318237a2c0b29635ab0ea15e0", "type": "Directory", "name": "tests", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/tests", "relpath": "tests"}
{"id": "2bea77920e778be02dde32424eb9641246f168b7", "type": "Directory", "name": "graph_data", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/graph_data", "relpath": "graph_data"}
{"id": "34331769337dc0aeb12bc4e82ca3cf851032ae05", "type": "Directory", "name": "src", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src", "relpath": "src"}
{"id": "8ef73b78df7b3fd1d5b9c998bd0b400026096889", "type": "Directory", "name": "media", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/media", "relpath": "media"}
{"id": "e7eb7bd481b8f8295e2e40d3882b268ef195bf2d", "type": "Directory", "name": "components", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components", "relpath": "src/components"}
{"id": "b40dbbdff80cc4e2abe096be5d3ede2637284924", "type": "Directory", "name": "notebooks", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/notebooks", "relpath": "src/notebooks"}
{"id": "6d44e2e23e75261c0e18a113da4e4ef9aa31abda", "type": "Directory", "name": "pipelines", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/pipelines", "relpath": "src/pipelines"}
{"id": "604b224275c4a74fefc7c320b3cc364ea225f2d2", "type": "File", "name": "db_conn_test.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/tests/db_conn_test.py", "relpath": "tests/db_conn_test.py", "module": "tests.db_conn_test", "extension": ".py", "sha1": "1b9c990a9d14c2df7803686db3d46fdd7c090d7c", "lines_of_code": 76, "size_bytes": 1950, "language": "python", "encoding": "utf-8"}
{"id": "d3eff94c0b55cdd33b20fe5d424a30180fb62ae1", "type": "Import", "name": "sys", "alias": null, "import_type": "direct", "lineno": 10, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "3b50e60c14164b14e5cf5a6088c6de3ab83b829f", "type": "Import", "name": "chromadb", "alias": null, "import_type": "direct", "lineno": 14, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "547ef6b2531efb31f9b02af59e8d737252a82707", "type": "Import", "name": "psycopg2", "alias": null, "import_type": "direct", "lineno": 15, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "8db589fe470b755bdf95dd6b4ea44f13c5bb7367", "type": "Variable", "name": "chroma_client", "value": "chromadb.HttpClient(host='0.0.0.0', port=8000)", "value_type": "complex", "lineno": 20, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "a9d7aeda3085fff89585af87f6a5b7b57eebf7b8", "type": "Class", "name": "DbOperation", "lineno": 26, "end_lineno": 60, "docstring": "Contains methods for performing operations on the database : data insertion, data fetching", "snippet": "class DbOperation:\n    \"\"\"\n    Contains methods for performing operations on the database : data insertion, data fetching\n    \"\"\"\n\n    def fetch_data(self, conn_info : dict, sql : str) -> list:\n        \"\"\"\n        Fetches data of leads from the database and returns it\n        \"\"\"\n        conn = None\n...", "bases": [], "decorators": [], "num_methods": 1, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "3849e6ac651719c0d200e8ddf7f45ac03e02b78b", "type": "Method", "name": "fetch_data", "qualified_name": "DbOperation.fetch_data", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "conn_info", "type": "dict", "kind": "positional", "default": null, "position": 1}, {"name": "sql", "type": "str", "kind": "positional", "default": null, "position": 2}], "return_type": "list", "lineno": 31, "end_lineno": 60, "docstring": "Fetches data of leads from the database and returns it", "snippet": "    def fetch_data(self, conn_info : dict, sql : str) -> list:\n        \"\"\"\n        Fetches data of leads from the database and returns it\n        \"\"\"\n        conn = None\n        try: \n            # connect to the existing db\n            conn = psycopg2.connect(\n                database = conn_info['database'],\n                user = conn_info['user'],\n...", "metrics": {"lines_of_code": 30, "complexity": 3, "num_parameters": 3, "num_returns": 1, "num_branches": 1, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 2}}
{"id": "5aef68950acf5b6eccefa36f62c2be48a695902f", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "9e8059ffb6a17570fef619a99b9fee57b26572a8", "type": "Parameter", "name": "conn_info", "param_type": "dict", "kind": "positional", "default": null, "position": 1}
{"id": "e7fe0fee8a39d73fb1cc76122f727768d7d1e9d5", "type": "Parameter", "name": "sql", "param_type": "str", "kind": "positional", "default": null, "position": 2}
{"id": "e076c04c5a3ab3ef7a5b729e2b8fdbc27e804e33", "type": "Variable", "name": "conn", "value": "None", "value_type": "NoneType", "lineno": 35, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "69da30443742e1eadeaa2852f52a20edf7640a01", "type": "Variable", "name": "conn", "value": "psycopg2.connect(database=conn_info['database'], user=conn_info['user'], password=conn_info['password'], host=conn_info['host'], port=conn_info['port'])", "value_type": "complex", "lineno": 38, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "8eb255f6ce20da89b4528aa62bbb884534921982", "type": "Variable", "name": "cursor", "value": "conn.cursor()", "value_type": "complex", "lineno": 47, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "a00facc6c404ffea9c59a01f1a1c200dafa8160c", "type": "Variable", "name": "records", "value": "cursor.fetchall()", "value_type": "complex", "lineno": 51, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "6ec4c8232be29c84ea3ed8689b112d2f4352a4ef", "type": "Variable", "name": "db_conn_info", "value": "{'database': 'postgres', 'user': 'postgres', 'password': 'axiom123', 'host': '0.0.0.0', 'port': '5432'}", "value_type": "complex", "lineno": 65, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "f756cfa372ab199a90753a874d4815a9f712486c", "type": "Variable", "name": "conn_info", "value": "db_conn_info", "value_type": "complex", "lineno": 69, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "de5572caedd5a6bf87b360900c6a7e538ee1bac9", "type": "Variable", "name": "table_name", "value": "information", "value_type": "str", "lineno": 70, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "a5cad8b9e08f9c34945f4494ada56c58bf4a3d8f", "type": "Variable", "name": "data_fetcher", "value": "DbOperation()", "value_type": "complex", "lineno": 72, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "adaa9eaf52b56db3d338badadc359a9e4c1def70", "type": "Variable", "name": "sql", "value": "f'SELECT * FROM {table_name}'", "value_type": "complex", "lineno": 73, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "f7a57322e6177659f24ed45d36abc13938d7b3f6", "type": "Variable", "name": "fetched_data", "value": "data_fetcher.fetch_data(conn_info=conn_info, sql=sql)", "value_type": "complex", "lineno": 74, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "0144b6fc07df3ee6ef58544807ca0819fd3ba90f", "type": "File", "name": "pipelines_test.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/pipelines_test.py", "relpath": "src/pipelines_test.py", "module": "src.pipelines_test", "extension": ".py", "sha1": "9735aeb08bd1f2ea75f37655439256524373a1e2", "lines_of_code": 101, "size_bytes": 3583, "language": "python", "encoding": "utf-8"}
{"id": "913d163d3beb7f5d3360f5b0704ac68c67d7d5df", "type": "Import", "name": "os", "alias": null, "import_type": "direct", "lineno": 1, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "a260aea0bce75985a17f1ca02905e19ee02e6c74", "type": "Import", "name": "pytest", "alias": null, "import_type": "direct", "lineno": 2, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "4a6955de676ac65d963ccd62d711a26090a95603", "type": "Import", "name": "sys", "alias": null, "import_type": "direct", "lineno": 4, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "65bcb076b2e31a5bedf011a2cc208fb91b239551", "type": "Import", "name": "MainPipeline", "module": "pipelines.pipeline_basic", "full_name": "pipelines.pipeline_basic.MainPipeline", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 7, "is_stdlib": false}
{"id": "57831f35793ae2825385e9ed6375424507bc17bd", "type": "Import", "name": "ParentChildPipeline", "module": "pipelines.pipeline_parent_child", "full_name": "pipelines.pipeline_parent_child.ParentChildPipeline", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 8, "is_stdlib": false}
{"id": "0347b1f8df201acf58a97f2c054bc084c1ba46b0", "type": "Import", "name": "SelfQueryPipeline", "module": "pipelines.pipeline_self_query", "full_name": "pipelines.pipeline_self_query.SelfQueryPipeline", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 9, "is_stdlib": false}
{"id": "274eb0c62e22bb92df8420c2481e09f29afe88cf", "type": "Import", "name": "langfuse_handler", "module": "components.langfuse", "full_name": "components.langfuse.langfuse_handler", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 11, "is_stdlib": false}
{"id": "d9a8b6a592fddca484a9c0231dd5404441eb5c80", "type": "Function", "name": "test_main_pipeline", "qualified_name": "test_main_pipeline", "is_async": false, "is_method": false, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [], "return_type": null, "lineno": 13, "end_lineno": 21, "docstring": null, "snippet": "def test_main_pipeline():\n    try:\n        parent = os.path.dirname(os.path.dirname(__file__))\n        media_path = os.path.join(parent, 'media')\n        mp = MainPipeline(docs_folder_path=media_path)\n        mp.main_pipeline()\n    except Exception as e:\n        print(e)\n        pytest.fail(\"MainPipeline raised an exception\")", "metrics": {"lines_of_code": 9, "complexity": 2, "num_parameters": 0, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": false, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "80b0da7ce30bf259e8f2e8b6f4c1743d91936b9b", "type": "Variable", "name": "parent", "value": "os.path.dirname(os.path.dirname(__file__))", "value_type": "complex", "lineno": 15, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "bb3163e8a24d00d43cc6cb0177a43b641c1df692", "type": "Variable", "name": "media_path", "value": "os.path.join(parent, 'media')", "value_type": "complex", "lineno": 16, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "77c6362455c955737c35595f0f9d6b90c72b466d", "type": "Variable", "name": "mp", "value": "MainPipeline(docs_folder_path=media_path)", "value_type": "complex", "lineno": 17, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "4316b4904c1af18fe7efff61d3bd5dc3a4be1756", "type": "Function", "name": "test_parent_child_pipeline", "qualified_name": "test_parent_child_pipeline", "is_async": false, "is_method": false, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [], "return_type": null, "lineno": 23, "end_lineno": 31, "docstring": null, "snippet": "def test_parent_child_pipeline():\n    try:\n        parent = os.path.dirname(os.path.dirname(__file__))\n        media_path = os.path.join(parent, 'media')\n        mp = ParentChildPipeline(docs_folder_path=media_path)\n        mp.main_pipeline()\n    except Exception as e:\n        print(e)\n        pytest.fail(\"ParentChildPipeline raised an exception\")", "metrics": {"lines_of_code": 9, "complexity": 2, "num_parameters": 0, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": false, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "f7735027ba4f6e26259a27bb697c695f42c1bc07", "type": "Variable", "name": "parent", "value": "os.path.dirname(os.path.dirname(__file__))", "value_type": "complex", "lineno": 25, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "d10fa8909a5cbe572d00c21a72a1c52277d891a1", "type": "Variable", "name": "media_path", "value": "os.path.join(parent, 'media')", "value_type": "complex", "lineno": 26, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "5b61838baf55680dc751d56904edad771ba42cb7", "type": "Variable", "name": "mp", "value": "ParentChildPipeline(docs_folder_path=media_path)", "value_type": "complex", "lineno": 27, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "01ac5b9f8975e18fb7db91dd397d059e111496e8", "type": "Function", "name": "test_self_query_pipeline", "qualified_name": "test_self_query_pipeline", "is_async": false, "is_method": false, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [], "return_type": null, "lineno": 33, "end_lineno": 41, "docstring": null, "snippet": "def test_self_query_pipeline():\n    try:\n        parent = os.path.dirname(os.path.dirname(__file__))\n        media_path = os.path.join(parent, 'media')\n        mp = SelfQueryPipeline(docs_folder_path=media_path)\n        mp.main_pipeline()\n    except Exception as e:\n        print(e)\n        pytest.fail(\"SelfQueryPipeline raised an exception\")", "metrics": {"lines_of_code": 9, "complexity": 2, "num_parameters": 0, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": false, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "c9358a54222946e440cf835884800eae4a4dcd5a", "type": "Variable", "name": "parent", "value": "os.path.dirname(os.path.dirname(__file__))", "value_type": "complex", "lineno": 35, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "a84b0bea011ce8be130cf4317e97381af524dc4e", "type": "Variable", "name": "media_path", "value": "os.path.join(parent, 'media')", "value_type": "complex", "lineno": 36, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "b05f5c6b6dd46d84179c10a7f88a32840db4707c", "type": "Variable", "name": "mp", "value": "SelfQueryPipeline(docs_folder_path=media_path)", "value_type": "complex", "lineno": 37, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "00d681a7af422326b3dc9f5eafb822a7c8cd43df", "type": "Function", "name": "test_main_pipeline_flare", "qualified_name": "test_main_pipeline_flare", "is_async": false, "is_method": false, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [], "return_type": null, "lineno": 43, "end_lineno": 51, "docstring": null, "snippet": "def test_main_pipeline_flare():\n    try:\n        parent = os.path.dirname(os.path.dirname(__file__))\n        media_path = os.path.join(parent, 'media')\n        mp = MainPipeline(docs_folder_path=media_path, use_flare=True)\n        mp.main_pipeline()\n    except Exception as e:\n        print(e)\n        pytest.fail(\"MainPipeline raised an exception\")", "metrics": {"lines_of_code": 9, "complexity": 2, "num_parameters": 0, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": false, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "43a8204ce37469f2023928d1711296572fb47445", "type": "Variable", "name": "parent", "value": "os.path.dirname(os.path.dirname(__file__))", "value_type": "complex", "lineno": 45, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "026f9696616eb4add0c9fd8b2f7fe524f31068df", "type": "Variable", "name": "media_path", "value": "os.path.join(parent, 'media')", "value_type": "complex", "lineno": 46, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "637cb3b6ace0c1345ced97c408ad51bfe17f6de0", "type": "Variable", "name": "mp", "value": "MainPipeline(docs_folder_path=media_path, use_flare=True)", "value_type": "complex", "lineno": 47, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "e6c810a086fc98a06ce2c0f5fb3799a02dee4685", "type": "Function", "name": "test_parent_child_pipeline_flare", "qualified_name": "test_parent_child_pipeline_flare", "is_async": false, "is_method": false, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [], "return_type": null, "lineno": 53, "end_lineno": 61, "docstring": null, "snippet": "def test_parent_child_pipeline_flare():\n    try:\n        parent = os.path.dirname(os.path.dirname(__file__))\n        media_path = os.path.join(parent, 'media')\n        mp = ParentChildPipeline(docs_folder_path=media_path, use_flare=True)\n        mp.main_pipeline()\n    except Exception as e:\n        print(e)\n        pytest.fail(\"ParentChildPipeline raised an exception\")", "metrics": {"lines_of_code": 9, "complexity": 2, "num_parameters": 0, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": false, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "222bcb7466872e0181f8d5a9d5b10243608dbbee", "type": "Variable", "name": "parent", "value": "os.path.dirname(os.path.dirname(__file__))", "value_type": "complex", "lineno": 55, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "466d79271a1d50358a015941dbb6086705a4fb0b", "type": "Variable", "name": "media_path", "value": "os.path.join(parent, 'media')", "value_type": "complex", "lineno": 56, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "12e0e547ff723e47a4df6c96775457ea5fc7ec73", "type": "Variable", "name": "mp", "value": "ParentChildPipeline(docs_folder_path=media_path, use_flare=True)", "value_type": "complex", "lineno": 57, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "9177e60eb2b5fefa15eadb41ab942ade39ad9f6c", "type": "Function", "name": "test_self_query_pipeline_flare", "qualified_name": "test_self_query_pipeline_flare", "is_async": false, "is_method": false, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [], "return_type": null, "lineno": 63, "end_lineno": 71, "docstring": null, "snippet": "def test_self_query_pipeline_flare():\n    try:\n        parent = os.path.dirname(os.path.dirname(__file__))\n        media_path = os.path.join(parent, 'media')\n        mp = SelfQueryPipeline(docs_folder_path=media_path, use_flare=True)\n        mp.main_pipeline()\n    except Exception as e:\n        print(e)\n        pytest.fail(\"SelfQueryPipeline raised an exception\")", "metrics": {"lines_of_code": 9, "complexity": 2, "num_parameters": 0, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": false, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "885f886be3bf404f760f6fa9041da17e9acd0ae6", "type": "Variable", "name": "parent", "value": "os.path.dirname(os.path.dirname(__file__))", "value_type": "complex", "lineno": 65, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "6c6a5609b2f37ed52d36b924b4e534239aa8113d", "type": "Variable", "name": "media_path", "value": "os.path.join(parent, 'media')", "value_type": "complex", "lineno": 66, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "1b6d58dab16137e6746083132ae1ca89237cc24f", "type": "Variable", "name": "mp", "value": "SelfQueryPipeline(docs_folder_path=media_path, use_flare=True)", "value_type": "complex", "lineno": 67, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "cfadd16e444c00829c9624f507af1ebfce8f8e96", "type": "Function", "name": "test_main_pipeline_langfuse", "qualified_name": "test_main_pipeline_langfuse", "is_async": false, "is_method": false, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [], "return_type": null, "lineno": 73, "end_lineno": 81, "docstring": null, "snippet": "def test_main_pipeline_langfuse():\n    try:\n        parent = os.path.dirname(os.path.dirname(__file__))\n        media_path = os.path.join(parent, 'media')\n        mp = MainPipeline(docs_folder_path=media_path, langfuse_handler=langfuse_handler)\n        mp.main_pipeline()\n    except Exception as e:\n        print(e)\n        pytest.fail(\"MainPipelineLangFuse raised an exception\")", "metrics": {"lines_of_code": 9, "complexity": 2, "num_parameters": 0, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": false, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "75b71fe256620df796c8c6a3a6844596793a1204", "type": "Variable", "name": "parent", "value": "os.path.dirname(os.path.dirname(__file__))", "value_type": "complex", "lineno": 75, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "3e63933b15ccb7a1d73952828477dde56ab1fec2", "type": "Variable", "name": "media_path", "value": "os.path.join(parent, 'media')", "value_type": "complex", "lineno": 76, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "74aaffe3ace8a9e02f4c572a18da3d3ba5be9586", "type": "Variable", "name": "mp", "value": "MainPipeline(docs_folder_path=media_path, langfuse_handler=langfuse_handler)", "value_type": "complex", "lineno": 77, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "b7dfb781bc048f683f09cb5dfa97ca41fac0a417", "type": "Function", "name": "test_parent_child_pipeline_langfuse", "qualified_name": "test_parent_child_pipeline_langfuse", "is_async": false, "is_method": false, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [], "return_type": null, "lineno": 83, "end_lineno": 91, "docstring": null, "snippet": "def test_parent_child_pipeline_langfuse():\n    try:\n        parent = os.path.dirname(os.path.dirname(__file__))\n        media_path = os.path.join(parent, 'media')\n        mp = ParentChildPipeline(docs_folder_path=media_path, langfuse_handler=langfuse_handler)\n        mp.main_pipeline()\n    except Exception as e:\n        print(e)\n        pytest.fail(\"ParentChildPipelineLangFuse raised an exception\")", "metrics": {"lines_of_code": 9, "complexity": 2, "num_parameters": 0, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": false, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "cb1771494f831c407f84c3296c2e0b4e234b9529", "type": "Variable", "name": "parent", "value": "os.path.dirname(os.path.dirname(__file__))", "value_type": "complex", "lineno": 85, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "bcb78015cc7f6ab13ea352d241323b2f39e073a8", "type": "Variable", "name": "media_path", "value": "os.path.join(parent, 'media')", "value_type": "complex", "lineno": 86, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "093af4632364c9848f8d7d94f6a0266d26d765ca", "type": "Variable", "name": "mp", "value": "ParentChildPipeline(docs_folder_path=media_path, langfuse_handler=langfuse_handler)", "value_type": "complex", "lineno": 87, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "f27b3344b3e7e7c8ee0e00acca8151b7b2bf715c", "type": "Function", "name": "test_self_query_pipeline_langfuse", "qualified_name": "test_self_query_pipeline_langfuse", "is_async": false, "is_method": false, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [], "return_type": null, "lineno": 93, "end_lineno": 101, "docstring": null, "snippet": "def test_self_query_pipeline_langfuse():\n    try:\n        parent = os.path.dirname(os.path.dirname(__file__))\n        media_path = os.path.join(parent, 'media')\n        mp = SelfQueryPipeline(docs_folder_path=media_path, langfuse_handler=langfuse_handler)\n        mp.main_pipeline()\n    except Exception as e:\n        print(e)\n        pytest.fail(\"SelfQueryPipelineLangFuse raised an exception\")", "metrics": {"lines_of_code": 9, "complexity": 2, "num_parameters": 0, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": false, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "62e9c6074b36873d5654cbd37d9d5687f5daac1a", "type": "Variable", "name": "parent", "value": "os.path.dirname(os.path.dirname(__file__))", "value_type": "complex", "lineno": 95, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "734fb15e34780f6884261c0cb8031d00f0813244", "type": "Variable", "name": "media_path", "value": "os.path.join(parent, 'media')", "value_type": "complex", "lineno": 96, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "78fdc26c24c29e3193e60363275db30f6d9bb6b6", "type": "Variable", "name": "mp", "value": "SelfQueryPipeline(docs_folder_path=media_path, langfuse_handler=langfuse_handler)", "value_type": "complex", "lineno": 97, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "68e04f10b4c558f3efe391c194f290214f60c1d5", "type": "File", "name": "prompt_template.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/prompt_template.py", "relpath": "src/components/prompt_template.py", "module": "src.components.prompt_template", "extension": ".py", "sha1": "87ddaae1c97449dca65cd84d13ce4b925f15bb87", "lines_of_code": 47, "size_bytes": 2070, "language": "python", "encoding": "utf-8"}
{"id": "c5670cc0a0b0b719ae7546ce42188cc2ff760650", "type": "Import", "name": "PromptTemplate", "module": "langchain_core.prompts", "full_name": "langchain_core.prompts.PromptTemplate", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 1, "is_stdlib": false}
{"id": "fb2fc855605e4c7d51b31736842b7367e2bbaecd", "type": "Class", "name": "PromptTemplates", "lineno": 3, "end_lineno": 47, "docstring": "Contains methods that return different prompt templates", "snippet": "class PromptTemplates:\n    \"\"\"\n    Contains methods that return different prompt templates\n    \"\"\"\n    \n    @staticmethod\n    def simple_prompt(cls, question: str, context: str) -> str:\n        \"\"\"\n        You are an assistant for question-answering tasks. Use the following pieces of retrieved context to answer the question. If you don't know the answer, just say that you don't know.\n        Question: {question}\n...", "bases": [], "decorators": [], "num_methods": 4, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "a5d1f4970c4025eba03574cfb8f2fa8ab7f8e449", "type": "Decorator", "name": "staticmethod", "lineno": 8, "args": [], "kwargs": {}}
{"id": "978a86f09c9875add8fe57a4c64c99b5a640c96a", "type": "Method", "name": "simple_prompt", "qualified_name": "PromptTemplates.simple_prompt", "is_async": false, "is_method": true, "is_static": true, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": ["staticmethod"], "decorator_details": [{"name": "staticmethod", "args": [], "kwargs": {}}], "parameters": [{"name": "cls", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "question", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "context", "type": "str", "kind": "positional", "default": null, "position": 2}], "return_type": "str", "lineno": 9, "end_lineno": 17, "docstring": "You are an assistant for question-answering tasks. Use the following pieces of retrieved context to answer the question. If you don't know the answer, just say that you don't know.\nQuestion: {question}\nContext: {context}\nAnswer:", "snippet": "    def simple_prompt(cls, question: str, context: str) -> str:\n        \"\"\"\n        You are an assistant for question-answering tasks. Use the following pieces of retrieved context to answer the question. If you don't know the answer, just say that you don't know.\n        Question: {question}\n        Context: {context}\n        Answer:\n        \"\"\"\n        template = PromptTemplate(cls.simple_prompt.__doc__)\n        return template.format(question=question, context=context)", "metrics": {"lines_of_code": 9, "complexity": 1, "num_parameters": 3, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 1, "max_nesting_depth": 0}}
{"id": "918cdf4244874a14b11cc6a615def725c24c27a3", "type": "Parameter", "name": "cls", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "96319fefb159978bdcb0836b318ad673481a236a", "type": "Parameter", "name": "question", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "f695450041b7de796bd48b1c699f323147682f0d", "type": "Parameter", "name": "context", "param_type": "str", "kind": "positional", "default": null, "position": 2}
{"id": "762bb787af9640440848aae45984fdfac41b7348", "type": "Variable", "name": "template", "value": "PromptTemplate(cls.simple_prompt.__doc__)", "value_type": "complex", "lineno": 16, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "34eb104545d4dc6c2ed4faa262229f333dd059f0", "type": "Decorator", "name": "staticmethod", "lineno": 19, "args": [], "kwargs": {}}
{"id": "085e8f721094555f582dc31213c90736d9edbab1", "type": "Method", "name": "concise_prompt", "qualified_name": "PromptTemplates.concise_prompt", "is_async": false, "is_method": true, "is_static": true, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": ["staticmethod"], "decorator_details": [{"name": "staticmethod", "args": [], "kwargs": {}}], "parameters": [{"name": "cls", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "question", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "context", "type": "str", "kind": "positional", "default": null, "position": 2}], "return_type": "str", "lineno": 20, "end_lineno": 28, "docstring": "You are an assistant for question-answering tasks. Use the following pieces of retrieved context to answer the question. If you don't know the answer, just say that you don't know. Use minimum sentences and keep the answer concise.\nQuestion: {question}\nContext: {context}\nAnswer:", "snippet": "    def concise_prompt(cls, question: str, context: str) -> str:\n        \"\"\"\n        You are an assistant for question-answering tasks. Use the following pieces of retrieved context to answer the question. If you don't know the answer, just say that you don't know. Use minimum sentences and keep the answer concise.\n        Question: {question}\n        Context: {context}\n        Answer:\n        \"\"\"\n        template = PromptTemplate(cls.concise_prompt.__doc__)\n        return template.format(questi", "metrics": {"lines_of_code": 9, "complexity": 1, "num_parameters": 3, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 1, "max_nesting_depth": 0}}
{"id": "2325dd2f2cce968bc4d18bf9aa73c71dbfa87d4b", "type": "Parameter", "name": "cls", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "86bad34bfd4075f641f5c9812d303dc4e0285435", "type": "Parameter", "name": "question", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "974413c4e67e994f133693e267fae0fb95b4fa92", "type": "Parameter", "name": "context", "param_type": "str", "kind": "positional", "default": null, "position": 2}
{"id": "42f91205d547d5d57cd7ba1266265927098ea4ea", "type": "Variable", "name": "template", "value": "PromptTemplate(cls.concise_prompt.__doc__)", "value_type": "complex", "lineno": 27, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "7ec44e024bed4bf9d7d1cd8a79978e5e1734d57e", "type": "Decorator", "name": "staticmethod", "lineno": 30, "args": [], "kwargs": {}}
{"id": "1596732d983d943f3e600283dac823147faf0fb4", "type": "Method", "name": "chat_history_based_standalone_question", "qualified_name": "PromptTemplates.chat_history_based_standalone_question", "is_async": false, "is_method": true, "is_static": true, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": ["staticmethod"], "decorator_details": [{"name": "staticmethod", "args": [], "kwargs": {}}], "parameters": [{"name": "cls", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "question", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "chat_history", "type": "str", "kind": "positional", "default": null, "position": 2}], "return_type": "str", "lineno": 31, "end_lineno": 37, "docstring": "Combine the chat history and follow up question into a standalone question. Chat History: {chat_history}\"\nFollow up question: {question}", "snippet": "    def chat_history_based_standalone_question(cls, question: str, chat_history: str) -> str:\n        \"\"\"\n        Combine the chat history and follow up question into a standalone question. Chat History: {chat_history}\"\n        Follow up question: {question}\n        \"\"\"\n        template = PromptTemplate(cls.chat_history.__doc__)\n        return template.format(question=question, chat_history=chat_history)", "metrics": {"lines_of_code": 7, "complexity": 1, "num_parameters": 3, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 1, "max_nesting_depth": 0}}
{"id": "fc860159924de2745934e71eeeb417b1ee830407", "type": "Parameter", "name": "cls", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "226ff71e23700ece3e4548ebc141859d4ffa0a52", "type": "Parameter", "name": "question", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "4538352f5ec512e38108190ab6772e37cef45f89", "type": "Parameter", "name": "chat_history", "param_type": "str", "kind": "positional", "default": null, "position": 2}
{"id": "56e73070b654ea5b65c4a0d238a65b0222459d7d", "type": "Variable", "name": "template", "value": "PromptTemplate(cls.chat_history.__doc__)", "value_type": "complex", "lineno": 36, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "692eb69756bca6bed7eedfdad8aa720c3aaa5820", "type": "Decorator", "name": "staticmethod", "lineno": 39, "args": [], "kwargs": {}}
{"id": "70a4abfd67b7478fb50516c209c82a02f5e9561b", "type": "Method", "name": "query_generation_prompt", "qualified_name": "PromptTemplates.query_generation_prompt", "is_async": false, "is_method": true, "is_static": true, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": ["staticmethod"], "decorator_details": [{"name": "staticmethod", "args": [], "kwargs": {}}], "parameters": [{"name": "cls", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "question", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "k", "type": "int", "kind": "positional", "default": "4", "position": 2}], "return_type": "str", "lineno": 40, "end_lineno": 47, "docstring": "You are a helpful assistant that generates multiple search queries based on a single input query.\nGenerate multiple search queries related to: {question}\nOUTPUT ({k} queries):", "snippet": "    def query_generation_prompt(cls, question: str, k: int = 4) -> str:\n        \"\"\"\n        You are a helpful assistant that generates multiple search queries based on a single input query.\n        Generate multiple search queries related to: {question}\n        OUTPUT ({k} queries):\n        \"\"\"\n        template = PromptTemplate(cls.query_generation_prompt.__doc__)\n        return template.format(question=question, k=k)", "metrics": {"lines_of_code": 8, "complexity": 1, "num_parameters": 3, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 1, "max_nesting_depth": 0}}
{"id": "dbdbe17ca2d79b496273d0466b2d46b810397775", "type": "Parameter", "name": "cls", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "991500fb109abd77c2fef669b4b03eb1a56cc9d7", "type": "Parameter", "name": "question", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "b92d17778dc27902c2feb0cf9a5ef9d0a25d501b", "type": "Parameter", "name": "k", "param_type": "int", "kind": "positional", "default": "4", "position": 2}
{"id": "f42b0e814c823abf2158e3f411a8ef96487d6e0f", "type": "Variable", "name": "template", "value": "PromptTemplate(cls.query_generation_prompt.__doc__)", "value_type": "complex", "lineno": 46, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "e82bdf4a1db96b37ed8d8f4f9b2825cfcdb56629", "type": "File", "name": "metadata.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/metadata.py", "relpath": "src/components/metadata.py", "module": "src.components.metadata", "extension": ".py", "sha1": "4edb097230401211d395367c7c9c865093ec96a0", "lines_of_code": 65, "size_bytes": 3379, "language": "python", "encoding": "utf-8"}
{"id": "67724d4d40e67b7fe1c0125fb56ec5c7b217fccd", "type": "Import", "name": "dataclass", "module": "dataclasses", "full_name": "dataclasses.dataclass", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 1, "is_stdlib": true}
{"id": "af6cbb1e5a3109baeefb7f90e0b523791e7f0a56", "type": "Import", "name": "asdict", "module": "dataclasses", "full_name": "dataclasses.asdict", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 1, "is_stdlib": true}
{"id": "dc7a68444618bbc5b1107b88071b7aa6c4e25861", "type": "Import", "name": "field", "module": "dataclasses", "full_name": "dataclasses.field", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 1, "is_stdlib": true}
{"id": "1c468d8c9048b2d66782d7bf0c67b586260db58b", "type": "Import", "name": "Sequence", "module": "typing", "full_name": "typing.Sequence", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 2, "is_stdlib": true}
{"id": "85c2b13b7cd87fd55325a66c09a2317f127eb4a2", "type": "Import", "name": "Dict", "module": "typing", "full_name": "typing.Dict", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 2, "is_stdlib": true}
{"id": "f29c1e8be25f1127853fb7c02db0a6be84a06e26", "type": "Import", "name": "Any", "module": "typing", "full_name": "typing.Any", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 2, "is_stdlib": true}
{"id": "b37387c56c3e5fc80139b682d6611709a955151a", "type": "Import", "name": "Optional", "module": "typing", "full_name": "typing.Optional", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 2, "is_stdlib": true}
{"id": "e209948fd84e086938f4474f1b0ff7854d7b2c13", "type": "Class", "name": "Metadata", "lineno": 5, "end_lineno": 65, "docstring": "Class representing metadata for a document.\n\nAttributes:\n    standard_number (str): The number of the standard document.\n    standard_title (str): The title of the standard document.\n    publication_date (str): The publication date of the standard document.\n    standard_abstract (str): The abstract of the standard document.\n    standard_edition (str): The edition of the standard document.\n    standard_reference_number (str): The reference number of the standard document.\n    sections (Optional[str]): A str of sections in the document for the particular chunk. Optional because chunk could contains the front page, last page, author information etc. which do not have any sections. Basically introductory pages.\n    sections_title (Optional[str]): A str of titles for the sections for the particular chunk. Optional because chunk could be introductory pages.\n    sub_sections (Optional[str]): A str of subsections in the document for the particular chunk. Optional because chunk could be introductory pages.\n    sub_sections_title (Optional[str]): A str of titles for the subsections for the particular chunk. Optional because chunk could be introductory pages.\n    related_standards (Optional[str]): A str of related standards which contains the standard number\n    authorizing_body (Optional[str]): Authorizing body of the particular body\n    revision_history (Optional[str]): List of revisions that a particular standard document has undergone\nMethods:\n    get_dict(): Convert the metadata object to a dictionary.\n\nExamples:\n\n    .. code-block:: python\n\n        from metadata import Metadata\n        m = Metadata(\n            standard_title=\"ESG 2015 Standards and Guidelines for Quality Assurance in the European Higher Education Area (ESG)\",\n            publication_date=\"2015-05-15\",\n            standard_abstract=\"The ESG are a set of standards and guidelines for internal and external quality assurance in higher education in the European Higher Education Area (EHEA).\",\n            standard_edition=\"Second Edition\",\n            standard_reference_number=\"ESG 2015\",\n            related_standards=\"ENQA 2009,Bologna Process\",\n            authorizing_body=\"ENQA\",\n            revision_history=\"ESG 2005\"\n        )\n\n        metadata_dict = m.get_dict()", "snippet": "class Metadata:\n    \"\"\"Class representing metadata for a document.\n\n    Attributes:\n        standard_number (str): The number of the standard document.\n        standard_title (str): The title of the standard document.\n        publication_date (str): The publication date of the standard document.\n        standard_abstract (str): The abstract of the standard document.\n        standard_edition (str): The edition of the standard document.\n        standard_reference_number (str): The reference number", "bases": [], "decorators": ["dataclass"], "num_methods": 1, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "e8956ec35d04fcbac7a3fb37a6e391a776c21254", "type": "Method", "name": "get_dict", "qualified_name": "Metadata.get_dict", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}], "return_type": "Dict[str, Any]", "lineno": 59, "end_lineno": 65, "docstring": "Converts the metadata object to a dictionary.\n\nReturns:\n    dict: A dictionary representation of the metadata object.", "snippet": "    def get_dict(self) -> Dict[str, Any]:\n        \"\"\"Converts the metadata object to a dictionary.\n\n        Returns:\n            dict: A dictionary representation of the metadata object.\n        \"\"\"\n        return asdict(self)", "metrics": {"lines_of_code": 7, "complexity": 1, "num_parameters": 1, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 0}}
{"id": "d24e206ce97bf3725370783e468ee888a184b8c2", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "046b9ec2b3a7686f60612b37d9f3e5ed3a979b3e", "type": "File", "name": "file_reader.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/file_reader.py", "relpath": "src/components/file_reader.py", "module": "src.components.file_reader", "extension": ".py", "sha1": "4ce89406a6eba249f8eb32e7c4c8b1549b462a9c", "lines_of_code": 15, "size_bytes": 510, "language": "python", "encoding": "utf-8"}
{"id": "059ee7f65c7f9a18fefaf01823d9b36326546f06", "type": "Import", "name": "os", "alias": null, "import_type": "direct", "lineno": 1, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "e471a7ee022e7da0cb96d79bf8aac6a16abdb96e", "type": "Import", "name": "List", "module": "typing", "full_name": "typing.List", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 2, "is_stdlib": true}
{"id": "9cedb7eb4226bfad7fcae46fdfc7d74f2bd14e11", "type": "Function", "name": "get_files", "qualified_name": "get_files", "is_async": false, "is_method": false, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "file_dir", "type": "str", "kind": "positional", "default": null, "position": 0}], "return_type": "List[str]", "lineno": 4, "end_lineno": 15, "docstring": "Returns file paths for files to be loaded from the passed directory.\nThis is to load files from file system into Postgres", "snippet": "def get_files(file_dir : str) -> List[str]:\n    \"\"\"\n    Returns file paths for files to be loaded from the passed directory.\n    This is to load files from file system into Postgres\n    \"\"\"\n    paths = []  # List to store file paths\n    for root, dirs, files in os.walk(file_dir):\n        for file in files:\n            # Concatenate the directory and file name to form the full path\n            path = os.path.join(root, file)\n...", "metrics": {"lines_of_code": 12, "complexity": 3, "num_parameters": 1, "num_returns": 1, "num_branches": 0, "num_loops": 2, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 2}}
{"id": "ac7099b063ab20aa50bf6496c6defed561933d8b", "type": "Parameter", "name": "file_dir", "param_type": "str", "kind": "positional", "default": null, "position": 0}
{"id": "6abafbed48aa703ddce389951826f7e5facc5de4", "type": "Variable", "name": "paths", "value": "[]", "value_type": "complex", "lineno": 9, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "79ec02c13c777e64983c921f409c6b794c28acca", "type": "Variable", "name": "path", "value": "os.path.join(root, file)", "value_type": "complex", "lineno": 13, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "8c9a10cf3a5ad3a64eff056212cee9672dbf1a48", "type": "File", "name": "chroma_ops.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/chroma_ops.py", "relpath": "src/components/chroma_ops.py", "module": "src.components.chroma_ops", "extension": ".py", "sha1": "1abfe6bfe76636feda0d67b12b1743f136ad4a34", "lines_of_code": 162, "size_bytes": 6021, "language": "python", "encoding": "utf-8"}
{"id": "730dd7526a3efdafc249e847f8f0b1be2195c758", "type": "Import", "name": "chromadb", "alias": null, "import_type": "direct", "lineno": 1, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "edf8f6676906e726301fc2da5b2021e6de34ec29", "type": "Import", "name": "chromadb.utils.embedding_functions", "alias": "embedding_functions", "import_type": "direct", "lineno": 2, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "4afa2c5292ffbaf2cf8b9b5cade79c00d45250d0", "type": "Import", "name": "Embedder", "module": "embedder", "full_name": "embedder.Embedder", "alias": null, "import_type": "from", "level": 1, "is_relative": true, "lineno": 3, "is_stdlib": false}
{"id": "6d3c9871bae6db160ec4357b8d0a1cef06dc9745", "type": "Import", "name": "Collection", "module": "chromadb.api.models.Collection", "full_name": "chromadb.api.models.Collection.Collection", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 4, "is_stdlib": false}
{"id": "6d87451ad3c2967dbfedd8ef6267bfb9409b96a6", "type": "Import", "name": "Document", "module": "langchain.docstore.document", "full_name": "langchain.docstore.document.Document", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 5, "is_stdlib": false}
{"id": "a871e1c81dc35cc09456c5993734350883f6f5ff", "type": "Import", "name": "os", "alias": null, "import_type": "direct", "lineno": 6, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "aab8b98d4c1f8f274707562c32d07b1dd5b1aa65", "type": "Import", "name": "load_dotenv", "module": "dotenv", "full_name": "dotenv.load_dotenv", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 7, "is_stdlib": false}
{"id": "1546e07ab2b4de685839c1b0d3b4b625a4ad6f2f", "type": "Import", "name": "Union", "module": "typing", "full_name": "typing.Union", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 8, "is_stdlib": true}
{"id": "73a4d2032113882a9346ea10308b5e6829d4c1e5", "type": "Import", "name": "Dict", "module": "typing", "full_name": "typing.Dict", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 8, "is_stdlib": true}
{"id": "4449a7d6d88fe50d75454240e4b0fa56c105966d", "type": "Import", "name": "Any", "module": "typing", "full_name": "typing.Any", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 8, "is_stdlib": true}
{"id": "061bae2b9fcb2f74b06ad8774c58ff0c1132006f", "type": "Import", "name": "List", "module": "typing", "full_name": "typing.List", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 8, "is_stdlib": true}
{"id": "2bce75a4e8d323e1d5cba73927a3bb06fa1beef0", "type": "Import", "name": "ClientAPI", "module": "chromadb.api", "full_name": "chromadb.api.ClientAPI", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 9, "is_stdlib": false}
{"id": "d9532959bdd56bb65b89f26bcc577d8ef0a6577e", "type": "Import", "name": "sys", "alias": null, "import_type": "direct", "lineno": 14, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "71c6aff74139c55f63a700db2851f6226417b489", "type": "Class", "name": "ChromaOps", "lineno": 21, "end_lineno": 161, "docstring": "Contains methods for operations on Chroma DB.\nMethods are about:\n    - Collections\n        - Create a collection\n        - Get a collection: to perform operations on this collection using this returned collection object\n        - Delete a collection\n    - RESET the Chroma DB: Deletes all collections and entries.\n\nOnce we have the collection object, we can perform actions on it using methods in Chroma DB's collection\ndocumentation such as:\n    - add  : to add embeddings to a collection\n    - get  : to get embeddings and their metadata from a collection\n    - peek : to get first few records only to check the data\n    - query: to get the n_results nearest neighbor embeddings for provided query_embeddings or query_texts\n    - modify: to modify the collection name or metadata\n    - update: to update the embeddings or documents against the provided/passed ids\n    - upsert: to update the embeddings, metadata or documents for provided ids, or create them if they don't exist \n    - delete: to delete the embeddings based on ids and/or a where filter", "snippet": "class ChromaOps:\n    \"\"\"\n    Contains methods for operations on Chroma DB.\n    Methods are about:\n        - Collections\n            - Create a collection\n            - Get a collection: to perform operations on this collection using this returned collection object\n            - Delete a collection\n        - RESET the Chroma DB: Deletes all collections and entries.\n    \n...", "bases": [], "decorators": [], "num_methods": 7, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "9285a8399b907c0bb7ecf65b3d07d1d0ff24c145", "type": "Method", "name": "chroma_client", "qualified_name": "ChromaOps.chroma_client", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}], "return_type": "ClientAPI", "lineno": 43, "end_lineno": 52, "docstring": "creates a chroma db client and returns it.", "snippet": "    def chroma_client(self) -> ClientAPI:\n        \"\"\"\n        creates a chroma db client and returns it.\n        \"\"\"\n        __import__('pysqlite3')\n        import sys\n        sys.modules['sqlite3'] = sys.modules.pop('pysqlite3')\n\n        chroma_client = chromadb.HttpClient(host=os.environ.get('chroma_client_host'), port = os.environ.get('chroma_client_port'))\n        return chroma_client", "metrics": {"lines_of_code": 10, "complexity": 1, "num_parameters": 1, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 0}}
{"id": "b90687b5ec61f35b3856fb02a2f7d6e36e2ff0c1", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "9559bab83ed7feeb53e3c2f42d321cebe73a2082", "type": "Import", "name": "sys", "alias": null, "import_type": "direct", "lineno": 48, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "bbdfd3815d49caa4e0cecf8a460ff21fe1d9912b", "type": "Variable", "name": "chroma_client", "value": "chromadb.HttpClient(host=os.environ.get('chroma_client_host'), port=os.environ.get('chroma_client_port'))", "value_type": "complex", "lineno": 51, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "6777143e7389de4b9a34dfa22c911162cc1450e8", "type": "Method", "name": "save_embeddings", "qualified_name": "ChromaOps.save_embeddings", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "collection_name", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "embeddings", "type": "List[List[float]]", "kind": "positional", "default": null, "position": 2}, {"name": "metadata", "type": "Union[None, List[List[Dict[str, Any]]]]", "kind": "positional", "default": null, "position": 3}, {"name": "documents", "type": "List[List[Document]]", "kind": "positional", "default": null, "position": 4}], "return_type": "None", "lineno": 54, "end_lineno": 70, "docstring": null, "snippet": "    def save_embeddings(self, collection_name: str, embeddings: List[List[float]], metadata: Union[None, List[List[Dict[str, Any]]]], documents: List[List[Document]]) -> None:\n        # Create a collection if it doesn't exist\n        collection = self.get_collection(collection_name)\n\n        docs = [doc for docs in documents for doc in docs]\n        metadatas = [meta for metadatas in metadata for meta in metadatas]\n\n        if len(docs) != len(metadata):\n            raise ValueError(\"Length of D", "metrics": {"lines_of_code": 17, "complexity": 3, "num_parameters": 5, "num_returns": 0, "num_branches": 1, "num_loops": 1, "has_docstring": false, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "727f8f555056df5d3c2e3c824c07d9d06c658c41", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "04fad176c386bb2b48a048c4ec016055fba76510", "type": "Parameter", "name": "collection_name", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "89e5ef075012bab8d64c5efe3157572c2b2a07e1", "type": "Parameter", "name": "embeddings", "param_type": "List[List[float]]", "kind": "positional", "default": null, "position": 2}
{"id": "008d2ef8e892bbd4fad6a895f068979edf3a37fb", "type": "Parameter", "name": "metadata", "param_type": "Union[None, List[List[Dict[str, Any]]]]", "kind": "positional", "default": null, "position": 3}
{"id": "bdbff2923567b2c902feb22444c1a68080290737", "type": "Parameter", "name": "documents", "param_type": "List[List[Document]]", "kind": "positional", "default": null, "position": 4}
{"id": "f3a954432ef03903dec6f3efd456b1fa3c4c3b68", "type": "Variable", "name": "collection", "value": "self.get_collection(collection_name)", "value_type": "complex", "lineno": 56, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "1559f73e9d0d03d90029665c5e2b2b9ba8510627", "type": "Variable", "name": "docs", "value": "[doc for docs in documents for doc in docs]", "value_type": "complex", "lineno": 58, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "b4cd0e7b215dde2c3c3f60c3444c3cb37aca1e10", "type": "Variable", "name": "metadatas", "value": "[meta for metadatas in metadata for meta in metadatas]", "value_type": "complex", "lineno": 59, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "23c5b6fe581218b79f573569c434a27c6cd1692b", "type": "Variable", "name": "ids", "value": "[]", "value_type": "complex", "lineno": 64, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "3b17307b2eae0ec925cd02e45622b4e2dcef2432", "type": "Method", "name": "create_collection", "qualified_name": "ChromaOps.create_collection", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "name", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "embedding_function", "type": null, "kind": "positional", "default": "None", "position": 2}, {"name": "metadata", "type": "Dict[str, Any]", "kind": "positional", "default": "None", "position": 3}], "return_type": "Collection", "lineno": 72, "end_lineno": 98, "docstring": "creates a collection in the chroma db. Raises error if the collection already exists.\n\nArgs:\n    name - The name of the collection to create.\n    metadata - Optional metadata to associate with the collection.\n    embedding_function - Function to use to embed documents. Default is OpenAI's function.\nReturns:\n    Returns newly created collection of Chroma DB. For performing actions on this collection. ", "snippet": "    def create_collection(\n            self,\n            name: str,\n            embedding_function = None,\n            metadata: Dict[str, Any] = None\n        ) -> Collection:\n        \"\"\"\n        creates a collection in the chroma db. Raises error if the collection already exists.\n        \n        Args:\n...", "metrics": {"lines_of_code": 27, "complexity": 2, "num_parameters": 4, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "96f86734f558d2fa6492a292446ddc708d63c03d", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "54fd2bf01c2dd26bd9cc16bd9ef4ea07a04ae475", "type": "Parameter", "name": "name", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "cb8097db395c239e5ffeb503681a364d9bb0b2f4", "type": "Parameter", "name": "embedding_function", "param_type": null, "kind": "positional", "default": "None", "position": 2}
{"id": "1932f804cb2408a3c7d9172d08fc3b3a08517af9", "type": "Parameter", "name": "metadata", "param_type": "Dict[str, Any]", "kind": "positional", "default": "None", "position": 3}
{"id": "7012a4efa962d3a6a0f2955550232c853d4d88e5", "type": "Variable", "name": "chroma_client", "value": "self.chroma_client()", "value_type": "complex", "lineno": 88, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "d889ef5fa2a398d5d8d01922db3ab18bbc289dff", "type": "Variable", "name": "created_collection", "value": "chroma_client.create_collection(name=name, metadata=metadata, embedding_function=embedding_function, get_or_create=False)", "value_type": "complex", "lineno": 90, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "39f076c07e961c42d3cede98424f3de689efc0c8", "type": "Method", "name": "get_or_create_collection", "qualified_name": "ChromaOps.get_or_create_collection", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "name", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "embedding_function", "type": null, "kind": "positional", "default": "None", "position": 2}, {"name": "metadata", "type": "Dict[str, Any]", "kind": "positional", "default": "None", "position": 3}], "return_type": "Collection", "lineno": 101, "end_lineno": 120, "docstring": "Creates a Chroma collection if not found. If a collection already exists\nunder the passed name, then returns it.", "snippet": "    def get_or_create_collection(\n            self,\n            name: str,\n            embedding_function = None,\n            metadata: Dict[str, Any] = None\n        ) -> Collection:\n        \"\"\"\n        Creates a Chroma collection if not found. If a collection already exists\n        under the passed name, then returns it.\n        \"\"\"\n...", "metrics": {"lines_of_code": 20, "complexity": 2, "num_parameters": 4, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "e1a9ff88abcac7e8c208c1de6975c7b489f885f0", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "9314cf32ff73bafddbae4088672b665858fce6a2", "type": "Parameter", "name": "name", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "09ffd0b0286cffc72d045d2e863d359fecf2de73", "type": "Parameter", "name": "embedding_function", "param_type": null, "kind": "positional", "default": "None", "position": 2}
{"id": "6b63370d6886c8f4edca7c4c86ed119075fdd3ee", "type": "Parameter", "name": "metadata", "param_type": "Dict[str, Any]", "kind": "positional", "default": "None", "position": 3}
{"id": "bd1c753f41be12a60ea34075eebe1d3dda27057b", "type": "Variable", "name": "chroma_client", "value": "self.chroma_client()", "value_type": "complex", "lineno": 111, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "d9562bf97752fcdec27ffc309dcc03d64e21d71d", "type": "Variable", "name": "created_collection", "value": "chroma_client.get_or_create_collection(name=name, metadata=metadata, embedding_function=embedding_function)", "value_type": "complex", "lineno": 113, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "77d7ef4bd2ef37db5369019e119caf33c4062549", "type": "Method", "name": "get_collection", "qualified_name": "ChromaOps.get_collection", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "collection_name", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "embedding_function", "type": null, "kind": "positional", "default": "None", "position": 2}, {"name": "metadata", "type": "Dict[str, Any]", "kind": "positional", "default": "None", "position": 3}], "return_type": "Union[Collection, bool]", "lineno": 123, "end_lineno": 145, "docstring": "Returns the collection with the name passed into collection_name or return false if it doesn't exists\n\nArgs:\n    collection_name: name of the collection\n    embedding_function: Defaults to OpenAI embedding function from utils of Chroma DB.", "snippet": "    def get_collection(\n            self,\n            collection_name: str,\n            embedding_function = None,\n            metadata: Dict[str, Any] = None\n        ) -> Union[Collection, bool]:\n        \"\"\"\n        Returns the collection with the name passed into collection_name or return false if it doesn't exists\n        \n        Args:\n...", "metrics": {"lines_of_code": 23, "complexity": 2, "num_parameters": 4, "num_returns": 2, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "ce1cc3aefcf03f69ed73a66ac4c5450f1a7370d9", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "01faa7503fb68c866812fd69206208e1fe2b951c", "type": "Parameter", "name": "collection_name", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "8eda425e4d331351fc7072d06ea1bccd20e26358", "type": "Parameter", "name": "embedding_function", "param_type": null, "kind": "positional", "default": "None", "position": 2}
{"id": "5873aa8019779ef2a1134baa4d195393cc7d64eb", "type": "Parameter", "name": "metadata", "param_type": "Dict[str, Any]", "kind": "positional", "default": "None", "position": 3}
{"id": "e4494ce9d07e014db608f341ad77e9612c366a37", "type": "Variable", "name": "client", "value": "self.chroma_client()", "value_type": "complex", "lineno": 137, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "e77c5e046b40ffb3a4401359bf22ffc21e8e80bf", "type": "Variable", "name": "collection", "value": "client.get_collection(name=collection_name, embedding_function=embedding_function)", "value_type": "complex", "lineno": 138, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "6878e4889623107d1e3976a7672fddd67eb3cd47", "type": "Method", "name": "delete_collection", "qualified_name": "ChromaOps.delete_collection", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "collection_name", "type": "str", "kind": "positional", "default": null, "position": 1}], "return_type": "None", "lineno": 148, "end_lineno": 153, "docstring": "Deletes a collection with the given name", "snippet": "    def delete_collection(self, collection_name: str) -> None:\n        \"\"\"\n        Deletes a collection with the given name\n        \"\"\"\n        client = self.chroma_client()\n        client.delete_collection(name=collection_name)", "metrics": {"lines_of_code": 6, "complexity": 1, "num_parameters": 2, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 0}}
{"id": "8f47c3a474d15fb090337e5b88fe9f3292ad0d66", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "10b2b94d7a53578204d29c1bb62197650b79a7e6", "type": "Parameter", "name": "collection_name", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "79350f3408bd03f3172ed856b835ec6b7f9f4afc", "type": "Variable", "name": "client", "value": "self.chroma_client()", "value_type": "complex", "lineno": 152, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "e426c027edaa158ed9ccbb9c23b10c436751b2dd", "type": "Method", "name": "reset_chroma", "qualified_name": "ChromaOps.reset_chroma", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}], "return_type": "bool", "lineno": 156, "end_lineno": 161, "docstring": "Deletes all the collections and entries in Chroma DB.", "snippet": "    def reset_chroma(self) -> bool:\n        \"\"\"\n        Deletes all the collections and entries in Chroma DB.\n        \"\"\"\n        client = self.chroma_client()\n        return client.reset()", "metrics": {"lines_of_code": 6, "complexity": 1, "num_parameters": 1, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 0}}
{"id": "2e3c077d5a81fb4f64cb125c6137eefac140fd7b", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "179a60a178b1c949845a9f6890ba234a1cfa330e", "type": "Variable", "name": "client", "value": "self.chroma_client()", "value_type": "complex", "lineno": 160, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "4747f6b3cce2c4bf3c95eb46c17c2602d3b6a5ee", "type": "File", "name": "chain.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/chain.py", "relpath": "src/components/chain.py", "module": "src.components.chain", "extension": ".py", "sha1": "4244bfdff7e2bcb41b4fa4e914b2e8cae8353647", "lines_of_code": 99, "size_bytes": 4567, "language": "python", "encoding": "utf-8"}
{"id": "5f4834bc88ef7c7936e18e08b44c7db2570709f4", "type": "Import", "name": "ConversationalRetrievalChain", "module": "langchain.chains", "full_name": "langchain.chains.ConversationalRetrievalChain", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 1, "is_stdlib": false}
{"id": "74bbc372637a356b4bb242b9c6c5fcf45326bfa2", "type": "Import", "name": "FlareChain", "module": "langchain.chains", "full_name": "langchain.chains.FlareChain", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 1, "is_stdlib": false}
{"id": "a3f51fc6944748c3d4d91845d351f8cd65a8e1bc", "type": "Import", "name": "OpenAIModerationChain", "module": "langchain.chains", "full_name": "langchain.chains.OpenAIModerationChain", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 1, "is_stdlib": false}
{"id": "cd3595d74ee62ec94141586b775d27cd6fe4d3ca", "type": "Import", "name": "SequentialChain", "module": "langchain.chains", "full_name": "langchain.chains.SequentialChain", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 1, "is_stdlib": false}
{"id": "230c6ac911812059fb799417edf9564fe53e44a3", "type": "Import", "name": "LLMChain", "module": "langchain.chains", "full_name": "langchain.chains.LLMChain", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 1, "is_stdlib": false}
{"id": "977aed1294d41d02968d6a5c9f253c21308df249", "type": "Import", "name": "StuffDocumentsChain", "module": "langchain.chains", "full_name": "langchain.chains.StuffDocumentsChain", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 1, "is_stdlib": false}
{"id": "15e1e0b0d179e70b7b921c9bc406bc09bf51a67e", "type": "Import", "name": "FlareChain", "module": "langchain.chains", "full_name": "langchain.chains.FlareChain", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 9, "is_stdlib": false}
{"id": "d3a8189d1af32e6e6ffb6d747e69a63394f3f81f", "type": "Import", "name": "BaseChatMemory", "module": "langchain.memory.chat_memory", "full_name": "langchain.memory.chat_memory.BaseChatMemory", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 10, "is_stdlib": false}
{"id": "187f26f6db20675419a6a912b4bd89161c3ff562", "type": "Import", "name": "BaseRetriever", "module": "langchain.schema", "full_name": "langchain.schema.BaseRetriever", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 11, "is_stdlib": false}
{"id": "2a5624e07353ef28e56414be47b9d04b4f7bfd9a", "type": "Import", "name": "Chain", "module": "langchain.chains.base", "full_name": "langchain.chains.base.Chain", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 12, "is_stdlib": false}
{"id": "73d7873ad1ad611744032e4c137bbd014188cfee", "type": "Import", "name": "memory", "module": "langchain", "full_name": "langchain.memory", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 13, "is_stdlib": false}
{"id": "24f86490984b6798d004ba25c24344b01f45ff70", "type": "Import", "name": "Any", "module": "typing", "full_name": "typing.Any", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 14, "is_stdlib": true}
{"id": "9d8fb9d3092d70b4ec68c7cf61b1e91dc111941a", "type": "Import", "name": "Union", "module": "typing", "full_name": "typing.Union", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 14, "is_stdlib": true}
{"id": "e7d64f82bdc684afecb192c69d332d48a14cc289", "type": "Import", "name": "PromptTemplate", "module": "langchain.prompts", "full_name": "langchain.prompts.PromptTemplate", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 15, "is_stdlib": false}
{"id": "05654ad6b8e40145025ace9c9cb0e56cfa0717d5", "type": "Import", "name": "OpenAI", "module": "langchain_openai", "full_name": "langchain_openai.OpenAI", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 16, "is_stdlib": false}
{"id": "61e9371d1047e0a19fac984f547ba7796c35e12f", "type": "Import", "name": "BaseModel", "module": "langchain_core.pydantic_v1", "full_name": "langchain_core.pydantic_v1.BaseModel", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 17, "is_stdlib": false}
{"id": "a32521277b9d630ba93c040a9ad350cd2b750c4e", "type": "Import", "name": "FlareChain", "module": "langchain.chains", "full_name": "langchain.chains.FlareChain", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 18, "is_stdlib": false}
{"id": "5b15e9e88e4242ad31dc6bb5fe579d19d40b95dd", "type": "Class", "name": "Chainer", "lineno": 20, "end_lineno": 99, "docstring": "Contains different LangChain chains", "snippet": "class Chainer:\n    \"\"\"\n    Contains different LangChain chains\n    \"\"\"\n    \n    def retrieval_chain(\n            self,\n            retriever: BaseRetriever,\n            MEMORY: BaseChatMemory,\n            LLM: BaseModel,\n...", "bases": [], "decorators": [], "num_methods": 2, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "46ad3fb47cc1e5da9ddc6aa8ad27131fa15c33f3", "type": "Method", "name": "retrieval_chain", "qualified_name": "Chainer.retrieval_chain", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "retriever", "type": "BaseRetriever", "kind": "positional", "default": null, "position": 1}, {"name": "MEMORY", "type": "BaseChatMemory", "kind": "positional", "default": null, "position": 2}, {"name": "LLM", "type": "BaseModel", "kind": "positional", "default": null, "position": 3}, {"name": "max_tokens_limit", "type": "Union[int, None]", "kind": "positional", "default": "4000", "position": 4}, {"name": "use_flare", "type": "bool", "kind": "positional", "default": "False", "position": 5}], "return_type": "Chain", "lineno": 25, "end_lineno": 67, "docstring": "Creates and configures a ConversationRetrievalChain OR a FlareChain and returns it.\n\nArgs:\n    retriever: Retriever object such as BaseRetriever for VectorStore retriever.\n    MEMORY: Memory holding scheme such as ConversationalBufferWindowMemory etc.\n    LLM: LLM object instantiated using ChatOpenAI class and configured with temperature and model settings\n    max_tokens_limit: Passing in a max_tokens_limit amount automatically truncates the tokens when prompting llm. Defaults to 4000.\n    use_flare: An advanced retrieval technique/chain. Forward-Looking Active REtrieval augmented generation (FLARE), a generic method which iteratively uses a prediction of the upcoming sentence to anticipate future content, which is then utilized as a query to retrieve relevant documents to regenerate the sentence if it contains low-confidence tokens.\nReturns:\n    Returns a ConversationalRetrievalChain configured with the passed parameter values.", "snippet": "    def retrieval_chain(\n            self,\n            retriever: BaseRetriever,\n            MEMORY: BaseChatMemory,\n            LLM: BaseModel,\n            max_tokens_limit: Union[int, None] = 4000,\n            use_flare: bool = False,\n        ) -> Chain:\n        \"\"\"\n        Creates and configures a ConversationRetrievalChain OR a FlareChain and returns it.\n...", "metrics": {"lines_of_code": 43, "complexity": 2, "num_parameters": 6, "num_returns": 2, "num_branches": 2, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "fd4f06006e7fff84cce791569e9a65045d073421", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "58c2cb93ae50fdd7aa93261648b075391e2bed3f", "type": "Parameter", "name": "retriever", "param_type": "BaseRetriever", "kind": "positional", "default": null, "position": 1}
{"id": "37be045a74f17c9a3f20d61bcebe80fb655b621e", "type": "Parameter", "name": "MEMORY", "param_type": "BaseChatMemory", "kind": "positional", "default": null, "position": 2}
{"id": "b57f2ca4d74f34cb02e0fa94511d0b0095d98a4c", "type": "Parameter", "name": "LLM", "param_type": "BaseModel", "kind": "positional", "default": null, "position": 3}
{"id": "d795403dc376219ad0a8d89534b8dd37d927dccc", "type": "Parameter", "name": "max_tokens_limit", "param_type": "Union[int, None]", "kind": "positional", "default": "4000", "position": 4}
{"id": "2003f542d877aa3a554c650542976880e067ff1e", "type": "Parameter", "name": "use_flare", "param_type": "bool", "kind": "positional", "default": "False", "position": 5}
{"id": "0789cd1ebb8b25208613e5a71c0956192c224fe0", "type": "Variable", "name": "output_key", "value": "'response' if use_flare else 'answer'", "value_type": "complex", "lineno": 45, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "bfd5f36a9624c5ce6e9d407ea9bb3e2fcaee635e", "type": "Variable", "name": "params", "value": "dict(llm=LLM, retriever=retriever, memory=MEMORY, verbose=True, max_tokens_limit=max_tokens_limit, return_source_documents=True)", "value_type": "complex", "lineno": 49, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "3ba8084ccaafae8ff457c433f4ca98d9f0b19c43", "type": "Variable", "name": "params", "value": "dict(llm=LLM, retriever=retriever, verbose=True, max_generation_len=164, min_prob=0.3, return_source_documents=True)", "value_type": "complex", "lineno": 59, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "e71faae9af90f610485f5e0e4c86b51954a77549", "type": "Method", "name": "moderated_chain", "qualified_name": "Chainer.moderated_chain", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "retriever", "type": "BaseRetriever", "kind": "positional", "default": null, "position": 1}, {"name": "MEMORY", "type": "BaseChatMemory", "kind": "positional", "default": null, "position": 2}, {"name": "LLM", "type": "BaseModel", "kind": "positional", "default": null, "position": 3}, {"name": "max_tokens_limit", "type": "int | None", "kind": "positional", "default": "4000", "position": 4}, {"name": "use_flare", "type": "bool", "kind": "positional", "default": "False", "position": 5}], "return_type": "Chain", "lineno": 69, "end_lineno": 99, "docstring": "Creates and returns a SequentialChain that contains two chains: \nConversationRetrievalChain and OpenAIModerationChain             \n\nArgs: \n    retriever : Retriever object such as BaseRetriever for VectorStore retriever.\n    MEMORY : Memory holding scheme such as ConversationalBufferWindowMemory etc.\n    LLM : LLM object instantiated using ChatOpenAI class and configured with temperature and model settings\n    max_tokens_limit : Passing in a max_tokens_limit amount automatically truncates the tokens when prompting llm. Defaults to 4000.\n    use_flare : An advanced retrieval technique/chain. Forward-Looking Active REtrieval augmented generation (FLARE), a generic method which iteratively uses a prediction of the upcoming sentence to anticipate future content, which is then utilized as a query to retrieve relevant documents to regenerate the sentence if it contains low-confidence tokens. ", "snippet": "    def moderated_chain(\n            self, \n            retriever: BaseRetriever,\n            MEMORY : BaseChatMemory,\n            LLM : BaseModel,\n            max_tokens_limit : int | None = 4000,\n            use_flare: bool = False,\n        ) -> Chain:\n        \"\"\"\n        Creates and returns a SequentialChain that contains two chains: \n...", "metrics": {"lines_of_code": 31, "complexity": 1, "num_parameters": 6, "num_returns": 1, "num_branches": 2, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 0}}
{"id": "6e4ba9179a53893c96aa37fe5524bf8b797b5e19", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "b5b89b1475258b5b6de2dedd7557766d1dc7b5e4", "type": "Parameter", "name": "retriever", "param_type": "BaseRetriever", "kind": "positional", "default": null, "position": 1}
{"id": "f27794c68c9f05e490b2398838a3a6f81b9425fd", "type": "Parameter", "name": "MEMORY", "param_type": "BaseChatMemory", "kind": "positional", "default": null, "position": 2}
{"id": "f9fe2c3c590fb95cfe6079f7a47eefab6b7afa47", "type": "Parameter", "name": "LLM", "param_type": "BaseModel", "kind": "positional", "default": null, "position": 3}
{"id": "1a5560204b63a5326ca917ccf5395987736cecfe", "type": "Parameter", "name": "max_tokens_limit", "param_type": "int | None", "kind": "positional", "default": "4000", "position": 4}
{"id": "0ca036c162b6a9b8af3550395a66c5a63935962c", "type": "Parameter", "name": "use_flare", "param_type": "bool", "kind": "positional", "default": "False", "position": 5}
{"id": "f94cf3ea714e783f46a615b452f8332c11cf0c9d", "type": "Variable", "name": "main_chain", "value": "self.retrieval_chain(retriever=retriever, MEMORY=MEMORY, LLM=LLM, use_flare=use_flare)", "value_type": "complex", "lineno": 89, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "3682089f616800139b03cd1c3fc147f3b0f7142e", "type": "Variable", "name": "input_variables", "value": "['user_input'] if use_flare else ['chat_history', 'question']", "value_type": "complex", "lineno": 91, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "f6fb99c98a8e585e45cee9088324fa3465567d87", "type": "Variable", "name": "moderation_input", "value": "'response' if use_flare else 'answer'", "value_type": "complex", "lineno": 92, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "5d59cecfdbcf14fbec30419b592987cb27581a0a", "type": "Variable", "name": "moderation_chain", "value": "OpenAIModerationChain(input_key=moderation_input)", "value_type": "complex", "lineno": 94, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "93d9cba7eb911e7960f3057467ce1d9080995c5f", "type": "File", "name": "database_ops.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/database_ops.py", "relpath": "src/components/database_ops.py", "module": "src.components.database_ops", "extension": ".py", "sha1": "c6f8897074a401eb62c33c07d1dd80de5880e7c8", "lines_of_code": 232, "size_bytes": 10391, "language": "python", "encoding": "utf-8"}
{"id": "87e539f2f162324d74168ad23df565fc598c489f", "type": "Import", "name": "shutil", "alias": null, "import_type": "direct", "lineno": 5, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "0188a120b73734d3644beb3425dcca872da5fec6", "type": "Import", "name": "psycopg2", "alias": null, "import_type": "direct", "lineno": 6, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "0715c923fcdb04038198ee91ce928fa5d3576a19", "type": "Import", "name": "os", "alias": null, "import_type": "direct", "lineno": 7, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "fdfd171418e39501be95889cc0ff976be2b21457", "type": "Import", "name": "Path", "module": "pathlib", "full_name": "pathlib.Path", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 8, "is_stdlib": true}
{"id": "08565707905a8a3b1c8afd717ad0fa745d4f9e5f", "type": "Import", "name": "List", "module": "typing", "full_name": "typing.List", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 9, "is_stdlib": true}
{"id": "a5bcb0ba54a2acf7377cdbd485c54113b1b60fa8", "type": "Import", "name": "get_files", "module": "components.file_reader", "full_name": "components.file_reader.get_files", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 10, "is_stdlib": false}
{"id": "2e2f67842fbc3c621cdf00cf053b521b5573d95a", "type": "Class", "name": "DBOps", "lineno": 12, "end_lineno": 232, "docstring": "Contains methods for performing operations on the database.\nCRUD operation functions.\n    Insert, Read, Update, and Delete a file or record.", "snippet": "class DBOps:\n    \"\"\"\n    Contains methods for performing operations on the database.\n    CRUD operation functions.\n        Insert, Read, Update, and Delete a file or record.\n    \"\"\"\n    def connection(self) -> psycopg2.extensions.connection:\n        \"\"\"\n        Creates a database connection object and returns it to be used to perform DB operations. \n        \"\"\"\n...", "bases": [], "decorators": [], "num_methods": 5, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "7e1646528b7aa7205a583898232398473eb4a1bc", "type": "Method", "name": "connection", "qualified_name": "DBOps.connection", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}], "return_type": "psycopg2.extensions.connection", "lineno": 18, "end_lineno": 30, "docstring": "Creates a database connection object and returns it to be used to perform DB operations. ", "snippet": "    def connection(self) -> psycopg2.extensions.connection:\n        \"\"\"\n        Creates a database connection object and returns it to be used to perform DB operations. \n        \"\"\"\n        # connection string: PostgreSQL\n        conn = psycopg2.connect(\n                database = os.environ.get('db_database'),\n                user = os.environ.get('db_user'),\n                password = os.environ.get('db_password'),\n                host = os.environ.get('db_host'),\n...", "metrics": {"lines_of_code": 13, "complexity": 1, "num_parameters": 1, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 0}}
{"id": "4c902834a8723d8fcc03e37ffc6afa29e4cea38c", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "ae8d13c7ff52b12bcb3065694c92e9cb05884420", "type": "Variable", "name": "conn", "value": "psycopg2.connect(database=os.environ.get('db_database'), user=os.environ.get('db_user'), password=os.environ.get('db_password'), host=os.environ.get('db_host'), port=os.environ.get('db_port'))", "value_type": "complex", "lineno": 23, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "3896b0ec9e893ff42c364cb0b5f0b98b7bad542d", "type": "Method", "name": "save_file_to_postgres", "qualified_name": "DBOps.save_file_to_postgres", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "conn", "type": "psycopg2.extensions.connection", "kind": "positional", "default": null, "position": 1}, {"name": "file_path", "type": "str", "kind": "positional", "default": null, "position": 2}, {"name": "table_name", "type": "str", "kind": "positional", "default": null, "position": 3}, {"name": "col_name", "type": "str", "kind": "positional", "default": null, "position": 4}, {"name": "save_to", "type": null, "kind": "positional", "default": "'media'", "position": 5}], "return_type": "None", "lineno": 32, "end_lineno": 78, "docstring": "Saves a passed file to Postgres. The file path is saved in the database, whereas the \nfile is saved on the server/file system in the directory passed into save_to parameter.\n\nArgs:\n    conn : DB connection object for postgres and to be used to perform operations on DB.\n    file_path : path of the file that is to be ADDED to the database.\n    table_name : name of the table where the path of the incoming file is to be saved. This path which is being saved is the path of this file on the server file system.\n    col_name : name of the column of the table, to which this file path is to be added/saved.\n    save_to : Default to media directory on the server. This is where the incoming file is to be stored and its reference will be in the database table as passed in table_name.\n\nReturns:\n    None", "snippet": "    def save_file_to_postgres(self, conn : psycopg2.extensions.connection, file_path : str, table_name : str, col_name : str, save_to=\"media\") -> None:\n        \"\"\"\n        Saves a passed file to Postgres. The file path is saved in the database, whereas the \n        file is saved on the server/file system in the directory passed into save_to parameter.\n\n        Args:\n            conn : DB connection object for postgres and to be used to perform operations on DB.\n            file_path : path of th", "metrics": {"lines_of_code": 47, "complexity": 4, "num_parameters": 6, "num_returns": 0, "num_branches": 2, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 2}}
{"id": "3ca3606800f87d6bb7eb8d36bdbb0a97d7d6e762", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "9066e75d61a835813676890692c5638cf3d0b87c", "type": "Parameter", "name": "conn", "param_type": "psycopg2.extensions.connection", "kind": "positional", "default": null, "position": 1}
{"id": "72edacc2b454961725e28dcbe893cdcbeb3d39d0", "type": "Parameter", "name": "file_path", "param_type": "str", "kind": "positional", "default": null, "position": 2}
{"id": "10e2ff5449c8c58e1f60a36cd5f241869f80a4f8", "type": "Parameter", "name": "table_name", "param_type": "str", "kind": "positional", "default": null, "position": 3}
{"id": "2091490cd496df0b29e842498e95c4d63e534ceb", "type": "Parameter", "name": "col_name", "param_type": "str", "kind": "positional", "default": null, "position": 4}
{"id": "dbebb314edf11bfe8b7248861f3b9b6780cf33aa", "type": "Parameter", "name": "save_to", "param_type": null, "kind": "positional", "default": "'media'", "position": 5}
{"id": "207cc5278e3f5eb049d0eb43c5c480c888467ab5", "type": "Variable", "name": "conn", "value": "self.connection()", "value_type": "complex", "lineno": 49, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "83c6a4a0ba8d6f9c6a63e4ba092be8c7c14c1f6c", "type": "Variable", "name": "cursor", "value": "conn.cursor()", "value_type": "complex", "lineno": 50, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "193e0589900ea0315e4f72fc14de3766f6d33dbe", "type": "Variable", "name": "file_name", "value": "file_path.split('/').pop()", "value_type": "complex", "lineno": 53, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "1eeaea02ab0741597581f44d8628a72fa86eb929", "type": "Variable", "name": "file_location", "value": "os.path.join(f'{save_to}', file_name)", "value_type": "complex", "lineno": 56, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "b8582a494622f03f877884d9ad606ff191c7de9a", "type": "Variable", "name": "files_on_the_server", "value": "get_files(file_dir=save_to)", "value_type": "complex", "lineno": 59, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "bdde25cfef62fedeb8a50abc7e325e3d1cabd6bd", "type": "Method", "name": "get_all_file_paths", "qualified_name": "DBOps.get_all_file_paths", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "conn", "type": "psycopg2.extensions.connection", "kind": "positional", "default": null, "position": 1}, {"name": "table_name", "type": "str", "kind": "positional", "default": null, "position": 2}, {"name": "file_path_col", "type": "str", "kind": "positional", "default": null, "position": 3}, {"name": "loaded_flag", "type": "bool", "kind": "positional", "default": "False", "position": 4}, {"name": "file_status_col", "type": "str", "kind": "positional", "default": "''", "position": 5}], "return_type": "List[str]", "lineno": 81, "end_lineno": 134, "docstring": "Reads all the file paths in the database and return these paths as a list\n\nArgs:\n    conn : DB connection object for postgres and to be used to perform operations on DB.\n    table_name : name of the table that contains file information in the database.\n    col_name : name of the columns. First contains file paths. Second contains information about the file being already loaded.\n    loaded_flag : Boolean value. Default is False. If False, then the method loads only those files that do not have status LOADED set in the Database. \n                  If True, loads all files irrespective of the loaded status.\n    file_status_col : The colum that contains the LOADED status of the file stored on the server file system.\nReturns:\n    List of file paths of the files stored on the server/file system", "snippet": "    def get_all_file_paths(self, conn : psycopg2.extensions.connection, table_name : str, file_path_col : str, loaded_flag : bool = False, file_status_col : str = \"\") -> List[str]:\n        \"\"\"\n        Reads all the file paths in the database and return these paths as a list\n        \n        Args:\n            conn : DB connection object for postgres and to be used to perform operations on DB.\n            table_name : name of the table that contains file information in the database.\n            co", "metrics": {"lines_of_code": 54, "complexity": 6, "num_parameters": 6, "num_returns": 2, "num_branches": 4, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 3}}
{"id": "8fde2c9f4d767100d70ee2241c0d1ee929e0cf08", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "5173fc7f812d877803879effbbece959b2f68855", "type": "Parameter", "name": "conn", "param_type": "psycopg2.extensions.connection", "kind": "positional", "default": null, "position": 1}
{"id": "88920b0d26e24eb32636d0bca5cabb97f31fd88d", "type": "Parameter", "name": "table_name", "param_type": "str", "kind": "positional", "default": null, "position": 2}
{"id": "2f59171bee3bd7d8a2dce7a8aa45952a8f0fa544", "type": "Parameter", "name": "file_path_col", "param_type": "str", "kind": "positional", "default": null, "position": 3}
{"id": "65476296be0ff86934e7da40d54c403268e3e0e8", "type": "Parameter", "name": "loaded_flag", "param_type": "bool", "kind": "positional", "default": "False", "position": 4}
{"id": "bedbaef46c84951030066bb9d0c44323050ff401", "type": "Parameter", "name": "file_status_col", "param_type": "str", "kind": "positional", "default": "''", "position": 5}
{"id": "a8c514200f5dd25f7fb831de410a0a4db94cdb58", "type": "Variable", "name": "conn", "value": "self.connection()", "value_type": "complex", "lineno": 100, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "c5b4d8466a1098f81a53f8238ca5e92c5853713a", "type": "Variable", "name": "cursor", "value": "conn.cursor()", "value_type": "complex", "lineno": 101, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "c1ecacb6d5721a783d3daca1d793409e3ec7cfed", "type": "Variable", "name": "records", "value": "cursor.fetchall()", "value_type": "complex", "lineno": 105, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "8b6f9d36f321e777f37e7127401510abe2afee03", "type": "Variable", "name": "conn", "value": "self.connection()", "value_type": "complex", "lineno": 115, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "44178a045860ee627291dc51324a12fa246f455b", "type": "Variable", "name": "cursor", "value": "conn.cursor()", "value_type": "complex", "lineno": 116, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "08cf31a55dada345518cdd98c605176eb4e6252a", "type": "Variable", "name": "records", "value": "cursor.fetchall()", "value_type": "complex", "lineno": 120, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "0e59fe374a5790312c81c7de1217fb6c65b0698d", "type": "Method", "name": "update_file_status", "qualified_name": "DBOps.update_file_status", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "conn", "type": "psycopg2.extensions.connection", "kind": "positional", "default": null, "position": 1}, {"name": "file_paths", "type": "List[str]", "kind": "positional", "default": null, "position": 2}, {"name": "table_name", "type": "str", "kind": "positional", "default": null, "position": 3}, {"name": "file_path_col", "type": "str", "kind": "positional", "default": null, "position": 4}, {"name": "file_status_col", "type": "str", "kind": "positional", "default": null, "position": 5}], "return_type": "None", "lineno": 137, "end_lineno": 170, "docstring": "Updates status of the passed files to 'LOADED' in the database.\n\nArgs:\n    conn : DB connection object for postgres and to be used to perform operations on DB.\n    file_paths : A list of file paths as stored in the database.\n    table_name : name of the table in the DB that contains the file info.\n    file_path_col : name of the column that contains file paths of the files on the server in this table.\n    file_status_col : The colum that contains the LOADED status of the file stored on the server file system.\nReturns:\n    None", "snippet": "    def update_file_status(self, conn : psycopg2.extensions.connection, file_paths : List[str], table_name : str, file_path_col : str, file_status_col : str) -> None:\n        \"\"\"\n        Updates status of the passed files to 'LOADED' in the database.\n\n        Args:\n            conn : DB connection object for postgres and to be used to perform operations on DB.\n            file_paths : A list of file paths as stored in the database.\n            table_name : name of the table in the DB that contai", "metrics": {"lines_of_code": 34, "complexity": 5, "num_parameters": 6, "num_returns": 0, "num_branches": 2, "num_loops": 1, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 2}}
{"id": "221dbf44697ac1f2ab1e9eda2f302ad539b479d7", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "780b3a6be8dfb20eb40b3da6132191178af1cdf3", "type": "Parameter", "name": "conn", "param_type": "psycopg2.extensions.connection", "kind": "positional", "default": null, "position": 1}
{"id": "35482308643810e1728323d8941fb74ada21ae1b", "type": "Parameter", "name": "file_paths", "param_type": "List[str]", "kind": "positional", "default": null, "position": 2}
{"id": "a0c8d4a8b35c0a85a7196976278993bfbf1e3c5d", "type": "Parameter", "name": "table_name", "param_type": "str", "kind": "positional", "default": null, "position": 3}
{"id": "90f1bf1949a76015eb279f9782ca15d5bd0d4bf8", "type": "Parameter", "name": "file_path_col", "param_type": "str", "kind": "positional", "default": null, "position": 4}
{"id": "f1b49f9518085ed8a2172425e34b660fe2e4c1f3", "type": "Parameter", "name": "file_status_col", "param_type": "str", "kind": "positional", "default": null, "position": 5}
{"id": "752b2547f1b84cbc6bbf61522523544f8855c7cf", "type": "Variable", "name": "conn", "value": "self.connection()", "value_type": "complex", "lineno": 152, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "55537ef74ef93f17d60c15e59fe5577b6b202c79", "type": "Variable", "name": "cursor", "value": "conn.cursor()", "value_type": "complex", "lineno": 153, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "766122de8d501cae9d205c53c6985150ce285274", "type": "Variable", "name": "sql", "value": "f\"UPDATE {table_name} SET {file_status_col} = 'LOADED' WHERE {file_path_col} = %s\"", "value_type": "complex", "lineno": 157, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "084836cc77d560e84cf9407b00d2bc20fa262f68", "type": "Method", "name": "delete_file", "qualified_name": "DBOps.delete_file", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "file_name", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "table_name", "type": "str", "kind": "positional", "default": null, "position": 2}, {"name": "file_path_col", "type": "str", "kind": "positional", "default": null, "position": 3}], "return_type": "None", "lineno": 173, "end_lineno": 232, "docstring": "Deletes the file from database and the server file system.\nThe file path is searched in the database against the file_name passed as argument. \nIf found, then it is deleted first from the server then from the database table. \n\nArgs:\n    conn : DB connection object for postgres and to be used to perform operations on DB.\n    file_name : the name (not complete path) of the file to be deleted from the database.\n    table_name : name of the table in the DB that contains the file info.\n    file_path_col : name of the column that contains file paths of the files on the server in this table.\nReturns:\n    None", "snippet": "    def delete_file(self, file_name : str, table_name : str, file_path_col : str) -> None:\n        \"\"\"\n        Deletes the file from database and the server file system.\n        The file path is searched in the database against the file_name passed as argument. \n        If found, then it is deleted first from the server then from the database table. \n        \n        Args:\n            conn : DB connection object for postgres and to be used to perform operations on DB.\n            file_name : the", "metrics": {"lines_of_code": 60, "complexity": 7, "num_parameters": 4, "num_returns": 0, "num_branches": 3, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 3}}
{"id": "356e938c189c468908e5b0c811d38d07f8e3bdd3", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "592f5fca72d97cf0176adc094a44c0829f555f9e", "type": "Parameter", "name": "file_name", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "352ad8876a6799b490f1939ef95c472276c9f7a5", "type": "Parameter", "name": "table_name", "param_type": "str", "kind": "positional", "default": null, "position": 2}
{"id": "9ce58a0a1d82f1686e96c09a72e07122666cfc21", "type": "Parameter", "name": "file_path_col", "param_type": "str", "kind": "positional", "default": null, "position": 3}
{"id": "2c2e5aab988e744dd5695616e746221c0eb2e0f8", "type": "Variable", "name": "conn", "value": "self.connection()", "value_type": "complex", "lineno": 190, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "08afd26840aadac31603c16adba578aaeab81a1e", "type": "Variable", "name": "file_paths", "value": "self.get_all_file_paths(conn=conn, table_name=table_name, file_path_col=file_path_col, loaded_flag=True)", "value_type": "complex", "lineno": 191, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "b68aa49331094096fbce82295fe94722f495654b", "type": "Variable", "name": "file_paths", "value": "[path[0] for path in file_paths]", "value_type": "complex", "lineno": 192, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "ebfb7f9c8c85085e628b0e35a45c3070fc18b6fc", "type": "Variable", "name": "file_names", "value": "[path.split('/').pop() for path in file_paths]", "value_type": "complex", "lineno": 193, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "b3dd474a0fb62bb3c1757b2c9a08a704d08f7bb1", "type": "Variable", "name": "file_index", "value": "file_names.index(file_name)", "value_type": "complex", "lineno": 197, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "19af505cb57487f0590e48388f14255d1d8d06e0", "type": "Variable", "name": "file", "value": "file_paths[file_index]", "value_type": "complex", "lineno": 198, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "72840229e3d40654795c44381a4460108960381d", "type": "Variable", "name": "conn", "value": "self.connection()", "value_type": "complex", "lineno": 213, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "c0004d2912cc5425444f0aa5bbc45314bef164ee", "type": "Variable", "name": "cursor", "value": "conn.cursor()", "value_type": "complex", "lineno": 214, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "8491967221a6f88345162199de936e35736c4c46", "type": "Variable", "name": "sql", "value": "f'DELETE FROM {table_name} WHERE {file_path_col} = %s'", "value_type": "complex", "lineno": 215, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "f5ec50cf5c50ad284697670e12553f3e81bc4ccc", "type": "File", "name": "retrieve.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/retrieve.py", "relpath": "src/components/retrieve.py", "module": "src.components.retrieve", "extension": ".py", "sha1": "adebf10c7f74d5c091c6c750d8aa76b88f31d2c9", "lines_of_code": 141, "size_bytes": 6177, "language": "python", "encoding": "utf-8"}
{"id": "e5b8d016244639a02f52934f6c8e5bb492ebcfde", "type": "Import", "name": "BaseRetriever", "module": "langchain.schema", "full_name": "langchain.schema.BaseRetriever", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 2, "is_stdlib": false}
{"id": "675c1684d228c48c80c1db805f13fbbede84cc53", "type": "Import", "name": "Chroma", "module": "langchain_community.vectorstores.chroma", "full_name": "langchain_community.vectorstores.chroma.Chroma", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 3, "is_stdlib": false}
{"id": "0bc837eb4b2faec83697e0e4c74d17ed2620998d", "type": "Import", "name": "ContextualCompressionRetriever", "module": "langchain.retrievers", "full_name": "langchain.retrievers.ContextualCompressionRetriever", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 4, "is_stdlib": false}
{"id": "cd4940d43a66a3733c0e822603f1132be32113e5", "type": "Import", "name": "EmbeddingsFilter", "module": "langchain.retrievers.document_compressors", "full_name": "langchain.retrievers.document_compressors.EmbeddingsFilter", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 5, "is_stdlib": false}
{"id": "90e6c484f2f55212596e696de492943251860d37", "type": "Import", "name": "OpenAIEmbeddings", "module": "langchain_openai", "full_name": "langchain_openai.OpenAIEmbeddings", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 6, "is_stdlib": false}
{"id": "a306ce4dd2dced11094fabe462f2f920c384ecfc", "type": "Import", "name": "SelfQueryRetriever", "module": "langchain.retrievers.self_query.base", "full_name": "langchain.retrievers.self_query.base.SelfQueryRetriever", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 7, "is_stdlib": false}
{"id": "12aba59512d110bab501e7e0f3726fc76de4178a", "type": "Import", "name": "ChatOpenAI", "module": "langchain_openai", "full_name": "langchain_openai.ChatOpenAI", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 8, "is_stdlib": false}
{"id": "bf4c95083226682726901e5d6b0d3497e355a53a", "type": "Import", "name": "ParentDocumentRetriever", "module": "langchain.retrievers", "full_name": "langchain.retrievers.ParentDocumentRetriever", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 9, "is_stdlib": false}
{"id": "63d476b54a330e2d352375cead9b382fee175c85", "type": "Import", "name": "RecursiveCharacterTextSplitter", "module": "langchain_text_splitters", "full_name": "langchain_text_splitters.RecursiveCharacterTextSplitter", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 10, "is_stdlib": false}
{"id": "4b5103278be18696a076b44b14f7c4164371909e", "type": "Import", "name": "AttributeInfo", "module": "langchain.chains.query_constructor.schema", "full_name": "langchain.chains.query_constructor.schema.AttributeInfo", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 11, "is_stdlib": false}
{"id": "c559a6299ff66eb379c8a4977c34233e12f30602", "type": "Import", "name": "List", "module": "typing", "full_name": "typing.List", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 12, "is_stdlib": true}
{"id": "a2e96113a34bc464e8d9c008a657f5eba28eeecc", "type": "Import", "name": "Sequence", "module": "typing", "full_name": "typing.Sequence", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 12, "is_stdlib": true}
{"id": "7342def290c72513f8e9a855f3b72181562ba942", "type": "Import", "name": "Optional", "module": "typing", "full_name": "typing.Optional", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 12, "is_stdlib": true}
{"id": "6b0d3af1f0c3730d44993126f3a9bbcc8a82df00", "type": "Import", "name": "chromadb", "alias": null, "import_type": "direct", "lineno": 13, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "90e82c082901c8f16e753657d9598dc1e8545c38", "type": "Class", "name": "Retriever", "lineno": 15, "end_lineno": 141, "docstring": "Contains different retrieving methods", "snippet": "class Retriever:\n    \"\"\"\n    Contains different retrieving methods\n    \"\"\"\n    @staticmethod\n    def retrieve(\n        self,\n        chroma_client: chromadb.Client,\n        collection_name: str,\n        embeddings = OpenAIEmbeddings(),\n...", "bases": [], "decorators": [], "num_methods": 3, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "93709b87a62fc906b1a9c7662e318817b8227120", "type": "Decorator", "name": "staticmethod", "lineno": 19, "args": [], "kwargs": {}}
{"id": "4a2ce783a436822b971ae4dbc57b3ee61b4c0b10", "type": "Method", "name": "retrieve", "qualified_name": "Retriever.retrieve", "is_async": false, "is_method": true, "is_static": true, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": ["staticmethod"], "decorator_details": [{"name": "staticmethod", "args": [], "kwargs": {}}], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "chroma_client", "type": "chromadb.Client", "kind": "positional", "default": null, "position": 1}, {"name": "collection_name", "type": "str", "kind": "positional", "default": null, "position": 2}, {"name": "embeddings", "type": null, "kind": "positional", "default": "OpenAIEmbeddings()", "position": 3}, {"name": "use_compression", "type": "bool", "kind": "positional", "default": "False", "position": 4}], "return_type": "BaseRetriever", "lineno": 20, "end_lineno": 61, "docstring": "A vectorstore Baseretriever with efficient compression : EmbeddigsFilter   \n\nArgs:\n    chroma_client (chromadb.Client): Chroma client to make connection to the Chroma DB\n    collection_name (str): Name of the collection inside the Chroma DB\n    embeddings (_type_, optional): Embedding function passed which is used to initialize the Chroma instance. Defaults to OpenAIEmbeddings().\n    use_compression (bool, optional): Another layer on top of basic retriever to compress the retrieved documents. Defaults to False.\n\nReturns:\n    BaseRetriever: Return the Base Retriever", "snippet": "    def retrieve(\n        self,\n        chroma_client: chromadb.Client,\n        collection_name: str,\n        embeddings = OpenAIEmbeddings(),\n        use_compression: bool = False,\n        \n    ) -> BaseRetriever:\n        \"\"\"A vectorstore Baseretriever with efficient compression : EmbeddigsFilter   \n\n...", "metrics": {"lines_of_code": 42, "complexity": 2, "num_parameters": 5, "num_returns": 2, "num_branches": 1, "num_loops": 0, "has_docstring": true, "num_decorators": 1, "max_nesting_depth": 1}}
{"id": "7acf544955e9ebe1686a443f730e19af30378ac0", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "a788a9fb2c55b4e2b62dfee426ce57d97782576c", "type": "Parameter", "name": "chroma_client", "param_type": "chromadb.Client", "kind": "positional", "default": null, "position": 1}
{"id": "e0cdf81f7cdbcd494480e1b9a493cfbbe34ff2ac", "type": "Parameter", "name": "collection_name", "param_type": "str", "kind": "positional", "default": null, "position": 2}
{"id": "c2db44e1717f95d6245e44fdf2bf997dcef233c5", "type": "Parameter", "name": "embeddings", "param_type": null, "kind": "positional", "default": "OpenAIEmbeddings()", "position": 3}
{"id": "6441ba98cff5f8e0ab60de2bc58fc3b996f8dd21", "type": "Parameter", "name": "use_compression", "param_type": "bool", "kind": "positional", "default": "False", "position": 4}
{"id": "b316679f6327e659268a84df9d861e61bb26a4a3", "type": "Variable", "name": "vectorstore", "value": "Chroma(client=chroma_client, collection_name=collection_name, embedding_function=embeddings)", "value_type": "complex", "lineno": 40, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "1265a3fd01dbafdd122ac919caf807ea9969e576", "type": "Variable", "name": "chroma_retriever", "value": "vectorstore.as_retriever(search_type='mmr', search_kwargs={'k': 7, 'lambda_mult': 0.4, 'include_metadata': True})", "value_type": "complex", "lineno": 46, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "5b1d7559b24b610ac30b97f7fc7eca30d4589998", "type": "Variable", "name": "embeddings_filter", "value": "EmbeddingsFilter(embeddings=embeddings, similarity_threshold=0.2)", "value_type": "complex", "lineno": 60, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "8f1603b38db474122d2170acfaa71f6dd2ab3d7c", "type": "Decorator", "name": "staticmethod", "lineno": 63, "args": [], "kwargs": {}}
{"id": "758ab9d2384738884caa68cd84ed9f1e4dcb3cdb", "type": "Method", "name": "self_query_retriever", "qualified_name": "Retriever.self_query_retriever", "is_async": false, "is_method": true, "is_static": true, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": ["staticmethod"], "decorator_details": [{"name": "staticmethod", "args": [], "kwargs": {}}], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "collection_name", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "chroma_client", "type": "chromadb.Client", "kind": "positional", "default": null, "position": 2}, {"name": "document_content_description", "type": "str", "kind": "positional", "default": null, "position": 3}, {"name": "metadata_field_info", "type": "List[AttributeInfo]", "kind": "positional", "default": null, "position": 4}, {"name": "embeddings", "type": null, "kind": "positional", "default": "OpenAIEmbeddings()", "position": 5}], "return_type": "BaseRetriever", "lineno": 64, "end_lineno": 96, "docstring": "Self Query retriever is used which retrieve the documents first on Metadata then return return the document \n\nArgs:\n    collection_name (str): Name of the collection inside the Chroma DB\n    chroma_client (chromadb.Client): Chroma client to make connection to the Chroma DB\n    document_content_description (str): Brief description of the document that will be used to search on metadata \n    metadata_field_info (List[AttributeInfo]): Information about each attribute of the Metadata field associated with each document\n    embeddings (_type_, optional): Embedding function passed which is used to initialize the Chroma instance. Defaults to OpenAIEmbeddings().\n\nReturns:\n    BaseRetriever: Return the instance of Self Query retriever", "snippet": "    def self_query_retriever(\n        self,\n        collection_name: str,\n        chroma_client: chromadb.Client,\n        document_content_description: str,\n        metadata_field_info: List[AttributeInfo],\n        embeddings = OpenAIEmbeddings(),\n    ) -> BaseRetriever:\n        \"\"\"Self Query retriever is used which retrieve the documents first on Metadata then return return the document \n\n...", "metrics": {"lines_of_code": 33, "complexity": 1, "num_parameters": 6, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 1, "max_nesting_depth": 0}}
{"id": "034c7c6da44366a38357504e68da5b60dcff2b2c", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "57d85798c1cc81196ff9d145b67461829caab2e4", "type": "Parameter", "name": "collection_name", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "85d4db6c82f8f432fb5d7f391f14b10dea4d686f", "type": "Parameter", "name": "chroma_client", "param_type": "chromadb.Client", "kind": "positional", "default": null, "position": 2}
{"id": "d472c408d2886e9868653c25584886a3dc8cc11f", "type": "Parameter", "name": "document_content_description", "param_type": "str", "kind": "positional", "default": null, "position": 3}
{"id": "e30beb3a7e37d87b5674fd9b708870b8fe2d5214", "type": "Parameter", "name": "metadata_field_info", "param_type": "List[AttributeInfo]", "kind": "positional", "default": null, "position": 4}
{"id": "2ed1c2b34d2cc395f35bd2a0bc504a25b4c8711f", "type": "Parameter", "name": "embeddings", "param_type": null, "kind": "positional", "default": "OpenAIEmbeddings()", "position": 5}
{"id": "994cb3c34457faf9e4c9d43fa6692cb7156cc781", "type": "Variable", "name": "vectorstore", "value": "Chroma(client=chroma_client, collection_name=collection_name, embedding_function=embeddings)", "value_type": "complex", "lineno": 84, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "3de6ba081f9c8326eab65eaf0a3c756049b77307", "type": "Decorator", "name": "staticmethod", "lineno": 98, "args": [], "kwargs": {}}
{"id": "710098753184543213daf316b15e12c00906a37e", "type": "Method", "name": "parent_child_retriever", "qualified_name": "Retriever.parent_child_retriever", "is_async": false, "is_method": true, "is_static": true, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": ["staticmethod"], "decorator_details": [{"name": "staticmethod", "args": [], "kwargs": {}}], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "store", "type": null, "kind": "positional", "default": null, "position": 1}, {"name": "chroma_client", "type": "chromadb.Client", "kind": "positional", "default": null, "position": 2}, {"name": "collection_name", "type": "str", "kind": "positional", "default": null, "position": 3}, {"name": "child_metadata_fields", "type": "Optional[Sequence[str]]", "kind": "positional", "default": "None", "position": 4}, {"name": "embeddings", "type": null, "kind": "positional", "default": "OpenAIEmbeddings()", "position": 5}], "return_type": "BaseRetriever", "lineno": 99, "end_lineno": 141, "docstring": "ParentDocumentRetriever first fetch on small documents then return the parent docs.\nretriever.add_documents(docs) # should be used to add documents on VectorDB\n\nArgs:\n    store (_type_): Store for storing the indexes of links created between parent and child documents\n    collection_name (str): Name of the collection inside the Chroma DB\n    chroma_client (chromadb.Client): Chroma client to make connection to the Chroma DB\n    child_metadata_fields (Optional[Sequence[str]], optional): Name of the fields that are present in the Parent documents and you want to copy them inside the child retriever. Defaults to None.\n    embeddings (_type_, optional): Embedding function passed which is used to initialize the Chroma instance. Defaults to OpenAIEmbeddings().\n\nReturns:\n    BaseRetriever: Instance of the ParentDocumentRetriever is returned", "snippet": "    def parent_child_retriever(\n        self,\n        store,\n        chroma_client: chromadb.Client,\n        collection_name: str,\n        child_metadata_fields: Optional[Sequence[str]] = None,\n        embeddings = OpenAIEmbeddings(),\n    ) -> BaseRetriever:\n        \"\"\"ParentDocumentRetriever first fetch on small documents then return the parent docs.\n        retriever.add_documents(docs) # should be used to add documents on VectorDB\n...", "metrics": {"lines_of_code": 43, "complexity": 1, "num_parameters": 6, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 1, "max_nesting_depth": 0}}
{"id": "e626d43e6eeb8dbb1345f01e2ab8b8fa199c42a5", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "777f8c80ee134f6cc83add931f4abc4e8f7fef3b", "type": "Parameter", "name": "store", "param_type": null, "kind": "positional", "default": null, "position": 1}
{"id": "a9604b5ffa41560ddd294126910972a2d8b70e03", "type": "Parameter", "name": "chroma_client", "param_type": "chromadb.Client", "kind": "positional", "default": null, "position": 2}
{"id": "b3e0420ea94d79faa01a903ed35bf0a23c75721e", "type": "Parameter", "name": "collection_name", "param_type": "str", "kind": "positional", "default": null, "position": 3}
{"id": "3c2a8bfd356fcd8a11b496d34eaab61c7e1717f3", "type": "Parameter", "name": "child_metadata_fields", "param_type": "Optional[Sequence[str]]", "kind": "positional", "default": "None", "position": 4}
{"id": "3430edee68239415b2824ece3a15327fcb0ef059", "type": "Parameter", "name": "embeddings", "param_type": null, "kind": "positional", "default": "OpenAIEmbeddings()", "position": 5}
{"id": "62627ae4a8c650e5681454278bd9caf201afcdca", "type": "Variable", "name": "vectorstore", "value": "Chroma(client=chroma_client, collection_name=collection_name, embedding_function=embeddings)", "value_type": "complex", "lineno": 120, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "05e2b1975898dd14edde81567a53dcc965831ede", "type": "Variable", "name": "parent_splitter", "value": "RecursiveCharacterTextSplitter(chunk_size=25000)", "value_type": "complex", "lineno": 129, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "0d0a0f2bc505a47b786ee8d5acb87910a68c5c51", "type": "Variable", "name": "child_splitter", "value": "RecursiveCharacterTextSplitter(chunk_size=5000)", "value_type": "complex", "lineno": 130, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "cab67214cc6aa720b27ac21bdce51c1c34ad3667", "type": "Variable", "name": "store", "value": "store", "value_type": "complex", "lineno": 133, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "7b855fb47f4976ff2acc5370725aa74debd0e109", "type": "File", "name": "memory.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/memory.py", "relpath": "src/components/memory.py", "module": "src.components.memory", "extension": ".py", "sha1": "ae3f2ab4c8feb697397ea8793a6581058ef02835", "lines_of_code": 109, "size_bytes": 4287, "language": "python", "encoding": "utf-8"}
{"id": "7c067b0c8b4dea325a936d83a848a130ae157666", "type": "Import", "name": "OpenAI", "module": "langchain_openai", "full_name": "langchain_openai.OpenAI", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 2, "is_stdlib": false}
{"id": "efca1651e25cfe939228f92a503ed91dc20691cf", "type": "Import", "name": "BaseChatMessageHistory", "module": "langchain_core.chat_history", "full_name": "langchain_core.chat_history.BaseChatMessageHistory", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 3, "is_stdlib": false}
{"id": "3651b1c1b0922f49a702deee17ec7d3283debbdb", "type": "Import", "name": "BaseChatMemory", "module": "langchain.memory.chat_memory", "full_name": "langchain.memory.chat_memory.BaseChatMemory", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 4, "is_stdlib": false}
{"id": "926c2c199b28f95e1d09c8cbd7254fbc0b212d31", "type": "Import", "name": "ConversationBufferMemory", "module": "langchain.memory.buffer", "full_name": "langchain.memory.buffer.ConversationBufferMemory", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 5, "is_stdlib": false}
{"id": "2965e9837cf664b7a6b236e60fe38ef44e7bb6c0", "type": "Import", "name": "ConversationBufferWindowMemory", "module": "langchain.memory.buffer_window", "full_name": "langchain.memory.buffer_window.ConversationBufferWindowMemory", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 6, "is_stdlib": false}
{"id": "24d4aa71ac07c54b0de348e0f677615caf0ee9db", "type": "Import", "name": "ConversationSummaryMemory", "module": "langchain.memory", "full_name": "langchain.memory.ConversationSummaryMemory", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 7, "is_stdlib": false}
{"id": "6812ffb05c5cfc3744ac98f2a1475309086d8b89", "type": "Import", "name": "ConversationSummaryBufferMemory", "module": "langchain.memory", "full_name": "langchain.memory.ConversationSummaryBufferMemory", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 7, "is_stdlib": false}
{"id": "60972ec1fe739b032ac013c7ed4c59e4e092f988", "type": "Import", "name": "os", "alias": null, "import_type": "direct", "lineno": 8, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "f591cd97249ee8820ae004a542176ba6cbf4e3d1", "type": "Import", "name": "load_dotenv", "module": "dotenv", "full_name": "dotenv.load_dotenv", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 9, "is_stdlib": false}
{"id": "636d7b541d2baa25dcf9710d3aa539008dc6ddef", "type": "Import", "name": "HuggingFacePipeline", "module": "langchain_community.llms.huggingface_pipeline", "full_name": "langchain_community.llms.huggingface_pipeline.HuggingFacePipeline", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 10, "is_stdlib": false}
{"id": "59e4e6a6eb9b8259c8a5254276b8dc0a3d442fc6", "type": "Import", "name": "AutoModelForCausalLM", "module": "transformers", "full_name": "transformers.AutoModelForCausalLM", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 11, "is_stdlib": false}
{"id": "236957639d161f1c29c9f2ba924295a1e60cece9", "type": "Import", "name": "AutoTokenizer", "module": "transformers", "full_name": "transformers.AutoTokenizer", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 11, "is_stdlib": false}
{"id": "dd9faa9e1702b494592164a94d3325e769c286d9", "type": "Import", "name": "pipeline", "module": "transformers", "full_name": "transformers.pipeline", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 11, "is_stdlib": false}
{"id": "1e66643e5028455a6e8237d6109479a77f07b244", "type": "Class", "name": "ChatMemory", "lineno": 13, "end_lineno": 109, "docstring": "Contains methods for different memory options.\n- Conversation Buffer Memory\n- Conversation Buffer Window Memory\n- Conversation Summary Memory\n- Conversation Summary Window Memory\n- Conversation KG Memory\n- Entity Memory : backed by a database ", "snippet": "class ChatMemory:\n    \"\"\"\n    Contains methods for different memory options.\n    - Conversation Buffer Memory\n    - Conversation Buffer Window Memory\n    - Conversation Summary Memory\n    - Conversation Summary Window Memory\n    - Conversation KG Memory\n    - Entity Memory : backed by a database \n    \"\"\"\n...", "bases": [], "decorators": [], "num_methods": 4, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "50d3f3dffd28dc2edd919412506b38d22da4deff", "type": "Decorator", "name": "staticmethod", "lineno": 24, "args": [], "kwargs": {}}
{"id": "b350b2f8019392092c81ca612b57e5380eda7a3a", "type": "Method", "name": "init_conv_buf_memory", "qualified_name": "ChatMemory.init_conv_buf_memory", "is_async": false, "is_method": true, "is_static": true, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": ["staticmethod"], "decorator_details": [{"name": "staticmethod", "args": [], "kwargs": {}}], "parameters": [], "return_type": "BaseChatMemory", "lineno": 25, "end_lineno": 37, "docstring": "Initialize the memory for contextual conversation.\nWe are caching this, so it won't be deleted every time, we restart the server.\n\nReturns:\n    BaseChatMemory: Return the chat history", "snippet": "    def init_conv_buf_memory() -> BaseChatMemory:\n        \"\"\"\n        Initialize the memory for contextual conversation.\n        We are caching this, so it won't be deleted every time, we restart the server.\n\n        Returns:\n            BaseChatMemory: Return the chat history\n        \"\"\"\n        return ConversationBufferMemory(\n            memory_key='chat_history',\n...", "metrics": {"lines_of_code": 13, "complexity": 1, "num_parameters": 0, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 1, "max_nesting_depth": 0}}
{"id": "7011b56bcfbc384af1366c33eac39659a930e45b", "type": "Decorator", "name": "staticmethod", "lineno": 39, "args": [], "kwargs": {}}
{"id": "b737d502a31b740b1117c22f7292db3adc03cd8c", "type": "Method", "name": "init_conv_buf_wind_memory", "qualified_name": "ChatMemory.init_conv_buf_wind_memory", "is_async": false, "is_method": true, "is_static": true, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": ["staticmethod"], "decorator_details": [{"name": "staticmethod", "args": [], "kwargs": {}}], "parameters": [{"name": "cls", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "k", "type": "int", "kind": "positional", "default": "5", "position": 1}], "return_type": "BaseChatMemory", "lineno": 40, "end_lineno": 56, "docstring": "Takes into account only the last `k` interactions with LLM.\ne.g. if k = 5 it takes last 5 messages with the LLM.\n\nArgs:\n    k (int, optional): Only last k interaction are considered. Defaults to 5.\n\nReturns:\n    BaseChatMemory: Return the last k interaction as chat history", "snippet": "    def init_conv_buf_wind_memory(cls, k: int = 5) -> BaseChatMemory:\n        \"\"\"\n        Takes into account only the last `k` interactions with LLM.\n        e.g. if k = 5 it takes last 5 messages with the LLM.\n\n        Args:\n            k (int, optional): Only last k interaction are considered. Defaults to 5.\n\n        Returns:\n            BaseChatMemory: Return the last k interaction as chat history\n...", "metrics": {"lines_of_code": 17, "complexity": 1, "num_parameters": 2, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 1, "max_nesting_depth": 0}}
{"id": "7814e9dfe3e2e32d1a38c379d9bf2eeef8db5f7a", "type": "Parameter", "name": "cls", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "78000fef9438ed3cdb2b050fc4d7192829fd156e", "type": "Parameter", "name": "k", "param_type": "int", "kind": "positional", "default": "5", "position": 1}
{"id": "2075839852f157268c960038e3bda3c1f7724b27", "type": "Decorator", "name": "staticmethod", "lineno": 58, "args": [], "kwargs": {}}
{"id": "81991bbfe2800b7be14936dc779ddfb5ba5ff989", "type": "Method", "name": "init_conv_summary_memory", "qualified_name": "ChatMemory.init_conv_summary_memory", "is_async": false, "is_method": true, "is_static": true, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": ["staticmethod"], "decorator_details": [{"name": "staticmethod", "args": [], "kwargs": {}}], "parameters": [{"name": "cls", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "chat_memory", "type": "BaseChatMessageHistory", "kind": "positional", "default": "None", "position": 1}], "return_type": "BaseChatMemory", "lineno": 59, "end_lineno": 82, "docstring": "This creates the summary of the conversation over time with each interaction.\nHowever it can utilizes the old chat memory if provided as argument.\nThis function checks for the OPENAI_API_KEY to call the LLM to summarize the conv.\n\nArgs:\n    chat_memory (BaseChatMessageHistory, optional): Previous chat history to be summarized. Defaults to None.\n\nReturns:\n    BaseChatMemory: Returns the summary created", "snippet": "    def init_conv_summary_memory(cls, chat_memory: BaseChatMessageHistory = None) -> BaseChatMemory:\n        \"\"\"\n        This creates the summary of the conversation over time with each interaction.\n        However it can utilizes the old chat memory if provided as argument.\n        This function checks for the OPENAI_API_KEY to call the LLM to summarize the conv.\n\n        Args:\n            chat_memory (BaseChatMessageHistory, optional): Previous chat history to be summarized. Defaults to None.\n", "metrics": {"lines_of_code": 24, "complexity": 1, "num_parameters": 2, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 1, "max_nesting_depth": 0}}
{"id": "152db5a3f0a5b6d78c681839d2a5d144164c76aa", "type": "Parameter", "name": "cls", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "8ef0965c9084939c172dcada5fd1da072991b44e", "type": "Parameter", "name": "chat_memory", "param_type": "BaseChatMessageHistory", "kind": "positional", "default": "None", "position": 1}
{"id": "e6e4c0f5b3905f640cd7d71fecf8d5f2f4f17c8d", "type": "Variable", "name": "model_path", "value": "../../llm/BeenaSamuel/t5_cnn_daily_mail_abstractive_summarizer_v2", "value_type": "str", "lineno": 72, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "01c8976bff524b4c66e73dddc5369d96e8b2980d", "type": "Variable", "name": "pipe", "value": "pipeline('summarization', model=model_path, tokenizer=model_path)", "value_type": "complex", "lineno": 73, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "6d290b31d5102d5454e89232873d8dc2ba350912", "type": "Variable", "name": "hf", "value": "HuggingFacePipeline(pipeline=pipe)", "value_type": "complex", "lineno": 74, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "cdc1fad9ab7461a1585679b3b789efc3c29a6fe6", "type": "Decorator", "name": "staticmethod", "lineno": 84, "args": [], "kwargs": {}}
{"id": "90eaec448e4da44d7eba67e5a519ab3770d6b2d2", "type": "Method", "name": "init_conv_summary_wind_memory", "qualified_name": "ChatMemory.init_conv_summary_wind_memory", "is_async": false, "is_method": true, "is_static": true, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": ["staticmethod"], "decorator_details": [{"name": "staticmethod", "args": [], "kwargs": {}}], "parameters": [{"name": "cls", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "chat_memory", "type": "BaseChatMessageHistory", "kind": "positional", "default": "None", "position": 1}, {"name": "max_token_limit", "type": "int", "kind": "positional", "default": "2000", "position": 2}], "return_type": "BaseChatMemory", "lineno": 85, "end_lineno": 109, "docstring": "Takes into account the max_token_limit provided as argument.\nDefault for the LangChain is 2000 tokens but can be modified.\nThis function checks for the OPENAI_API_KEY to call the LLM to summarize the conv.\n\nArgs:\n    chat_memory (BaseChatMessageHistory, optional): Previous chat history to be summarized. Defaults to None.\n    max_token_limit (int, optional): Provided summary of the history under maximum max_token_limit passed. Defaults to 2000.\n\nReturns:\n    BaseChatMemory: Return the summary created", "snippet": "    def init_conv_summary_wind_memory(cls, chat_memory: BaseChatMessageHistory = None, max_token_limit: int = 2000) -> BaseChatMemory:\n        \"\"\"\n        Takes into account the max_token_limit provided as argument.\n        Default for the LangChain is 2000 tokens but can be modified.\n        This function checks for the OPENAI_API_KEY to call the LLM to summarize the conv.\n\n        Args:\n            chat_memory (BaseChatMessageHistory, optional): Previous chat history to be summarized. Defaults", "metrics": {"lines_of_code": 25, "complexity": 1, "num_parameters": 3, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 1, "max_nesting_depth": 0}}
{"id": "e1c9343946b64993ecc20b064d857b6ed9187100", "type": "Parameter", "name": "cls", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "9f79372de205e62b010ea960ff4e98ea80b3be7c", "type": "Parameter", "name": "chat_memory", "param_type": "BaseChatMessageHistory", "kind": "positional", "default": "None", "position": 1}
{"id": "656839cf8649cc54cefe98060141d3ac438d5d15", "type": "Parameter", "name": "max_token_limit", "param_type": "int", "kind": "positional", "default": "2000", "position": 2}
{"id": "248dde39c3e34770d54a82a5bece9787fbf69c44", "type": "Variable", "name": "model_path", "value": "../../llm/BeenaSamuel/t5_cnn_daily_mail_abstractive_summarizer_v2", "value_type": "str", "lineno": 99, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "43b931c3402eca9944c35024045488a8384a4a02", "type": "Variable", "name": "pipe", "value": "pipeline('summarization', model=model_path, tokenizer=model_path)", "value_type": "complex", "lineno": 100, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "34531b132eed9fdc0576a13e023a77cd905a2222", "type": "Variable", "name": "hf", "value": "HuggingFacePipeline(pipeline=pipe)", "value_type": "complex", "lineno": 101, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "6a0be1e5ad772e6037ce3e981c372ad4069ccf94", "type": "File", "name": "transformer.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/transformer.py", "relpath": "src/components/transformer.py", "module": "src.components.transformer", "extension": ".py", "sha1": "04256d11a496d162c84789e533bd77d534c782fc", "lines_of_code": 68, "size_bytes": 2460, "language": "python", "encoding": "utf-8"}
{"id": "58e74f3f023c4419a1766e86ba55480e5f781351", "type": "Import", "name": "sys", "alias": null, "import_type": "direct", "lineno": 4, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "33df08bdeaae1f5b133e0eb4ec61572a81a7bdf7", "type": "Import", "name": "Union", "module": "typing", "full_name": "typing.Union", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 7, "is_stdlib": true}
{"id": "9520d443218a86b01a3ecddc2d69793e0568a167", "type": "Import", "name": "List", "module": "typing", "full_name": "typing.List", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 7, "is_stdlib": true}
{"id": "7e6dc44fb95bf88c17cc370df039c16600e99511", "type": "Import", "name": "RecursiveCharacterTextSplitter", "module": "langchain.text_splitter", "full_name": "langchain.text_splitter.RecursiveCharacterTextSplitter", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 8, "is_stdlib": false}
{"id": "6fccc710f45a3f7a5ae33c034576c3bd35dba195", "type": "Import", "name": "Document", "module": "langchain_core.documents.base", "full_name": "langchain_core.documents.base.Document", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 9, "is_stdlib": false}
{"id": "ba7774935d5f838fbdc9f6b236f2ecb1a55f3777", "type": "Class", "name": "Transformer", "lineno": 12, "end_lineno": 67, "docstring": "Transforms the loaded file.\nTransforming of documents include different manipulations of the doc such as splitting, chunking,\ncombining, filtering, translating etc.\n\nThis class contains methods pertaining to:\n- Splitting and Chunking\nusing different splitters and chunkers.\n\nArgs:\n    document : list of objects of type : langchain_core.documents.base.Document\n               These objects are returned from  Docx2txtLoader, PyMuPDFLoader, CSVLoader, and TextLoader\n               loaders. Actually these are dictionaries that contain loaded text from the doc and its metadata.", "snippet": "class Transformer:\n    \"\"\"\n    Transforms the loaded file.\n    Transforming of documents include different manipulations of the doc such as splitting, chunking,\n    combining, filtering, translating etc.\n    \n    This class contains methods pertaining to:\n    - Splitting and Chunking\n    using different splitters and chunkers.\n\n...", "bases": [], "decorators": [], "num_methods": 2, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "bfbe2997c779ffcfc68d3d3b8d8d6be2247f151e", "type": "Method", "name": "recursive_char_text_chunker", "qualified_name": "Transformer.recursive_char_text_chunker", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "text", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "chunk_size", "type": "int", "kind": "positional", "default": "100", "position": 2}, {"name": "chunk_overlap", "type": "int", "kind": "positional", "default": "0", "position": 3}], "return_type": "List[str]", "lineno": 28, "end_lineno": 45, "docstring": "        Splits string into chunks and returns a list of chunks.\n        Uses character based chuncking.# Direct to pysqlite3 for chroma compliance\n# Refer to issue https://discuss.streamlit.io/t/issues-with-chroma-and-sqlite/47950\n\n        ", "snippet": "    def recursive_char_text_chunker(\n            self,\n            text : str,\n            chunk_size: int=100,\n            chunk_overlap: int=0\n        ) -> List[str]:\n        \"\"\"\n        Splits string into chunks and returns a list of chunks.\n        Uses character based chuncking.# Direct to pysqlite3 for chroma compliance\n# Refer to issue https://discuss.streamlit.io/t/issues-with-chroma-and-sqlite/47950\n...", "metrics": {"lines_of_code": 18, "complexity": 1, "num_parameters": 4, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 0}}
{"id": "76ab847f1b4d69ef049228eda4432aeb4bb6a6a1", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "5648e4218778cc8f96e236b4ace4610d84d8886f", "type": "Parameter", "name": "text", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "3530f8eafa28497c2a74d582f5d2ec32c7901863", "type": "Parameter", "name": "chunk_size", "param_type": "int", "kind": "positional", "default": "100", "position": 2}
{"id": "3f71f2e453fe68176f757cef6c1d86662dd397c0", "type": "Parameter", "name": "chunk_overlap", "param_type": "int", "kind": "positional", "default": "0", "position": 3}
{"id": "9e5518ff997105c08d90b276e563561f55144b1f", "type": "Variable", "name": "text_splitter", "value": "RecursiveCharacterTextSplitter(chunk_size=chunk_size, chunk_overlap=chunk_overlap, length_function=len)", "value_type": "complex", "lineno": 40, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "d16b80d7628453332c5b2eb8644446e7c69394a8", "type": "Method", "name": "recursive_char_text_chunker_tiktoken", "qualified_name": "Transformer.recursive_char_text_chunker_tiktoken", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "text", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "chunk_size", "type": "int", "kind": "positional", "default": "100", "position": 2}, {"name": "chunk_overlap", "type": "int", "kind": "positional", "default": "0", "position": 3}], "return_type": "List[str]", "lineno": 48, "end_lineno": 67, "docstring": "Splits document into chunks and returns a list of chunks.\nUses RecursiveCharacterTextSplitter for tiktoken from LangChain.\nUses token counts instead of chracters for chunking.\nCreates tokens complaint with OpenAI  cl100k_base embedding models class.", "snippet": "    def recursive_char_text_chunker_tiktoken(\n            self,\n            text: str,\n            chunk_size: int=100,\n            chunk_overlap: int=0\n        ) -> List[str]:\n        \"\"\"\n        Splits document into chunks and returns a list of chunks.\n        Uses RecursiveCharacterTextSplitter for tiktoken from LangChain.\n        Uses token counts instead of chracters for chunking.\n...", "metrics": {"lines_of_code": 20, "complexity": 1, "num_parameters": 4, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 0}}
{"id": "8695708b4dcb5dffb05f9c39c29ef431c0785a45", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "71bb51b61c173dcbd16fcbd2a83e555d1b09451f", "type": "Parameter", "name": "text", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "ec840fb56ec0b1bf12e966ad1fdede6d911c2ad1", "type": "Parameter", "name": "chunk_size", "param_type": "int", "kind": "positional", "default": "100", "position": 2}
{"id": "238a7c1a1382ef63e803867aa59659e326882504", "type": "Parameter", "name": "chunk_overlap", "param_type": "int", "kind": "positional", "default": "0", "position": 3}
{"id": "dcbb5287a030124896371f75b7b350486832fddc", "type": "Variable", "name": "text_splitter", "value": "RecursiveCharacterTextSplitter.from_tiktoken_encoder(encoding_name='cl100k_base', chunk_size=chunk_size, chunk_overlap=chunk_overlap, disallowed_special='all')", "value_type": "complex", "lineno": 60, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "572b2e357cdc779d42efde4b17052ac7ebf59dff", "type": "File", "name": "loader.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/loader.py", "relpath": "src/components/loader.py", "module": "src.components.loader", "extension": ".py", "sha1": "be697c0061ce61172d8aa7108c89be6eb34385be", "lines_of_code": 39, "size_bytes": 1550, "language": "python", "encoding": "utf-8"}
{"id": "61c20d480b2594c5644070d070859dadd7ea0b45", "type": "Import", "name": "Union", "module": "typing", "full_name": "typing.Union", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 1, "is_stdlib": true}
{"id": "6eda25b08e75dc541c555d6edb40392010f4b337", "type": "Import", "name": "List", "module": "typing", "full_name": "typing.List", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 1, "is_stdlib": true}
{"id": "b1445ef409e95edb7395a629abbe7eac791554da", "type": "Import", "name": "PyMuPDFLoader", "module": "langchain_community.document_loaders.pdf", "full_name": "langchain_community.document_loaders.pdf.PyMuPDFLoader", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 2, "is_stdlib": false}
{"id": "ea3326fdfd392f83821c1b03fa265613008c8ae3", "type": "Import", "name": "CSVLoader", "module": "langchain_community.document_loaders.csv_loader", "full_name": "langchain_community.document_loaders.csv_loader.CSVLoader", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 3, "is_stdlib": false}
{"id": "e3d545ab8116a4b32cc95dc1268611008611c0e9", "type": "Import", "name": "TextLoader", "module": "langchain_community.document_loaders.text", "full_name": "langchain_community.document_loaders.text.TextLoader", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 4, "is_stdlib": false}
{"id": "1e10ac30ecca1dbd383cae0c42a79326ffb28811", "type": "Import", "name": "Docx2txtLoader", "module": "langchain_community.document_loaders.word_document", "full_name": "langchain_community.document_loaders.word_document.Docx2txtLoader", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 5, "is_stdlib": false}
{"id": "48d4ea6524ead961dc217bdf94c4c832eb1d0292", "type": "Import", "name": "Document", "module": "langchain.docstore.document", "full_name": "langchain.docstore.document.Document", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 7, "is_stdlib": false}
{"id": "d808b6892738636cc1a2d7c5ee7ac7ae2d997471", "type": "Class", "name": "DataLoader", "lineno": 9, "end_lineno": 39, "docstring": "Contains methods to load data using LangChain loaders for different file types and loading schemes.", "snippet": "class DataLoader:\n    \"\"\"\n    Contains methods to load data using LangChain loaders for different file types and loading schemes.\n    \"\"\"\n\n    def load_documents(self, file: str, filetype: str = '.pdf', meta_load=True)  -> List[Document]:\n        \"\"\"\n        Loads files such as PDF, Docx, CSV.\n        PyMuPDFLoader : Returns loaded file as a List of dictionary objects of the document. Each dict obj is one page.\n        The dictionary object is of type: langchain_core.documents.base.Document\n...", "bases": [], "decorators": [], "num_methods": 1, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "d4fe3ab754baec7576d104a42423ab07829ccbe4", "type": "Method", "name": "load_documents", "qualified_name": "DataLoader.load_documents", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "file", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "filetype", "type": "str", "kind": "positional", "default": "'.pdf'", "position": 2}, {"name": "meta_load", "type": null, "kind": "positional", "default": "True", "position": 3}], "return_type": "List[Document]", "lineno": 14, "end_lineno": 39, "docstring": "Loads files such as PDF, Docx, CSV.\nPyMuPDFLoader : Returns loaded file as a List of dictionary objects of the document. Each dict obj is one page.\nThe dictionary object is of type: langchain_core.documents.base.Document\n\nArgs:\n    meta_load : If meta_load is set to False, then metadata is not loaded ", "snippet": "    def load_documents(self, file: str, filetype: str = '.pdf', meta_load=True)  -> List[Document]:\n        \"\"\"\n        Loads files such as PDF, Docx, CSV.\n        PyMuPDFLoader : Returns loaded file as a List of dictionary objects of the document. Each dict obj is one page.\n        The dictionary object is of type: langchain_core.documents.base.Document\n\n        Args:\n            meta_load : If meta_load is set to False, then metadata is not loaded \n\n        \"\"\"\n...", "metrics": {"lines_of_code": 26, "complexity": 6, "num_parameters": 4, "num_returns": 2, "num_branches": 4, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 5}}
{"id": "0670126bd9e8260b84018d839aa50ed242d1d2b2", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "9a70edc1a3b3897b30aa3467e086ef216ea0e92e", "type": "Parameter", "name": "file", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "afc9c254b8e2c18ed11ce9a8aff80f72148db02b", "type": "Parameter", "name": "filetype", "param_type": "str", "kind": "positional", "default": "'.pdf'", "position": 2}
{"id": "4bad636f11696aa2de4b0dee9ba8fc0508f6afb8", "type": "Parameter", "name": "meta_load", "param_type": null, "kind": "positional", "default": "True", "position": 3}
{"id": "dff6fa50203b6277e967ef174beb668a7597e8c2", "type": "Variable", "name": "loader", "value": "PyMuPDFLoader(file)", "value_type": "complex", "lineno": 26, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "a34efd33f7a09126a4773d1ed89945b8286e2f15", "type": "Variable", "name": "loader", "value": "Docx2txtLoader(file)", "value_type": "complex", "lineno": 28, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "b46268e0af24b4e81c806879e091e8aa683d989f", "type": "Variable", "name": "loader", "value": "CSVLoader(file, encoding='utf-8')", "value_type": "complex", "lineno": 30, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "62fd0b8c0007e6357d5d9a73b4476bb4931b171e", "type": "Variable", "name": "loader", "value": "TextLoader(file, encoding='utf-8')", "value_type": "complex", "lineno": 32, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "e4323ccb4ab8715f3ce552b84b814a626d149a60", "type": "File", "name": "__init__.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/__init__.py", "relpath": "src/components/__init__.py", "module": "src.components.__init__", "extension": ".py", "sha1": "d667b6460d4a9b87cd80ffd7e13d3f1092659326", "lines_of_code": 1, "size_bytes": 15, "language": "python", "encoding": "utf-8"}
{"id": "96ec6ef99db6c39d090969e4099eab4345e5e843", "type": "Import", "name": "*", "module": "", "full_name": "*", "alias": null, "import_type": "from", "level": 1, "is_relative": true, "lineno": 1, "is_stdlib": false}
{"id": "45f11dc53187098e90da2cc63635c540110e7632", "type": "File", "name": "langfuse.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/langfuse.py", "relpath": "src/components/langfuse.py", "module": "src.components.langfuse", "extension": ".py", "sha1": "de1582b486440975d30a375ca3e16b99754e8950", "lines_of_code": 42, "size_bytes": 1548, "language": "python", "encoding": "utf-8"}
{"id": "1df90af9a3f190dc67a8d903174839177974a86d", "type": "Import", "name": "os", "alias": null, "import_type": "direct", "lineno": 1, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "d819d29143a4a77933f65e20a66a20e8e7f5b613", "type": "Import", "name": "CallbackHandler", "module": "langfuse.callback", "full_name": "langfuse.callback.CallbackHandler", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 2, "is_stdlib": false}
{"id": "45cfa57b80f919707364fae1eab5cf26c7addcf8", "type": "Class", "name": "LangFuseSingleton", "lineno": 4, "end_lineno": 36, "docstring": "Langfuse Singleton class to return the already created instance of the handler\n\nRaises:\n    ValueError: If LANGFUSE_SECRET_KEY or LANGFUSE_PUBLIC_KEY are not in the environment variables then it raises the value error\n\nReturns:\n    CallbackHandler: Instance of CallbackHandler, which is used to passed as callback function to LLM calls", "snippet": "class LangFuseSingleton:\n    \"\"\"Langfuse Singleton class to return the already created instance of the handler\n\n    Raises:\n        ValueError: If LANGFUSE_SECRET_KEY or LANGFUSE_PUBLIC_KEY are not in the environment variables then it raises the value error\n\n    Returns:\n        CallbackHandler: Instance of CallbackHandler, which is used to passed as callback function to LLM calls\n    \"\"\"\n    _instance = None\n...", "bases": [], "decorators": [], "num_methods": 2, "num_class_vars": 1, "is_private": false, "is_abstract": false}
{"id": "8c25cdd15569b8a419ba7ccbe0e7bdef1b78da60", "type": "Variable", "name": "_instance", "value": "None", "value_type": "NoneType", "lineno": 13, "is_global": false, "is_constant": false, "is_private": true, "scope": "local"}
{"id": "dccc0784b61dd3f2c1b96c18e878749128fce134", "type": "Method", "name": "__new__", "qualified_name": "LangFuseSingleton.__new__", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": true, "decorators": [], "decorator_details": [], "parameters": [{"name": "cls", "type": null, "kind": "positional", "default": null, "position": 0}], "return_type": null, "lineno": 15, "end_lineno": 33, "docstring": null, "snippet": "    def __new__(cls):\n        if cls._instance is None:\n            cls._instance = super(LangFuseSingleton, cls).__new__(cls)\n\n            secret_key = os.environ.get('LANGFUSE_SECRET_KEY')\n            public_key = os.environ.get('LANGFUSE_PUBLIC_KEY')\n            host = os.environ.get('LANGFUSE_HOST')  \n            # Default to EU region if not specified. Also EU servers are by default for playground. \n            # This service for playground is not yet extended to US servers.\n\n...", "metrics": {"lines_of_code": 19, "complexity": 5, "num_parameters": 1, "num_returns": 1, "num_branches": 2, "num_loops": 0, "has_docstring": false, "num_decorators": 0, "max_nesting_depth": 2}}
{"id": "b4a5af49bb16a28e73ac295ba6e0af2362421341", "type": "Parameter", "name": "cls", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "05fa1efe525c61559320addd4424df3f7c9a0c76", "type": "Variable", "name": "secret_key", "value": "os.environ.get('LANGFUSE_SECRET_KEY')", "value_type": "complex", "lineno": 19, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "d0bcd8eafa8ce9f8ce972feeb3b59c797ef6177a", "type": "Variable", "name": "public_key", "value": "os.environ.get('LANGFUSE_PUBLIC_KEY')", "value_type": "complex", "lineno": 20, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "3018ef56136934bededdf983ee3ce94685d8426a", "type": "Variable", "name": "host", "value": "os.environ.get('LANGFUSE_HOST')", "value_type": "complex", "lineno": 21, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "3e8fe23e57b029ca330920bbb2052c36229cb7a3", "type": "Method", "name": "get_handler", "qualified_name": "LangFuseSingleton.get_handler", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}], "return_type": "CallbackHandler", "lineno": 35, "end_lineno": 36, "docstring": null, "snippet": "    def get_handler(self) -> CallbackHandler:\n        return self.handler", "metrics": {"lines_of_code": 2, "complexity": 1, "num_parameters": 1, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": false, "num_decorators": 0, "max_nesting_depth": 0}}
{"id": "8ad04cdf3fb99c6eab028cff6295f41fd38d2212", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "8f163ff8f87bbd074d4c3e5df1e91b6dde0a596f", "type": "Variable", "name": "__langfuse_singleton", "value": "LangFuseSingleton()", "value_type": "complex", "lineno": 40, "is_global": true, "is_constant": false, "is_private": true, "scope": "global"}
{"id": "bf74992336bb22a734b23a51d2ab70eed5801959", "type": "Variable", "name": "langfuse_handler", "value": "__langfuse_singleton.get_handler()", "value_type": "complex", "lineno": 41, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "1fda217c2c98260487f2d78f4f46d62fd9cad512", "type": "File", "name": "embedder.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/embedder.py", "relpath": "src/components/embedder.py", "module": "src.components.embedder", "extension": ".py", "sha1": "9261d216e5c66622d40cc8d28442771025172e6f", "lines_of_code": 100, "size_bytes": 3731, "language": "python", "encoding": "utf-8"}
{"id": "49fb82bdbf35da193204f3b3ec22e3f390b02d56", "type": "Import", "name": "sys", "alias": null, "import_type": "direct", "lineno": 2, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "c7599be50dca60522d80e3ab0e83fba9e6fba027", "type": "Import", "name": "embedding_functions", "module": "chromadb.utils", "full_name": "chromadb.utils.embedding_functions", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 5, "is_stdlib": false}
{"id": "7206af6cb28cf161bdf51031834519109b8fae29", "type": "Import", "name": "load_dotenv", "module": "dotenv", "full_name": "dotenv.load_dotenv", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 6, "is_stdlib": false}
{"id": "f1e0944d9b832c944bb8855795fb2d57eb2bd7fd", "type": "Import", "name": "OpenAIEmbeddings", "module": "langchain_openai", "full_name": "langchain_openai.OpenAIEmbeddings", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 7, "is_stdlib": false}
{"id": "42009a08e60abf6d208157473c47d2aa566712c6", "type": "Import", "name": "List", "module": "typing_extensions", "full_name": "typing_extensions.List", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 8, "is_stdlib": false}
{"id": "18e4b16375f6acfa117af12eada32729d13b4201", "type": "Import", "name": "Document", "module": "langchain.docstore.document", "full_name": "langchain.docstore.document.Document", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 9, "is_stdlib": false}
{"id": "6e4dec353f6f27fd52a33c67f98c6230cc79a5f2", "type": "Import", "name": "openai", "alias": null, "import_type": "direct", "lineno": 10, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "02f05624c1badecc3c48e68f4e91c425f5ebd5d7", "type": "Import", "name": "os", "alias": null, "import_type": "direct", "lineno": 11, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "51f1dfaaceac05f6e6f1bff4c99a5c058f125ac8", "type": "Class", "name": "Embedder", "lineno": 16, "end_lineno": 100, "docstring": "Contains different embedding generation methods", "snippet": "class Embedder:\n    \"\"\"\n    Contains different embedding generation methods\n    \"\"\"\n    \n    def chroma_openai_embedding_function(\n            self,\n            open_api_key: str | None = None,\n            model_name: str ='text-embedding-3',\n            **kwargs\n...", "bases": [], "decorators": [], "num_methods": 2, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "6b0c79516d0425195ecd8491b3251844f1159fa0", "type": "Method", "name": "chroma_openai_embedding_function", "qualified_name": "Embedder.chroma_openai_embedding_function", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "open_api_key", "type": "str | None", "kind": "positional", "default": "None", "position": 1}, {"name": "model_name", "type": "str", "kind": "positional", "default": "'text-embedding-3'", "position": 2}, {"name": "kwargs", "type": null, "kind": "kwarg", "default": null, "position": 3}], "return_type": "embedding_functions.OpenAIEmbeddingFunction", "lineno": 21, "end_lineno": 54, "docstring": "Returns an OpenAI embedding function against the passed arguments from \nChromadb built-in utils to support embedding generation using chromadb wrapper for OpenAI embeddings.\nArgs:\n    api_key: openai api key.\n    model_name: defaults to openai's text-embedding-3-small model.", "snippet": "    def chroma_openai_embedding_function(\n            self,\n            open_api_key: str | None = None,\n            model_name: str ='text-embedding-3',\n            **kwargs\n        ) -> embedding_functions.OpenAIEmbeddingFunction:\n        \"\"\"\n        Returns an OpenAI embedding function against the passed arguments from \n        Chromadb built-in utils to support embedding generation using chromadb wrapper for OpenAI embeddings.\n        Args:\n...", "metrics": {"lines_of_code": 34, "complexity": 3, "num_parameters": 3, "num_returns": 3, "num_branches": 2, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 2}}
{"id": "bf7999267ff9a077379e3d5e6a1b2640ded74873", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "f0d585784b2fad12bd0b864e7fc406595aa44245", "type": "Parameter", "name": "open_api_key", "param_type": "str | None", "kind": "positional", "default": "None", "position": 1}
{"id": "76c06ee6fe2b038b115202178a38f570e5092266", "type": "Parameter", "name": "model_name", "param_type": "str", "kind": "positional", "default": "'text-embedding-3'", "position": 2}
{"id": "1248eeb4615f68f22245ea9a8c8c760f22ded0c4", "type": "Parameter", "name": "kwargs", "param_type": null, "kind": "kwarg", "default": null, "position": 3}
{"id": "68f4c36cfac3cfab1ed7ab0d8e56ba425c7cc27f", "type": "Variable", "name": "embeding_func", "value": "embedding_functions.OpenAIEmbeddingFunction(api_key=open_api_key, model_name=model_name, default_headers=kwargs)", "value_type": "complex", "lineno": 38, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "f3f13b11805f49ffa2dd37bd896caf992a4c4b68", "type": "Variable", "name": "open_api_key_os", "value": "os.environ.get('OPENAI_API_KEY')", "value_type": "complex", "lineno": 45, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "b196c52e6a5c2c350a240a0a809cdffec995047a", "type": "Variable", "name": "embeding_func", "value": "embedding_functions.OpenAIEmbeddingFunction(api_key=open_api_key_os, model_name=model_name, default_headers=kwargs)", "value_type": "complex", "lineno": 49, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "1aa45a8564ab591f0ce49c9b326ad85b21fa7cc7", "type": "Method", "name": "get_openai_embeddings", "qualified_name": "Embedder.get_openai_embeddings", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "documents", "type": "List[Document]", "kind": "positional", "default": null, "position": 1}, {"name": "kwargs", "type": null, "kind": "kwarg", "default": null, "position": 2}], "return_type": "List[List[float]]", "lineno": 56, "end_lineno": 100, "docstring": "Uses OpenAIEmbeddings from langchain_openai to generate embeddings of passed documents.\n\nArgs:\n    documents: List of documents to be embedded\n\nReturns:\n    List of embeddings for the passed documents", "snippet": "    def get_openai_embeddings(self, documents: List[Document], **kwargs) -> List[List[float]]:\n        \"\"\"\n        Uses OpenAIEmbeddings from langchain_openai to generate embeddings of passed documents.\n\n        Args:\n            documents: List of documents to be embedded\n\n        Returns:\n            List of embeddings for the passed documents\n        \"\"\"\n...", "metrics": {"lines_of_code": 45, "complexity": 7, "num_parameters": 2, "num_returns": 1, "num_branches": 2, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "7c9aec0b73c24ce35c388d84598626e25c0e8920", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "091cc1386886bac2f732d0ca5ab851d0af6a4799", "type": "Parameter", "name": "documents", "param_type": "List[Document]", "kind": "positional", "default": null, "position": 1}
{"id": "3ebb285c2130b2dd66e4ac012de88ecf846d4c1d", "type": "Parameter", "name": "kwargs", "param_type": null, "kind": "kwarg", "default": null, "position": 2}
{"id": "ca036015467992807ccecbb020fbca18e9567c4f", "type": "Variable", "name": "embed_obj", "value": "OpenAIEmbeddings(model='text-embedding-3-small', dimensions=kwargs.get('dimensions', 256), tiktoken_enabled=True, tiktoken_model_name='text-embedding-3-small', api_key=os.environ.get('OPENAI_API_KEY')", "value_type": "complex", "lineno": 66, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "09a38914f59037aa6d21ff8e2ace4d461b6e9ff6", "type": "Variable", "name": "embeddings", "value": "embed_obj.embed_documents(texts=documents)", "value_type": "complex", "lineno": 83, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "88cbd6fbd0c24e7b33030513f3c94d168a2cae9b", "type": "File", "name": "agent.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/agent.py", "relpath": "src/components/agent.py", "module": "src.components.agent", "extension": ".py", "sha1": "8a0fde22917865dc6b0d5307631441c11fb5ef31", "lines_of_code": 6, "size_bytes": 107, "language": "python", "encoding": "utf-8"}
{"id": "9b3a746c5ae6093de7ea2614ce8a763ae059c8ad", "type": "Class", "name": "Agent", "lineno": 2, "end_lineno": 6, "docstring": "Contains different LangChain agents. Built-in ones, custom ones.", "snippet": "class Agent:\n    \"\"\"\n    Contains different LangChain agents. Built-in ones, custom ones.\n    \"\"\"\n    pass", "bases": [], "decorators": [], "num_methods": 0, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "b734f2a0a5fceca518952c966f25b77b1fd79f42", "type": "File", "name": "semantic_guardrails.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/components/semantic_guardrails.py", "relpath": "src/components/semantic_guardrails.py", "module": "src.components.semantic_guardrails", "extension": ".py", "sha1": "cc8bd0cfe1c673996316d766bfdd4770dc4a246b", "lines_of_code": 520, "size_bytes": 24590, "language": "python", "encoding": "utf-8"}
{"id": "c0a6be135f4666990e644e00cf6ec41883b1ebd8", "type": "Import", "name": "Route", "module": "semantic_router", "full_name": "semantic_router.Route", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 1, "is_stdlib": false}
{"id": "d08d80f1fc48d6727fd7d7a3f19dee3c0e2be98f", "type": "Import", "name": "OpenAIEncoder", "module": "semantic_router.encoders", "full_name": "semantic_router.encoders.OpenAIEncoder", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 2, "is_stdlib": false}
{"id": "a489a7112c0ae9d1d0b44ac62c141b74b8f123c3", "type": "Import", "name": "RouteLayer", "module": "semantic_router.layer", "full_name": "semantic_router.layer.RouteLayer", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 3, "is_stdlib": false}
{"id": "d89f935a704dfa1cdfe01013a64533439ede562c", "type": "Variable", "name": "politics", "value": "Route(name='politics', utterances=[\"isn't politics the best thing ever\", \"why don't you tell me about your political opinions\", \"don't you just love the president\", \"they're going to destroy this coun", "value_type": "complex", "lineno": 22, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "a3cac941b27f213802ef5b1c1b3e49d6b5b5d2ac", "type": "Variable", "name": "chitchat", "value": "Route(name='chitchat', utterances=[\"how's the weather today?\", 'how are things going?', 'lovely weather today', 'the weather is horrendous', \"let's go to the chippy\", \"What's up?\", \"Nice day, isn't it", "value_type": "complex", "lineno": 216, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "d539c0d3d99ef7e38f81789948cd48beb2453083", "type": "Variable", "name": "hate_speech", "value": "Route(name='hate_speech', utterances=['I despise people of that ethnicity.', 'Such a vile group of individuals.', 'Those people should be eradicated.', \"I can't stand Chinese people.\", \"They're all bi", "value_type": "complex", "lineno": 350, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "fdf14ff7f87dd87cdbb9ac88cf4a26ea2c0a15a8", "type": "Variable", "name": "explicit_content", "value": "Route(name='explicit_content', utterances=[\"That's so inappropriate!\", \"I can't believe they showed that on TV.\", \"Such explicit content shouldn't be allowed.\", 'They should censor that kind of stuff.", "value_type": "complex", "lineno": 385, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "8bbd4e196e23b8d064a94826d47d5530aa02802a", "type": "Variable", "name": "violence", "value": "Route(name='violence', utterances=[\"That's too violent for my taste.\", \"I can't watch this violence anymore.\", 'They need to tone down the violence.', 'Why is there so much violence in this movie?', '", "value_type": "complex", "lineno": 421, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "6e4c7170060dd6e4970c09ed8d8c920dd1d6ed37", "type": "Variable", "name": "illegal", "value": "Route(name='illegal', utterances=[\"That's against the law!\", \"I can't believe they're doing something illegal.\", 'This is illegal, they should be arrested.', 'Why are they breaking the law?', 'They ne", "value_type": "complex", "lineno": 457, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "4085ce9b56170952c5621b5d6c6e2979d343f968", "type": "Variable", "name": "personal", "value": "Route(name='personal', utterances=[\"That's none of your business.\", \"I don't feel comfortable sharing personal information.\", 'Why are you asking such personal questions?', 'I prefer to keep my person", "value_type": "complex", "lineno": 493, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "ec27c38f72653969e75ae460ab69fc814bec5eea", "type": "Variable", "name": "faq", "value": "Route(name='faq', utterances=[])", "value_type": "complex", "lineno": 511, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "cf5bea5e6466253b8fb6ea22a8b321e475359e2b", "type": "Variable", "name": "routes", "value": "[politics, chitchat, hate_speech, explicit_content, violence, illegal, personal, faq]", "value_type": "complex", "lineno": 516, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "63fa3052e0c7655fd4b32d368732e9bc8a948642", "type": "Variable", "name": "encoder", "value": "OpenAIEncoder()", "value_type": "complex", "lineno": 518, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "efea36fa1fc242ee3c3b77a72c474f867c06e271", "type": "Variable", "name": "route_layer", "value": "RouteLayer(encoder=encoder, routes=routes)", "value_type": "complex", "lineno": 520, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "a14383f81272934a071b76ff2c93ee8365a2d40c", "type": "File", "name": "pipeline_basic.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/pipelines/pipeline_basic.py", "relpath": "src/pipelines/pipeline_basic.py", "module": "src.pipelines.pipeline_basic", "extension": ".py", "sha1": "16fbd10521918b5e4f4ce08a3e1d4f960f85c986", "lines_of_code": 269, "size_bytes": 10828, "language": "python", "encoding": "utf-8"}
{"id": "2f71fab6f48163888f3ed537ab10bef55b8c6488", "type": "Import", "name": "sys", "alias": null, "import_type": "direct", "lineno": 4, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "8df5901c38815e652da6ac320cf4792eca769930", "type": "Import", "name": "get_files", "module": "components.file_reader", "full_name": "components.file_reader.get_files", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 7, "is_stdlib": false}
{"id": "2c4b97d5b2e16807f844c05d6fd8d680566006b0", "type": "Import", "name": "Embedder", "module": "components.embedder", "full_name": "components.embedder.Embedder", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 8, "is_stdlib": false}
{"id": "db0cce460d40b2f59a41dc475c06cf8ab32e2a3c", "type": "Import", "name": "Retriever", "module": "components.retrieve", "full_name": "components.retrieve.Retriever", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 9, "is_stdlib": false}
{"id": "a7a8eb1a41f2171a2343bdba458d890b85f8d578", "type": "Import", "name": "ChromaOps", "module": "components.chroma_ops", "full_name": "components.chroma_ops.ChromaOps", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 10, "is_stdlib": false}
{"id": "769b4f05c2f0920ae9f575bfe68356a08b134597", "type": "Import", "name": "ChatMemory", "module": "components.memory", "full_name": "components.memory.ChatMemory", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 11, "is_stdlib": false}
{"id": "e8a3f653e557ab80c7f310f373af44b5e3d55130", "type": "Import", "name": "Chainer", "module": "components.chain", "full_name": "components.chain.Chainer", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 12, "is_stdlib": false}
{"id": "1d8a6a24272e4208e090f0c7605f029f6a29cf57", "type": "Import", "name": "BasePipeline", "module": "pipeline_base", "full_name": "pipeline_base.BasePipeline", "alias": null, "import_type": "from", "level": 1, "is_relative": true, "lineno": 14, "is_stdlib": false}
{"id": "aa4552a354c13dde3a420a648215cb909df73adc", "type": "Import", "name": "Chain", "module": "langchain.chains.base", "full_name": "langchain.chains.base.Chain", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 16, "is_stdlib": false}
{"id": "55f40b059c4a4ac54f2909d9d565921914402094", "type": "Import", "name": "BaseChatMemory", "module": "langchain.memory.chat_memory", "full_name": "langchain.memory.chat_memory.BaseChatMemory", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 17, "is_stdlib": false}
{"id": "9307b89a210fc45923c1d36d80d29a274d23fe04", "type": "Import", "name": "ChatOpenAI", "module": "langchain_openai", "full_name": "langchain_openai.ChatOpenAI", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 18, "is_stdlib": false}
{"id": "92949ac6259dfe66a2852b4ef0ac04f0fa27af06", "type": "Import", "name": "AttributeInfo", "module": "langchain.chains.query_constructor.schema", "full_name": "langchain.chains.query_constructor.schema.AttributeInfo", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 19, "is_stdlib": false}
{"id": "5239eaed5280e0752690bba925f05e238742d958", "type": "Import", "name": "CallbackHandler", "module": "langfuse.callback", "full_name": "langfuse.callback.CallbackHandler", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 20, "is_stdlib": false}
{"id": "cf4ccb0bf47fe72fb29eab1f8c7e6ca1c9762b3e", "type": "Import", "name": "os", "alias": null, "import_type": "direct", "lineno": 22, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "a72d4a32a75ec0d607664a25e2c04aec4b0af25b", "type": "Import", "name": "load_dotenv", "module": "dotenv", "full_name": "dotenv.load_dotenv", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 24, "is_stdlib": false}
{"id": "a072f92653e78a3983494f166aafa69909321e05", "type": "Import", "name": "List", "module": "typing", "full_name": "typing.List", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 25, "is_stdlib": true}
{"id": "f5a88a17aadcbb02d3f7937ab44721bda6480e42", "type": "Import", "name": "Tuple", "module": "typing", "full_name": "typing.Tuple", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 25, "is_stdlib": true}
{"id": "ee30942cdb0c711422d9e5e75a7adf7c6da143a6", "type": "Import", "name": "Union", "module": "typing", "full_name": "typing.Union", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 25, "is_stdlib": true}
{"id": "b5eba410637c384262de2951338ce74f5291c21f", "type": "Import", "name": "Any", "module": "typing", "full_name": "typing.Any", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 25, "is_stdlib": true}
{"id": "3787d45263a5e91264d24cc31ca962fa3dab96f0", "type": "Import", "name": "Dict", "module": "typing", "full_name": "typing.Dict", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 25, "is_stdlib": true}
{"id": "f9b04f9e861052c96a01288abbb9cdb03df9e384", "type": "Variable", "name": "metadata_field_info", "value": "[AttributeInfo(name='source', description='Source path of the PDF file', type='string'), AttributeInfo(name='file_path', description='File path of the PDF file', type='string'), AttributeInfo(name='pa", "value_type": "complex", "lineno": 29, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "3f4ed4a996e946b1f5631f7483caff132986c08f", "type": "Variable", "name": "document_content_description", "value": "\nThese document contains information about the Standards and Guidelines\n", "value_type": "str", "lineno": 167, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "5d59056434c6754dbd859c9ebb57c44dc898978f", "type": "Class", "name": "MainPipeline", "lineno": 170, "end_lineno": 263, "docstring": "Main Pipeline\n\nArgs:\n    BasePipeline (class): MainPipeline inherits from the BasePipeline ", "snippet": "class MainPipeline(BasePipeline):\n    \"\"\"Main Pipeline\n\n    Args:\n        BasePipeline (class): MainPipeline inherits from the BasePipeline \n    \"\"\"\n    def __init__(self, docs_folder_path: str, langfuse_handler: Union[None, CallbackHandler] = None, use_flare: bool = False, collection_name: str = 'iso-standards') -> None:\n        \"\"\"Constructor\n\n        Args:\n...", "bases": ["BasePipeline"], "decorators": [], "num_methods": 3, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "bdbe34f7bec46b53595da06c0c26b1d5802a7053", "type": "Method", "name": "__init__", "qualified_name": "MainPipeline.__init__", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": true, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "docs_folder_path", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "langfuse_handler", "type": "Union[None, CallbackHandler]", "kind": "positional", "default": "None", "position": 2}, {"name": "use_flare", "type": "bool", "kind": "positional", "default": "False", "position": 3}, {"name": "collection_name", "type": "str", "kind": "positional", "default": "'iso-standards'", "position": 4}], "return_type": "None", "lineno": 176, "end_lineno": 188, "docstring": "Constructor\n\nArgs:\n    docs_folder_path (str): Media folder where all the pdf's are stored\n    langfuse_handler (Union[None, CallbackHandler], optional): Singleton instance of Langfuse handler to trace the LLM calls. Defaults to None.\n    use_flare (bool, optional): Boolean check if want to use flare chain instead of Conversational Chain. Defaults to False.\n    collection_name (str, optional): Name of the collection you want to create or get. Defaults to 'iso-standards'.", "snippet": "    def __init__(self, docs_folder_path: str, langfuse_handler: Union[None, CallbackHandler] = None, use_flare: bool = False, collection_name: str = 'iso-standards') -> None:\n        \"\"\"Constructor\n\n        Args:\n            docs_folder_path (str): Media folder where all the pdf's are stored\n            langfuse_handler (Union[None, CallbackHandler], optional): Singleton instance of Langfuse handler to trace the LLM calls. Defaults to None.\n            use_flare (bool, optional): Boolean check i", "metrics": {"lines_of_code": 13, "complexity": 1, "num_parameters": 5, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 0}}
{"id": "ddb3ccd2a8b89f495a72da6a344bb943cdb498d1", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "6be8f4eeb5716801537ad834ccf9b24550dc8d74", "type": "Parameter", "name": "docs_folder_path", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "0d8853be66b36acff983b45013f2a8a7e5e80dfb", "type": "Parameter", "name": "langfuse_handler", "param_type": "Union[None, CallbackHandler]", "kind": "positional", "default": "None", "position": 2}
{"id": "175b33fc6a964b014bc6b9534c99ab9f23870bf3", "type": "Parameter", "name": "use_flare", "param_type": "bool", "kind": "positional", "default": "False", "position": 3}
{"id": "824bb0c1c6e14a15e267f1b54c679b72de7b986f", "type": "Parameter", "name": "collection_name", "param_type": "str", "kind": "positional", "default": "'iso-standards'", "position": 4}
{"id": "6bf74f2f1b7823846211ca6377fe758c98c006c6", "type": "Method", "name": "pipeline_setup_LLM", "qualified_name": "MainPipeline.pipeline_setup_LLM", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "vec_ops", "type": "ChromaOps", "kind": "positional", "default": null, "position": 1}, {"name": "collection_name", "type": "str", "kind": "positional", "default": null, "position": 2}, {"name": "use_flare", "type": "bool", "kind": "positional", "default": "False", "position": 3}], "return_type": "Tuple[BaseChatMemory, Chain]", "lineno": 190, "end_lineno": 224, "docstring": "Setup LLM and QA Chain\n\nArgs:\n    vec_ops (ChromaOps): Chroma Operator instance used to get the chroma client\n    collection_name (str): Instance of the collection passed to retrieve documents in the particular collection\n\nRaises:\n    e: Raised if any error occurred during creation of chain or memory instance.\n\nReturns:\n    Tuple[BaseChatMemory, Chain]: Return the instance of the memory module and chain", "snippet": "    def pipeline_setup_LLM(self, vec_ops: ChromaOps, collection_name: str, use_flare: bool = False) -> Tuple[BaseChatMemory, Chain]:\n        \"\"\"Setup LLM and QA Chain\n\n        Args:\n            vec_ops (ChromaOps): Chroma Operator instance used to get the chroma client\n            collection_name (str): Instance of the collection passed to retrieve documents in the particular collection\n\n        Raises:\n            e: Raised if any error occurred during creation of chain or memory instance.\n\n...", "metrics": {"lines_of_code": 35, "complexity": 2, "num_parameters": 4, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "14d6f9da5048d3dbb92790d522be4d35fb16a4ed", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "3981a07ecd12dc12e6709eb0662b9e633775810e", "type": "Parameter", "name": "vec_ops", "param_type": "ChromaOps", "kind": "positional", "default": null, "position": 1}
{"id": "17e7a8e1c540f508b5884b0a4d37e792cc483c03", "type": "Parameter", "name": "collection_name", "param_type": "str", "kind": "positional", "default": null, "position": 2}
{"id": "dd5fd8617d7c5548d437ee4f3b23f8f77df067d9", "type": "Parameter", "name": "use_flare", "param_type": "bool", "kind": "positional", "default": "False", "position": 3}
{"id": "4ceec79e557b5d513819a00aaf307c34fae59000", "type": "Variable", "name": "LLM", "value": "ChatOpenAI(model_name='gpt-3.5-turbo-0125', temperature=0, streaming=False)", "value_type": "complex", "lineno": 205, "is_global": false, "is_constant": true, "is_private": false, "scope": "local"}
{"id": "4534d2c987a4b6854e92e285a27fbc56dc1604b5", "type": "Variable", "name": "chroma_client", "value": "vec_ops.chroma_client()", "value_type": "complex", "lineno": 208, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "19d9561ed0ebe6eaba18f6ec8d3e2d8175b9c52b", "type": "Variable", "name": "retriever_obj", "value": "Retriever.retrieve(Retriever, chroma_client=chroma_client, use_compression=True, collection_name=collection_name)", "value_type": "complex", "lineno": 209, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "d22d3f4bc438f096b71db676a8b4358c53d96a8f", "type": "Variable", "name": "mem_instance", "value": "ChatMemory()", "value_type": "complex", "lineno": 212, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "431e69aa25c31134ceae18ae90fbd935f6c6da93", "type": "Variable", "name": "MEMORY", "value": "mem_instance.init_conv_buf_memory()", "value_type": "complex", "lineno": 213, "is_global": false, "is_constant": true, "is_private": false, "scope": "local"}
{"id": "40a3070b1a69582a03c04635ec50620ff72dad06", "type": "Variable", "name": "chn_instance", "value": "Chainer()", "value_type": "complex", "lineno": 216, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "8278f3349af003622f32f0b6e8f514a82821c566", "type": "Variable", "name": "conv_chain", "value": "chn_instance.retrieval_chain(retriever_obj, MEMORY, LLM, use_flare=use_flare)", "value_type": "complex", "lineno": 217, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "e08e9a9f2e0ac52d0e48910eedbedc62240494a9", "type": "Method", "name": "main_pipeline", "qualified_name": "MainPipeline.main_pipeline", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}], "return_type": "None", "lineno": 226, "end_lineno": 263, "docstring": "Main pipeline to invoke all of the rest of the private functions defined in the MainPipeline class to complete one cycle of complete end to end execution of the RAG application starting from loading pdf's from the database, updating its status, creating embedding if necessary, retrieving metadata by passing the metadata.json file, to QA chain.\n        ", "snippet": "    def main_pipeline(self) -> None:\n        \"\"\"Main pipeline to invoke all of the rest of the private functions defined in the MainPipeline class to complete one cycle of complete end to end execution of the RAG application starting from loading pdf's from the database, updating its status, creating embedding if necessary, retrieving metadata by passing the metadata.json file, to QA chain.\n        \"\"\"\n        # Getting the pdf file names by passing the media folder\n        files = get_files(fil", "metrics": {"lines_of_code": 38, "complexity": 2, "num_parameters": 1, "num_returns": 0, "num_branches": 1, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "c373869bf76d6d52734fd9cf6234f63291af3c51", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "f8fbe0e66978a6640f565c9a2ba53a366a7856b5", "type": "Variable", "name": "files", "value": "get_files(file_dir=self.docs_folder_path)", "value_type": "complex", "lineno": 230, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "94e9e9b7081364addb5c3acab0bf22e7105a8670", "type": "Variable", "name": "metadata_file", "value": "os.path.dirname(__file__) + '/metadata.json'", "value_type": "complex", "lineno": 233, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "7349ba660f8289992383ffc3e2f06d7d0222c263", "type": "Variable", "name": "metadata", "value": "self.get_metadata_for_files(files, metadata_file=metadata_file)", "value_type": "complex", "lineno": 234, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "421e663ca596603415e9753000b7c970f73567dd", "type": "Variable", "name": "all_files_in_database", "value": "self.pipeline_load_docs_from_postgres()", "value_type": "complex", "lineno": 241, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "552ac52baa203037822ef492b03698475866df88", "type": "Variable", "name": "files_on_server", "value": "[file for file in all_files_in_database]", "value_type": "complex", "lineno": 242, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "5a71b095b674b9ae4bea7249477e13ccf2cdb5a6", "type": "Variable", "name": "all_loaded_files", "value": "self.pipeline_load_documents(all_files_in_database, metadata)", "value_type": "complex", "lineno": 248, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "e23072680c62b32c100ad86e763012c42ecc5421", "type": "Variable", "name": "len_embeddings", "value": "self.pipeline_check_embeddings(iso_collection)", "value_type": "complex", "lineno": 255, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "534b5ebefda180f0ada39ca06622b6e81a3bcac7", "type": "Variable", "name": "embedder", "value": "Embedder()", "value_type": "complex", "lineno": 257, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "cbd8a1ba998fa310097e3d3c02836d2faa1d8345", "type": "Variable", "name": "embeddings", "value": "embedder.get_openai_embeddings(documents=[doc for docs in chunked_files for doc in docs], dimensions=256)", "value_type": "complex", "lineno": 258, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "d9419e590f2151f4110ced34adbd1f620b4ff142", "type": "Variable", "name": "parent", "value": "os.path.dirname(os.path.dirname(os.path.dirname(__file__)))", "value_type": "complex", "lineno": 266, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "9aae7aed5741630bd42c66d15bb9fbe6999577ec", "type": "Variable", "name": "media_path", "value": "os.path.join(parent, 'media')", "value_type": "complex", "lineno": 267, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "958669c14093e3c54e4800ca8fcc177942ce8bf0", "type": "Variable", "name": "mp", "value": "MainPipeline(docs_folder_path=media_path)", "value_type": "complex", "lineno": 268, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "fde318f497d19cdd763eeeb36d47a161b89882a3", "type": "File", "name": "pipeline_parent_child.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/pipelines/pipeline_parent_child.py", "relpath": "src/pipelines/pipeline_parent_child.py", "module": "src.pipelines.pipeline_parent_child", "extension": ".py", "sha1": "f530c58c8f5c5148025be7550f2bf8aebe7e0387", "lines_of_code": 110, "size_bytes": 5222, "language": "python", "encoding": "utf-8"}
{"id": "bfe7ff9ed710817d92d927841d40ee32c366432e", "type": "Import", "name": "sys", "alias": null, "import_type": "direct", "lineno": 4, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "5c96466b82b7c8d3989380b77933c80c0f849d48", "type": "Import", "name": "get_files", "module": "components.file_reader", "full_name": "components.file_reader.get_files", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 8, "is_stdlib": false}
{"id": "127a3ecaca20fe005023e93e3316c1d4585ff2a4", "type": "Import", "name": "ChromaOps", "module": "components.chroma_ops", "full_name": "components.chroma_ops.ChromaOps", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 9, "is_stdlib": false}
{"id": "9cd5aea213646a37054a2cf09b37b07c7b2a5c92", "type": "Import", "name": "Retriever", "module": "components.retrieve", "full_name": "components.retrieve.Retriever", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 10, "is_stdlib": false}
{"id": "66a82df562f03f9c1a9a60788f74b3d8d216f652", "type": "Import", "name": "BasePipeline", "module": "pipeline_base", "full_name": "pipeline_base.BasePipeline", "alias": null, "import_type": "from", "level": 1, "is_relative": true, "lineno": 12, "is_stdlib": false}
{"id": "8fca4deb5b515833642b1988360ea28b2944ac20", "type": "Import", "name": "CallbackHandler", "module": "langfuse.callback", "full_name": "langfuse.callback.CallbackHandler", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 14, "is_stdlib": false}
{"id": "d9574af1903eebb0311e2e8cb43c76f60bcb259a", "type": "Import", "name": "BaseRetriever", "module": "langchain.schema", "full_name": "langchain.schema.BaseRetriever", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 15, "is_stdlib": false}
{"id": "e44695e6ff3c99c8bf7335ae10e9f54ea1fb4b18", "type": "Import", "name": "InMemoryStore", "module": "langchain.storage", "full_name": "langchain.storage.InMemoryStore", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 16, "is_stdlib": false}
{"id": "8e2b7e60430505fbcc867649db37c3d6d3ec4c5b", "type": "Import", "name": "Document", "module": "langchain.docstore.document", "full_name": "langchain.docstore.document.Document", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 17, "is_stdlib": false}
{"id": "6c89eda84a22b77fedfebbbc628e44682f0d138d", "type": "Import", "name": "os", "alias": null, "import_type": "direct", "lineno": 19, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "26ecd3bab3b610d6f63605cc34c39d85b71297a1", "type": "Import", "name": "load_dotenv", "module": "dotenv", "full_name": "dotenv.load_dotenv", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 21, "is_stdlib": false}
{"id": "1bc05a9307a73d803c3b24f124e858eae4591bb5", "type": "Import", "name": "List", "module": "typing", "full_name": "typing.List", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 22, "is_stdlib": true}
{"id": "e007c21ef6015867847f810317ca598cc95ec7d7", "type": "Import", "name": "Union", "module": "typing", "full_name": "typing.Union", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 22, "is_stdlib": true}
{"id": "2a716d65517298b015a1e56ae96ee43b3eb7266e", "type": "Class", "name": "ParentChildPipeline", "lineno": 27, "end_lineno": 103, "docstring": null, "snippet": "class ParentChildPipeline(BasePipeline):\n\n    def __init__(self, docs_folder_path: str, langfuse_handler: Union[None, CallbackHandler] = None, use_flare: bool = False, collection_name: str = 'iso-standards-parent-child') -> None:\n        \"\"\"Constructor\n\n        Args:\n            docs_folder_path (str): Media folder where all the pdf's are stored\n            langfuse_handler (Union[None, CallbackHandler], optional): Singleton instance of Langfuse handler to trace the LLM calls. Defaults to None.\n", "bases": ["BasePipeline"], "decorators": [], "num_methods": 4, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "31ea93593a4744a6bd6c1ae125d579fa941345b9", "type": "Method", "name": "__init__", "qualified_name": "ParentChildPipeline.__init__", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": true, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "docs_folder_path", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "langfuse_handler", "type": "Union[None, CallbackHandler]", "kind": "positional", "default": "None", "position": 2}, {"name": "use_flare", "type": "bool", "kind": "positional", "default": "False", "position": 3}, {"name": "collection_name", "type": "str", "kind": "positional", "default": "'iso-standards-parent-child'", "position": 4}], "return_type": "None", "lineno": 29, "end_lineno": 41, "docstring": "Constructor\n\nArgs:\n    docs_folder_path (str): Media folder where all the pdf's are stored\n    langfuse_handler (Union[None, CallbackHandler], optional): Singleton instance of Langfuse handler to trace the LLM calls. Defaults to None.\n    use_flare (bool, optional): Boolean check if want to use flare chain instead of Conversational Chain. Defaults to False.\n    collection_name (str, optional): Name of the collection you want to create or get. Defaults to 'iso-standards'.", "snippet": "    def __init__(self, docs_folder_path: str, langfuse_handler: Union[None, CallbackHandler] = None, use_flare: bool = False, collection_name: str = 'iso-standards-parent-child') -> None:\n        \"\"\"Constructor\n\n        Args:\n            docs_folder_path (str): Media folder where all the pdf's are stored\n            langfuse_handler (Union[None, CallbackHandler], optional): Singleton instance of Langfuse handler to trace the LLM calls. Defaults to None.\n            use_flare (bool, optional): Bo", "metrics": {"lines_of_code": 13, "complexity": 1, "num_parameters": 5, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 0}}
{"id": "599a2fcc64a1dd76e11c4dcfdd7dea7ffa222da5", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "e72022fa3394c4838c032bc7783684d7c8237823", "type": "Parameter", "name": "docs_folder_path", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "f1f60f81ef419d18d66f986fdf7136c2347e3799", "type": "Parameter", "name": "langfuse_handler", "param_type": "Union[None, CallbackHandler]", "kind": "positional", "default": "None", "position": 2}
{"id": "8dbfdc470896ea2eb165fd0eb8e07b8255fe7d6d", "type": "Parameter", "name": "use_flare", "param_type": "bool", "kind": "positional", "default": "False", "position": 3}
{"id": "d56ceabc347086b6ac9124d72b393d695b7a6007", "type": "Parameter", "name": "collection_name", "param_type": "str", "kind": "positional", "default": "'iso-standards-parent-child'", "position": 4}
{"id": "9be868f012eba3f40e2b2d5ebc4c27411fca4448", "type": "Method", "name": "__pipeline_initialize_parent_child_retriever", "qualified_name": "ParentChildPipeline.__pipeline_initialize_parent_child_retriever", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "vec_ops", "type": "ChromaOps", "kind": "positional", "default": null, "position": 1}, {"name": "collection_name", "type": "str", "kind": "positional", "default": null, "position": 2}], "return_type": "BaseRetriever", "lineno": 43, "end_lineno": 53, "docstring": "Initialize the Parent Child Retriever", "snippet": "    def __pipeline_initialize_parent_child_retriever(self, vec_ops: ChromaOps, collection_name: str) -> BaseRetriever:\n        \"\"\"\n        Initialize the Parent Child Retriever\n        \"\"\"\n        try:\n            chroma_client = vec_ops.chroma_client()\n            store = InMemoryStore()\n            retriever_instance = Retriever.parent_child_retriever(Retriever, chroma_client=chroma_client, collection_name=collection_name, store=store)\n            return retriever_instance\n        except Excep", "metrics": {"lines_of_code": 11, "complexity": 2, "num_parameters": 3, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "e3f6f0d8447a5767305a75c63650a3ecaf43bd22", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "80c6b7e7c4796a3db082a2927e13cf285a01e927", "type": "Parameter", "name": "vec_ops", "param_type": "ChromaOps", "kind": "positional", "default": null, "position": 1}
{"id": "7b7d1b0aa2a60119e66ee0e7e0f8cbf449fa962f", "type": "Parameter", "name": "collection_name", "param_type": "str", "kind": "positional", "default": null, "position": 2}
{"id": "1d71d620d3f31fdcac2bb8cd1e01817773e2b663", "type": "Variable", "name": "chroma_client", "value": "vec_ops.chroma_client()", "value_type": "complex", "lineno": 48, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "fd41840cb18fcd408881da1044bc1efe2d3bd844", "type": "Variable", "name": "store", "value": "InMemoryStore()", "value_type": "complex", "lineno": 49, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "967a3d78902387b7c7a56a2e1654c0de3b0cb388", "type": "Variable", "name": "retriever_instance", "value": "Retriever.parent_child_retriever(Retriever, chroma_client=chroma_client, collection_name=collection_name, store=store)", "value_type": "complex", "lineno": 50, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "61c3fca9dad6594fdf48389968e3c0c972f0417e", "type": "Method", "name": "pipeline_create_embedding_in_collection", "qualified_name": "ParentChildPipeline.pipeline_create_embedding_in_collection", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "docs", "type": "List[Document]", "kind": "positional", "default": null, "position": 1}, {"name": "retriever_instance", "type": "BaseRetriever", "kind": "positional", "default": null, "position": 2}], "return_type": "None", "lineno": 55, "end_lineno": 63, "docstring": "Creates Embedding using OpenAI", "snippet": "    def pipeline_create_embedding_in_collection(self, docs: List[Document], retriever_instance: BaseRetriever) -> None:\n        \"\"\"\n        Creates Embedding using OpenAI\n        \"\"\"\n        try:\n            print(docs[:2])\n            retriever_instance.add_documents(docs)\n        except Exception as e:\n            raise e", "metrics": {"lines_of_code": 9, "complexity": 2, "num_parameters": 3, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "86f770d2acf1c1e32af246035a827bc68c1096f8", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "e4d986f8c49218f8cd6ac8aa9676c500cd53f1db", "type": "Parameter", "name": "docs", "param_type": "List[Document]", "kind": "positional", "default": null, "position": 1}
{"id": "69983618f452fcb0978d6ec65fcc6ae65ad35614", "type": "Parameter", "name": "retriever_instance", "param_type": "BaseRetriever", "kind": "positional", "default": null, "position": 2}
{"id": "efc4fcb8a3ec5cdbcf02e099fad808367d9ea593", "type": "Method", "name": "main_pipeline", "qualified_name": "ParentChildPipeline.main_pipeline", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}], "return_type": null, "lineno": 65, "end_lineno": 103, "docstring": "Main pipeline to invoke all of the rest of the private functions defined in the MainPipeline class to complete one cycle of complete end to end execution of the RAG application starting from loading pdf's from the database, updating its status, creating embedding if necessary, retrieving metadata by passing the metadata.json file, to QA chain.\n        ", "snippet": "    def main_pipeline(self):\n        \"\"\"Main pipeline to invoke all of the rest of the private functions defined in the MainPipeline class to complete one cycle of complete end to end execution of the RAG application starting from loading pdf's from the database, updating its status, creating embedding if necessary, retrieving metadata by passing the metadata.json file, to QA chain.\n        \"\"\"\n        # Getting the pdf file names by passing the media folder\n        files = get_files(file_dir=se", "metrics": {"lines_of_code": 39, "complexity": 2, "num_parameters": 1, "num_returns": 0, "num_branches": 1, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "5474554a108e5104d26c7dfe4a886f3a53fc695a", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "d57c3f14a9db4d425e6de9f0a3e7554bf0373cce", "type": "Variable", "name": "files", "value": "get_files(file_dir=self.docs_folder_path)", "value_type": "complex", "lineno": 69, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "1b469719ac4439e7080ea98c01b22b82c8ca1002", "type": "Variable", "name": "metadata_file", "value": "os.path.dirname(__file__) + '/metadata.json'", "value_type": "complex", "lineno": 72, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "562a330d51b43b10f714881f96ed9652f465319a", "type": "Variable", "name": "metadata", "value": "self.get_metadata_for_files(files, metadata_file=metadata_file)", "value_type": "complex", "lineno": 73, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "178a1a472a2fe2229b7f528b01f5b90ae685f90e", "type": "Variable", "name": "all_files_in_database", "value": "self.pipeline_load_docs_from_postgres()", "value_type": "complex", "lineno": 80, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "e24906db2eedfc047769f8e7fd775882f581026d", "type": "Variable", "name": "files_on_server", "value": "[file for file in all_files_in_database]", "value_type": "complex", "lineno": 81, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "252d6deb94c24f58351a4e1059421a54bdb57f31", "type": "Variable", "name": "all_loaded_files", "value": "self.pipeline_load_documents(all_files_in_database, metadata)", "value_type": "complex", "lineno": 87, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "d2112e68897d33f8b7f4b67505532340220f6e3e", "type": "Variable", "name": "retriever_instance", "value": "self.__pipeline_initialize_parent_child_retriever(vec_ops, self.collection_name)", "value_type": "complex", "lineno": 93, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "54db757eabaad271232ef49debff92103e5c7684", "type": "Variable", "name": "len_embeddings", "value": "self.pipeline_check_embeddings(iso_collection)", "value_type": "complex", "lineno": 96, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "52f5b81e25e03bf1e71410d061aa0000b0f4dc43", "type": "Variable", "name": "docs", "value": "[doc for docs in all_loaded_files for doc in docs]", "value_type": "complex", "lineno": 98, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "0fdd725d766e66dc89e6567aee47cfd388f44af7", "type": "Variable", "name": "parent", "value": "os.path.dirname(os.path.dirname(os.path.dirname(__file__)))", "value_type": "complex", "lineno": 106, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "bc3f7de85cff7ca493f3e66a4a2cfbdd94a70777", "type": "Variable", "name": "media_path", "value": "os.path.join(parent, 'media')", "value_type": "complex", "lineno": 107, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "9e66814d075bad7741b081213bfb7cf0eb81044e", "type": "Variable", "name": "mp", "value": "ParentChildPipeline(docs_folder_path=media_path)", "value_type": "complex", "lineno": 108, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "b5393f41eb6c2612b0e37ce592ced1b1b2977937", "type": "File", "name": "pipeline_base.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/pipelines/pipeline_base.py", "relpath": "src/pipelines/pipeline_base.py", "module": "src.pipelines.pipeline_base", "extension": ".py", "sha1": "d5ea34a6cb70896c8b4cd707339e1798425a1588", "lines_of_code": 450, "size_bytes": 20962, "language": "python", "encoding": "utf-8"}
{"id": "50d994c195df7db53cd4df097d5b0f2f23470234", "type": "Import", "name": "sys", "alias": null, "import_type": "direct", "lineno": 4, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "5c5765b0d4d8c35df2668168ced1721b59a3b969", "type": "Import", "name": "DataLoader", "module": "components.loader", "full_name": "components.loader.DataLoader", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 8, "is_stdlib": false}
{"id": "a3252ef19152ff68baf3606cc2c8edd55283ec71", "type": "Import", "name": "DBOps", "module": "components.database_ops", "full_name": "components.database_ops.DBOps", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 9, "is_stdlib": false}
{"id": "9f28dba9d16f626d06df84341c7dc9b71daa2120", "type": "Import", "name": "Transformer", "module": "components.transformer", "full_name": "components.transformer.Transformer", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 10, "is_stdlib": false}
{"id": "cf6d540189afa89c7d1a3fb9c386821d2a12e8a7", "type": "Import", "name": "ChromaOps", "module": "components.chroma_ops", "full_name": "components.chroma_ops.ChromaOps", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 11, "is_stdlib": false}
{"id": "2757b27b65d2d22226b5c9cd61c7a6db5b51ca43", "type": "Import", "name": "ChatMemory", "module": "components.memory", "full_name": "components.memory.ChatMemory", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 12, "is_stdlib": false}
{"id": "0ca36e75669d88226db5cb4946e9d170c869a7c3", "type": "Import", "name": "route_layer", "module": "components.semantic_guardrails", "full_name": "components.semantic_guardrails.route_layer", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 13, "is_stdlib": false}
{"id": "53608952b1c2a45ab39a7f55b011adc7f0d82fb5", "type": "Import", "name": "Metadata", "module": "components.metadata", "full_name": "components.metadata.Metadata", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 14, "is_stdlib": false}
{"id": "01a2e135ffdd24efb9eba642d580191b38f8df2c", "type": "Import", "name": "Chainer", "module": "components.chain", "full_name": "components.chain.Chainer", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 15, "is_stdlib": false}
{"id": "f809e7d459235ff34a228ccddfe1f6e481c4f495", "type": "Import", "name": "BaseRetriever", "module": "langchain.schema", "full_name": "langchain.schema.BaseRetriever", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 17, "is_stdlib": false}
{"id": "2927d28da155a7e72a1db2ee292349ab18b455b2", "type": "Import", "name": "BaseChatMemory", "module": "langchain.memory.chat_memory", "full_name": "langchain.memory.chat_memory.BaseChatMemory", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 18, "is_stdlib": false}
{"id": "5f5a5442bc79ebc3c2326abcb9970ea95a864332", "type": "Import", "name": "ChatOpenAI", "module": "langchain_openai", "full_name": "langchain_openai.ChatOpenAI", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 19, "is_stdlib": false}
{"id": "ffb7fd70f451cafed5adf7f49e754314aebc52af", "type": "Import", "name": "Document", "module": "langchain.docstore.document", "full_name": "langchain.docstore.document.Document", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 20, "is_stdlib": false}
{"id": "2272a9644b54088020d91a207d3e90f18f2a68dc", "type": "Import", "name": "Chain", "module": "langchain.chains.base", "full_name": "langchain.chains.base.Chain", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 21, "is_stdlib": false}
{"id": "410f2569304531da0a5c36e5dd9c7c60c078455f", "type": "Import", "name": "FlareChain", "module": "langchain.chains", "full_name": "langchain.chains.FlareChain", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 22, "is_stdlib": false}
{"id": "4159472bdeae96a67d4253e5adb5ca75581107f6", "type": "Import", "name": "CallbackHandler", "module": "langfuse.callback", "full_name": "langfuse.callback.CallbackHandler", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 23, "is_stdlib": false}
{"id": "32637bfe29784d1a5fe5df538da909eef1d3656d", "type": "Import", "name": "json", "alias": null, "import_type": "direct", "lineno": 25, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "6db032c5f47644455f63d8a56ad90419bba7f8d5", "type": "Import", "name": "os", "alias": null, "import_type": "direct", "lineno": 26, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "e21fb5af8b602171fc1d083a5e325c6efb7750c0", "type": "Import", "name": "httpx", "alias": null, "import_type": "direct", "lineno": 27, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "510ef5615a3e63a37e42eb6d71e62c2af2713804", "type": "Import", "name": "uuid", "alias": null, "import_type": "direct", "lineno": 28, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "1fad7fa939c8980aa3b0d308ac7fc6cc1bdaf8ab", "type": "Import", "name": "openai", "alias": null, "import_type": "direct", "lineno": 29, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "f6a63ea4368cdeac97fcaa01ad6b7e41e9e2e8b5", "type": "Import", "name": "Collection", "module": "chromadb.api.models.Collection", "full_name": "chromadb.api.models.Collection.Collection", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 31, "is_stdlib": false}
{"id": "63da18dc2bac0f18ed4c70cdb8b93e462f4d5b98", "type": "Import", "name": "EmbeddingFunction", "module": "chromadb.api.types", "full_name": "chromadb.api.types.EmbeddingFunction", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 32, "is_stdlib": false}
{"id": "c219d7431a667a5eba0e1154a2531a71044d2ad7", "type": "Import", "name": "Embeddable", "module": "chromadb.api.types", "full_name": "chromadb.api.types.Embeddable", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 32, "is_stdlib": false}
{"id": "1d44eda3ee4210aa6b4c75bf03a5b103ca43319d", "type": "Import", "name": "load_dotenv", "module": "dotenv", "full_name": "dotenv.load_dotenv", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 34, "is_stdlib": false}
{"id": "684ca014f599ba4eeff2f96b59bbadfb5c49d5c3", "type": "Import", "name": "List", "module": "typing", "full_name": "typing.List", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 35, "is_stdlib": true}
{"id": "1a8297798f1368e317cec31e6d650e9e54cbb59e", "type": "Import", "name": "Tuple", "module": "typing", "full_name": "typing.Tuple", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 35, "is_stdlib": true}
{"id": "242b5539bac9fe4ce5d4f5e56bcd547e66581760", "type": "Import", "name": "Union", "module": "typing", "full_name": "typing.Union", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 35, "is_stdlib": true}
{"id": "e11709656286385ebf5142bb7e710b51d84c6fdc", "type": "Import", "name": "Any", "module": "typing", "full_name": "typing.Any", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 35, "is_stdlib": true}
{"id": "3c650e729607eabcfca5964f41fba6edc63b6808", "type": "Import", "name": "Dict", "module": "typing", "full_name": "typing.Dict", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 35, "is_stdlib": true}
{"id": "459684abbcd1fb2f9dd817904ce6ddbece8911ec", "type": "Import", "name": "Optional", "module": "typing", "full_name": "typing.Optional", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 35, "is_stdlib": true}
{"id": "7230eed7da8126d77db4d2846be75bf60e5f6b50", "type": "Class", "name": "BasePipeline", "lineno": 40, "end_lineno": 449, "docstring": null, "snippet": "class BasePipeline:\n    def __init__(self, docs_folder_path: str) -> None: # docs_folder_path is the media folder\n        \"\"\"Initialize and check if the docs_folder_path exists\n\n        Args:\n            docs_folder_path (str): Media folder where all the pdf files are stored\n\n        Raises:\n            NotADirectoryError: Raised when the media folder doesn't exists\n            e: Any other exception occurred during connectivity with the postgres database\n...", "bases": [], "decorators": [], "num_methods": 14, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "bb082dd530b160bb6bbc24311c348098c6815936", "type": "Method", "name": "__init__", "qualified_name": "BasePipeline.__init__", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": true, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "docs_folder_path", "type": "str", "kind": "positional", "default": null, "position": 1}], "return_type": "None", "lineno": 41, "end_lineno": 59, "docstring": "Initialize and check if the docs_folder_path exists\n\nArgs:\n    docs_folder_path (str): Media folder where all the pdf files are stored\n\nRaises:\n    NotADirectoryError: Raised when the media folder doesn't exists\n    e: Any other exception occurred during connectivity with the postgres database", "snippet": "    def __init__(self, docs_folder_path: str) -> None: # docs_folder_path is the media folder\n        \"\"\"Initialize and check if the docs_folder_path exists\n\n        Args:\n            docs_folder_path (str): Media folder where all the pdf files are stored\n\n        Raises:\n            NotADirectoryError: Raised when the media folder doesn't exists\n            e: Any other exception occurred during connectivity with the postgres database\n        \"\"\"\n...", "metrics": {"lines_of_code": 19, "complexity": 3, "num_parameters": 2, "num_returns": 0, "num_branches": 1, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 2}}
{"id": "4e84aefcb4616721ae66db8a2e19ea17711a4d8c", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "a5c83470215ad3e7593133b98152c125d9d117b9", "type": "Parameter", "name": "docs_folder_path", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "caf8524bcb09c10ae187a69c965ca7fdc3103971", "type": "Method", "name": "pipeline_load_docs_into_postgres", "qualified_name": "BasePipeline.pipeline_load_docs_into_postgres", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "files", "type": "List[str]", "kind": "positional", "default": null, "position": 1}], "return_type": "List[str]", "lineno": 61, "end_lineno": 76, "docstring": "Loads files from a specific file directory into PostgreSQL database \nArgs:\n    files (List[str]): List of files path in the media directory\n\nRaises:\n    e: Raised if any occurred during writing to the postgres database\n\nReturns:\n    List[str]: List of files in the media directory", "snippet": "    def pipeline_load_docs_into_postgres(self, files: List[str]) -> List[str]:\n        \"\"\"Loads files from a specific file directory into PostgreSQL database \n        Args:\n            files (List[str]): List of files path in the media directory\n\n        Raises:\n            e: Raised if any occurred during writing to the postgres database\n\n        Returns:\n            List[str]: List of files in the media directory\n...", "metrics": {"lines_of_code": 16, "complexity": 3, "num_parameters": 2, "num_returns": 0, "num_branches": 0, "num_loops": 1, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 2}}
{"id": "3fcd13d7fcac61aaa8c9518a47459d803199b80d", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "8d15e4e14389c04f54a8a476d412f59619e23281", "type": "Parameter", "name": "files", "param_type": "List[str]", "kind": "positional", "default": null, "position": 1}
{"id": "a66994f3f5dfda932d9b56a5be31ed653a7978c8", "type": "Method", "name": "pipeline_load_docs_from_postgres", "qualified_name": "BasePipeline.pipeline_load_docs_from_postgres", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}], "return_type": "List[str]", "lineno": 78, "end_lineno": 93, "docstring": "Loading only those without LOADED status\n\nRaises:\n    e: Raised if any error occurred during reading of the file paths from the database\n\nReturns:\n    List[str]: Returns the path which are retrieved from the database", "snippet": "    def pipeline_load_docs_from_postgres(self) -> List[str]:\n        \"\"\"Loading only those without LOADED status\n\n        Raises:\n            e: Raised if any error occurred during reading of the file paths from the database\n\n        Returns:\n            List[str]: Returns the path which are retrieved from the database\n        \"\"\"\n        try:\n...", "metrics": {"lines_of_code": 16, "complexity": 2, "num_parameters": 1, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "f97363763076453fac39e01231e0b48b7096c75d", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "5c2c30c024b903acc1bc7461af10427af78036bc", "type": "Variable", "name": "all_files_in_database", "value": "self.db_ops.get_all_file_paths(conn=self.conn, table_name='information', file_path_col='name', loaded_flag=True, file_status_col='status')", "value_type": "complex", "lineno": 88, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "409211fb2318ea992a4f2d3b8e9ceeefd69f000d", "type": "Variable", "name": "all_files_in_database", "value": "[file_path for tpl in all_files_in_database for file_path in tpl]", "value_type": "complex", "lineno": 89, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "49eb7d2554a1f2e6c53913fe77e5b8754046ff03", "type": "Method", "name": "pipeline_update_file_status_postgres", "qualified_name": "BasePipeline.pipeline_update_file_status_postgres", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "files_on_server", "type": "List[str]", "kind": "positional", "default": null, "position": 1}], "return_type": "None", "lineno": 95, "end_lineno": 108, "docstring": "Update files status to LOADED in the postgres database\n\nArgs:\n    files_on_server (List[str]): Complete file path in the base server\n\nRaises:\n    e: Raised if any error occurred during interaction with the database", "snippet": "    def pipeline_update_file_status_postgres(self, files_on_server: List[str]) -> None:\n        \"\"\"Update files status to LOADED in the postgres database\n\n        Args:\n            files_on_server (List[str]): Complete file path in the base server\n\n        Raises:\n            e: Raised if any error occurred during interaction with the database\n        \"\"\"\n        try:\n...", "metrics": {"lines_of_code": 14, "complexity": 2, "num_parameters": 2, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "2dda30e9bfde4b632ec2b624ec805dac235c9884", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "9fa5d8e8c3ae4def8af89070d4ec2cf794817686", "type": "Parameter", "name": "files_on_server", "param_type": "List[str]", "kind": "positional", "default": null, "position": 1}
{"id": "0758d9459201469176e7a20b15d0a6b91d2493d5", "type": "Variable", "name": "conn", "value": "self.db_ops.connection()", "value_type": "complex", "lineno": 105, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "979c1281c212512281ff0eafc2a4da45736adabe", "type": "Method", "name": "pipeline_load_documents", "qualified_name": "BasePipeline.pipeline_load_documents", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "all_files_in_database", "type": "List[str]", "kind": "positional", "default": null, "position": 1}, {"name": "metadata", "type": "Dict[str, Metadata]", "kind": "positional", "default": "None", "position": 2}], "return_type": "List[Document]", "lineno": 110, "end_lineno": 137, "docstring": "Load Documents given the list of path to the files\n\nArgs:\n    all_files_in_database (List[str]): Complete files path in the server\n    metadata (Dict[str, Metadata], optional): _description_. Defaults to None.\n\nRaises:\n    e: Raised if any error occurred when reading the files passed\n\nReturns:\n    List[Document]: Returns the list of documents with metadata attached to each file", "snippet": "    def pipeline_load_documents(self, all_files_in_database: List[str], metadata: Dict[str, Metadata] = None) -> List[Document]:\n        \"\"\"Load Documents given the list of path to the files\n        \n        Args:\n            all_files_in_database (List[str]): Complete files path in the server\n            metadata (Dict[str, Metadata], optional): _description_. Defaults to None.\n\n        Raises:\n            e: Raised if any error occurred when reading the files passed\n\n...", "metrics": {"lines_of_code": 28, "complexity": 4, "num_parameters": 3, "num_returns": 1, "num_branches": 0, "num_loops": 2, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 3}}
{"id": "d5afec3362ca1e130d77f036571c811d33504bcb", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "2617e5af2e11453519d38316b3de5f4c30e2477d", "type": "Parameter", "name": "all_files_in_database", "param_type": "List[str]", "kind": "positional", "default": null, "position": 1}
{"id": "1e512dc68ec5e9e9717c797e2a4de6c71e1759ab", "type": "Parameter", "name": "metadata", "param_type": "Dict[str, Metadata]", "kind": "positional", "default": "None", "position": 2}
{"id": "f62009d7a9188d708264129511dfb6f7e300cfaf", "type": "Variable", "name": "all_loaded_files", "value": "[]", "value_type": "complex", "lineno": 125, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "f11bd964ffe6bea5d144c14a790c5985c6eebe3b", "type": "Variable", "name": "lc_pdf_loader", "value": "DataLoader()", "value_type": "complex", "lineno": 126, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "7717b352fc8cd012322900628e7dc31b725b52a0", "type": "Variable", "name": "media_path", "value": "os.path.join(self.docs_folder_path, _file)", "value_type": "complex", "lineno": 128, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "718e7f83cdc25f40046883ad1741e55f36e70f97", "type": "Variable", "name": "loaded", "value": "lc_pdf_loader.load_documents(media_path)", "value_type": "complex", "lineno": 129, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "f91ad77163c56947f6da0bea00626a1abaeaebc1", "type": "Method", "name": "pipeline_files_chunking_splitting", "qualified_name": "BasePipeline.pipeline_files_chunking_splitting", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "all_loaded_files", "type": "List[Document]", "kind": "positional", "default": null, "position": 1}], "return_type": "Tuple[List[List[str]], List[List[dict]]]", "lineno": 139, "end_lineno": 169, "docstring": "Do the chunking and splitting of the files\n\nArgs:\n    all_loaded_files (List[Document]): List of the loaded documents with the attached metadata\n\nRaises:\n    e: Raised if any error occurred during the chunking or splitting of the passed document\n\nReturns:\n    Tuple[List[List[str]], List[List[dict]]]: Returns the chunked files and metadata", "snippet": "    def pipeline_files_chunking_splitting(self, all_loaded_files: List[Document]) -> Tuple[List[List[str]], List[List[dict]]]:\n        \"\"\"Do the chunking and splitting of the files\n\n        Args:\n            all_loaded_files (List[Document]): List of the loaded documents with the attached metadata\n\n        Raises:\n            e: Raised if any error occurred during the chunking or splitting of the passed document\n\n        Returns:\n...", "metrics": {"lines_of_code": 31, "complexity": 4, "num_parameters": 2, "num_returns": 1, "num_branches": 0, "num_loops": 2, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 3}}
{"id": "85fb6cc793e8bee9303f0c5c875e221034d37810", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "5ea0c1e790ae80eeacefb6afb1dc32124e03dde3", "type": "Parameter", "name": "all_loaded_files", "param_type": "List[Document]", "kind": "positional", "default": null, "position": 1}
{"id": "73466bb83c0f07b97b527b5df8861bec40e49b2d", "type": "Variable", "name": "chunker", "value": "Transformer()", "value_type": "complex", "lineno": 152, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "a45d6fd20622d6ae539a5d8ae20abb6c8984f95e", "type": "Variable", "name": "chunked_files", "value": "[]", "value_type": "complex", "lineno": 153, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "d17abeee60d7fef63d150241d3fc812f73ea82d6", "type": "Variable", "name": "chunked_metadata", "value": "[]", "value_type": "complex", "lineno": 154, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "7d448423637a8eb6f29261d59b4631d61e8c904a", "type": "Variable", "name": "file_chunked_contents", "value": "[]", "value_type": "complex", "lineno": 156, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "1498a1c5c808538a22a6ccc544f8f6b2fd7bea48", "type": "Variable", "name": "file_chunked_metadata", "value": "[]", "value_type": "complex", "lineno": 157, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "6320df25b4a87e8e61ae6017c0ea6d2230c86397", "type": "Variable", "name": "content", "value": "page.page_content", "value_type": "complex", "lineno": 159, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "235f5b3041599cf042a5975c3908a4d016e87868", "type": "Variable", "name": "metadata", "value": "page.metadata", "value_type": "complex", "lineno": 160, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "c59879341350d18bff67b533339c3123a2011b22", "type": "Variable", "name": "chunked_content", "value": "chunker.recursive_char_text_chunker_tiktoken(text=content, chunk_size=100, chunk_overlap=0)", "value_type": "complex", "lineno": 161, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "1b53fabe4d54b97b4336ba25359c39d7b4fed5d5", "type": "Method", "name": "pipeline_chroma_initialize_collection", "qualified_name": "BasePipeline.pipeline_chroma_initialize_collection", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "collection_name", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "embedding_function", "type": "Optional[EmbeddingFunction[Embeddable]]", "kind": "positional", "default": "None", "position": 2}], "return_type": "Tuple[ChromaOps, Collection]", "lineno": 171, "end_lineno": 192, "docstring": "Creates or Get the collection\n\nArgs:\n    collection_name (str): Name of the collection you want to use to create or get the instance of after creating\n\nRaises:\n    e: Raised if any error occurred during the creation of the collection\n\nReturns:\n    Tuple[ChromaOps, Collection, str]: Returns the Chroma Operator and created Collection instance", "snippet": "    def pipeline_chroma_initialize_collection(self, collection_name: str, embedding_function: Optional[EmbeddingFunction[Embeddable]] = None) -> Tuple[ChromaOps, Collection]:\n        \"\"\"Creates or Get the collection\n\n        Args:\n            collection_name (str): Name of the collection you want to use to create or get the instance of after creating\n\n        Raises:\n            e: Raised if any error occurred during the creation of the collection\n\n        Returns:\n...", "metrics": {"lines_of_code": 22, "complexity": 2, "num_parameters": 3, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "8d15e85be52b4ecfe2f79558d831fc5888b322e1", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "3e7467337fba82c9c3012d80b146f8a1d69ead19", "type": "Parameter", "name": "collection_name", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "f6d32c1584de7bc54a0549550440e450764db5c2", "type": "Parameter", "name": "embedding_function", "param_type": "Optional[EmbeddingFunction[Embeddable]]", "kind": "positional", "default": "None", "position": 2}
{"id": "eb1ad487d9d56dac45d75061954e22974c96874d", "type": "Variable", "name": "vec_ops", "value": "ChromaOps()", "value_type": "complex", "lineno": 184, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "7ead1b69550d7c57284d7a193f6047fecd7b1dba", "type": "Variable", "name": "iso_collection", "value": "vec_ops.get_or_create_collection(name=collection_name, embedding_function=embedding_function, metadata={'hnsw:space': 'cosine'})", "value_type": "complex", "lineno": 185, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "b8bd9a60eb60585bee8690a9934c1d4730c67531", "type": "Method", "name": "pipeline_create_embedding_in_collection", "qualified_name": "BasePipeline.pipeline_create_embedding_in_collection", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "chunked_files", "type": "List[List[str]]", "kind": "positional", "default": null, "position": 1}, {"name": "chunked_metadata", "type": "List[List[dict]]", "kind": "positional", "default": null, "position": 2}, {"name": "iso_collection", "type": "Collection", "kind": "positional", "default": null, "position": 3}, {"name": "embeddings", "type": "Optional[List[List[float]]]", "kind": "positional", "default": "None", "position": 4}], "return_type": "None", "lineno": 194, "end_lineno": 235, "docstring": "Creates Embedding using OpenAI\n\nArgs:\n    chunked_files (List[List[str]]): Given the chunked documents for each file\n    chunked_metadata (List[List[dict]]): Metadata for each of the item of the document\n    iso_collection (Collection): Instance of the collection to save the embeddings in ", "snippet": "    def pipeline_create_embedding_in_collection(self, chunked_files: List[List[str]], chunked_metadata: List[List[dict]], iso_collection: Collection, embeddings: Optional[List[List[float]]] = None) -> None:\n        \"\"\"Creates Embedding using OpenAI\n\n        Args:\n            chunked_files (List[List[str]]): Given the chunked documents for each file\n            chunked_metadata (List[List[dict]]): Metadata for each of the item of the document\n            iso_collection (Collection): Instance of t", "metrics": {"lines_of_code": 42, "complexity": 14, "num_parameters": 5, "num_returns": 0, "num_branches": 5, "num_loops": 1, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 3}}
{"id": "5c34efeee6f182c675765f4616aea3d3c8966c26", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "3d4b4f086e26e6c3e9fd6d6cfab7aa8cba42d293", "type": "Parameter", "name": "chunked_files", "param_type": "List[List[str]]", "kind": "positional", "default": null, "position": 1}
{"id": "7c1d9312b56803b0ab69f0602a853e0c444c6781", "type": "Parameter", "name": "chunked_metadata", "param_type": "List[List[dict]]", "kind": "positional", "default": null, "position": 2}
{"id": "5408bc8ab94998b47360b118fcc329f53ba3c0ec", "type": "Parameter", "name": "iso_collection", "param_type": "Collection", "kind": "positional", "default": null, "position": 3}
{"id": "7ffbf1a795c5ba37c8080e4a862bef6d5a1bd8f5", "type": "Parameter", "name": "embeddings", "param_type": "Optional[List[List[float]]]", "kind": "positional", "default": "None", "position": 4}
{"id": "229e63fe4f8aa0af6a9eb0489ac1efa3a5ca7b05", "type": "Variable", "name": "documents", "value": "[doc for docs in chunked_files for doc in docs]", "value_type": "complex", "lineno": 205, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "d3a4e4fd3b31797c72dd4edcd424a9b3622df53a", "type": "Variable", "name": "metadatas", "value": "[meta for metadatas in chunked_metadata for meta in metadatas]", "value_type": "complex", "lineno": 206, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "b0d1b8c1ec412069b88c76c86df01a56040b55d3", "type": "Variable", "name": "ids", "value": "[f'doc_{i} ' for i in range(len(documents))]", "value_type": "complex", "lineno": 209, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "3eec8c8c0d4d29b5322bbe8e01c3bcf62e15e2b8", "type": "Method", "name": "pipeline_check_embeddings", "qualified_name": "BasePipeline.pipeline_check_embeddings", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "iso_collection", "type": "Collection", "kind": "positional", "default": null, "position": 1}], "return_type": "int", "lineno": 237, "end_lineno": 250, "docstring": "Checks if the embeddings are retrieved\n\nArgs:\n    iso_collection (Collection): Instance of the collection we want to check the embeddings for\n\nReturns:\n    int: Return the number of embedding vector or 0 if no embedding exists in the passed instance of collection", "snippet": "    def pipeline_check_embeddings(self, iso_collection: Collection) -> int:\n        \"\"\"Checks if the embeddings are retrieved\n\n        Args:\n            iso_collection (Collection): Instance of the collection we want to check the embeddings for\n\n        Returns:\n            int: Return the number of embedding vector or 0 if no embedding exists in the passed instance of collection\n        \"\"\"\n        try:\n...", "metrics": {"lines_of_code": 14, "complexity": 2, "num_parameters": 2, "num_returns": 2, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "33b7f25797b1cdb898bb4d87616a5694937216d8", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "0c6577a05868e7108ecbd58b626af380c6a9679d", "type": "Parameter", "name": "iso_collection", "param_type": "Collection", "kind": "positional", "default": null, "position": 1}
{"id": "956b440a18cab6a2df234341e8e524d1b8e3f5a8", "type": "Variable", "name": "retrieved_embeds", "value": "iso_collection.peek(limit=100000)", "value_type": "complex", "lineno": 247, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "efecb44d093f7018cefbf5f498c6321e23580d85", "type": "Method", "name": "pipeline_setup_LLM", "qualified_name": "BasePipeline.pipeline_setup_LLM", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "retriever_instance", "type": "BaseRetriever", "kind": "positional", "default": null, "position": 1}, {"name": "use_flare", "type": "bool", "kind": "positional", "default": "False", "position": 2}], "return_type": "Tuple[BaseChatMemory, Chain]", "lineno": 252, "end_lineno": 276, "docstring": "Setup LLM and QA Chain", "snippet": "    def pipeline_setup_LLM(self, retriever_instance: BaseRetriever, use_flare: bool = False) -> Tuple[BaseChatMemory, Chain]:\n        \"\"\"\n        Setup LLM and QA Chain\n        \"\"\"\n        try:\n            # Setup LLM and QA chain; set temperature low to keep hallucinations in check\n            LLM = ChatOpenAI(model_name=\"gpt-3.5-turbo-0125\", temperature=0, streaming=False)\n\n            # Retriever : BaseRetrieval with compression\n            retriever_obj = retriever_instance \n...", "metrics": {"lines_of_code": 25, "complexity": 2, "num_parameters": 3, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "44e7470b5ae5e6115b080581ac4640ea9af83d35", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "a0f2451267b2608e605f7195c7ab8f3ba92933c9", "type": "Parameter", "name": "retriever_instance", "param_type": "BaseRetriever", "kind": "positional", "default": null, "position": 1}
{"id": "b9acee9896c6c44d249057ed89a002e66adc99ac", "type": "Parameter", "name": "use_flare", "param_type": "bool", "kind": "positional", "default": "False", "position": 2}
{"id": "5407fd2ff2ae339965deced350d20e4f5f868d15", "type": "Variable", "name": "LLM", "value": "ChatOpenAI(model_name='gpt-3.5-turbo-0125', temperature=0, streaming=False)", "value_type": "complex", "lineno": 258, "is_global": false, "is_constant": true, "is_private": false, "scope": "local"}
{"id": "6af1fd911255a6cd586bd439812c128879eecfa0", "type": "Variable", "name": "retriever_obj", "value": "retriever_instance", "value_type": "complex", "lineno": 261, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "3839a60a13d207ba8408f079dcfc84975b005c3a", "type": "Variable", "name": "mem_instance", "value": "ChatMemory()", "value_type": "complex", "lineno": 264, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "12405819f9c134825653d7f7c6b51e0ea75e11dd", "type": "Variable", "name": "MEMORY", "value": "mem_instance.init_conv_buf_memory()", "value_type": "complex", "lineno": 265, "is_global": false, "is_constant": true, "is_private": false, "scope": "local"}
{"id": "3665d3622b236521aca2ad6d7068dab4ab24098b", "type": "Variable", "name": "chn_instance", "value": "Chainer()", "value_type": "complex", "lineno": 268, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "67e56a05a212e5b303089c5ddcd31a800bf53aa5", "type": "Variable", "name": "conv_chain", "value": "chn_instance.retrieval_chain(retriever_obj, MEMORY, LLM, use_flare=use_flare)", "value_type": "complex", "lineno": 269, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "bced5b8eee4f5f71262c0b6f48dc9e389cf95053", "type": "Method", "name": "pipeline_qa_cycle", "qualified_name": "BasePipeline.pipeline_qa_cycle", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "MEMORY", "type": "BaseChatMemory", "kind": "positional", "default": null, "position": 1}, {"name": "conv_chain", "type": "Chain", "kind": "positional", "default": null, "position": 2}, {"name": "langfuse_handler", "type": "Union[None, CallbackHandler]", "kind": "positional", "default": "None", "position": 3}], "return_type": "None", "lineno": 278, "end_lineno": 324, "docstring": "Question answering with the bot\n\nArgs:\n    MEMORY (BaseChatMemory): Memory module instance which is used to passed the summary of, or plain documents of the previous chat to the LLM for later conversation\n    conv_chain (Chain): Chain instance to be passed to run the LLM cycle\n    langfuse_handler (Union[None, CallbackHandler], optional): Singleton instance of the langfuse handler passed to retrieve the tracing for the LLM calls. Defaults to None.\n\nRaises:\n    e: Raised if any error occurred during the LLM calls.", "snippet": "    def pipeline_qa_cycle(self, MEMORY: BaseChatMemory, conv_chain: Chain, langfuse_handler: Union[None, CallbackHandler] = None) -> None: \n        \"\"\"Question answering with the bot\n\n        Args:\n            MEMORY (BaseChatMemory): Memory module instance which is used to passed the summary of, or plain documents of the previous chat to the LLM for later conversation\n            conv_chain (Chain): Chain instance to be passed to run the LLM cycle\n            langfuse_handler (Union[None, Callb", "metrics": {"lines_of_code": 47, "complexity": 7, "num_parameters": 4, "num_returns": 1, "num_branches": 3, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 2}}
{"id": "e8ae6b4a09eb48a146367e317e3303f10b097321", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "38dcd93b7b1511a3be1bbbfbc39d70017fd745c1", "type": "Parameter", "name": "MEMORY", "param_type": "BaseChatMemory", "kind": "positional", "default": null, "position": 1}
{"id": "7f77010a72981d08794b092b87a0cf8cc5633cbc", "type": "Parameter", "name": "conv_chain", "param_type": "Chain", "kind": "positional", "default": null, "position": 2}
{"id": "05e0376bec7e7e6e95934f51aa850071f680916d", "type": "Parameter", "name": "langfuse_handler", "param_type": "Union[None, CallbackHandler]", "kind": "positional", "default": "None", "position": 3}
{"id": "699e6dd462afbcd700517f3d7883bcadc9b8b314", "type": "Variable", "name": "user_query", "value": "What is ESG?", "value_type": "str", "lineno": 291, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "2f4bd9c5c41681ead93a6913738e68fdad5c8b29", "type": "Variable", "name": "conversation_type", "value": "self.__get_topic_from_query(user_query)", "value_type": "complex", "lineno": 293, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "718a5b0c18e666b5c587e5cfbad36b279aef66eb", "type": "Variable", "name": "params", "value": "{'user_input': user_query}", "value_type": "complex", "lineno": 299, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "43745c378b2f81bb5e1f30cdb21316bfd940ffda", "type": "Variable", "name": "params", "value": "{'question': user_query, 'chat_history': MEMORY.chat_memory.messages}", "value_type": "complex", "lineno": 301, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "41c4700b2896ee3a3cc6bc042aea9cb54a25c6c7", "type": "Variable", "name": "lang_response", "value": "conv_chain.invoke(params)", "value_type": "complex", "lineno": 308, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "bd46dc3c69609be23856eaa30b6e9abd0f0409cd", "type": "Variable", "name": "lang_response", "value": "conv_chain.invoke(params, config={'callbacks': [langfuse_handler]})", "value_type": "complex", "lineno": 310, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "9ed3db28099c9349d447818ecc506d36ca584836", "type": "Method", "name": "get_metadata_for_files", "qualified_name": "BasePipeline.get_metadata_for_files", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "files", "type": "List[str]", "kind": "positional", "default": null, "position": 1}, {"name": "kwargs", "type": "Any", "kind": "kwarg", "default": null, "position": 2}], "return_type": "Dict[str, Metadata]", "lineno": 326, "end_lineno": 408, "docstring": "Return metadata for each file either taken from user input or provided through code (hardcoded) or passed json file for metadata for each file\n\nUsage:\n\n    .. code-block:: python\n\n        hardcoded_metadata = {\n            \"file1.pdf\": { # relative path\n                \"standard_title\": \"Example Standard\",\n                \"publication_date\": \"2024-05-24\",\n                \"standard_abstract\": \"This is an example abstract.\",\n                \"standard_edition\": \"First Edition\",\n                \"standard_reference_number\": \"REF123\",\n                \"related_standards\": [\"ISO:14001\", \"ISO:9001\"],\n                \"authorizing_body\": \"ISO\",\n                \"revision_history\": [\"ISO:14001\"]\n                }\n        }\n        metadata_file = \"metadata.json\"\n        # Example metadata.json\n        '''\n        {\n            \"file2.pdf\": { # relative path\n                \"standard_title\": \"Example Standard\",\n                \"publication_date\": \"2024-05-24\",\n                \"standard_abstract\": \"This is an example abstract.\",\n                \"standard_edition\": \"First Edition\",\n                \"standard_reference_number\": \"REF123\",\n                \"related_standards\": [\"ISO:14001\", \"ISO:9001\"],\n                \"authorizing_body\": \"ISO\",\n                \"revision_history\": [\"ISO:14001\"]\n            }\n        }\n        '''\n        files = [\"file1.pdf\", \"file2.pdf\", \"file3.pdf\"]\n        metadata = self.get_metadata_for_files(files, hardcoded_metadata=hardcoded_metadata, metadata_file=metadata_file)", "snippet": "    def get_metadata_for_files(self, files: List[str], **kwargs: Any) -> Dict[str, Metadata]:\n        \"\"\"\n        Return metadata for each file either taken from user input or provided through code (hardcoded) or passed json file for metadata for each file\n        \n        Usage:\n        \n            .. code-block:: python\n\n                hardcoded_metadata = {\n                    \"file1.pdf\": { # relative path\n...", "metrics": {"lines_of_code": 83, "complexity": 8, "num_parameters": 2, "num_returns": 1, "num_branches": 3, "num_loops": 3, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 3}}
{"id": "26207ae7c48c6ed6dfe3680825b853cdb7c469b6", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "0fc8547af1a54eed4c8bb5e59ff2b49a11d3b6b3", "type": "Parameter", "name": "files", "param_type": "List[str]", "kind": "positional", "default": null, "position": 1}
{"id": "9c9dfff22f2c5692a5718871cac467cc43ad9994", "type": "Parameter", "name": "kwargs", "param_type": "Any", "kind": "kwarg", "default": null, "position": 2}
{"id": "021116e951f4ad22d71708a15b376d0fd187956e", "type": "Variable", "name": "metadata", "value": "{}", "value_type": "complex", "lineno": 366, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "4d55f53bacf6b8f08b5cd77460cf8daab6511786", "type": "Variable", "name": "hardcoded_metadata", "value": "kwargs.get('hardcoded_metadata', {})", "value_type": "complex", "lineno": 369, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "19b0a77737cf1ee17cc9ca0fa50b0e2fe4930851", "type": "Variable", "name": "metadata_file", "value": "kwargs.get('metadata_file', None)", "value_type": "complex", "lineno": 370, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "8dd043624bd5430c4eedc6690ff92bd424d59aeb", "type": "Variable", "name": "file_metadata", "value": "json.load(f)", "value_type": "complex", "lineno": 375, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "4dd55cd85b22d50268f146390cf5f56647490369", "type": "Variable", "name": "standard_number", "value": "input(f'Enter standard_number for {file}: ')", "value_type": "complex", "lineno": 390, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "c9ab87b76eb128d109d9fe271cc7be985eedd18b", "type": "Variable", "name": "standard_title", "value": "input(f'Enter standard_title for {file}: ')", "value_type": "complex", "lineno": 391, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "796a9d0a92b767f4eb5693e554a846fa048dea50", "type": "Variable", "name": "standard_abstract", "value": "input(f'Enter standard_abstract for {file}: ')", "value_type": "complex", "lineno": 392, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "a7ca9a204127768da552a28ab5d41ee54eed9d39", "type": "Variable", "name": "publication_date", "value": "input(f'Enter publication_date for {file}: ')", "value_type": "complex", "lineno": 393, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "45b2711b77feef8df29cedc6b416f18a8e681bcf", "type": "Variable", "name": "standard_edition", "value": "input(f'Enter standard_edition for {file}: ')", "value_type": "complex", "lineno": 394, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "1c09a7db9f7fc2da1b92e6c533525497176b6002", "type": "Variable", "name": "standard_reference_no", "value": "input(f'Enter standard_reference_no for {file}: ')", "value_type": "complex", "lineno": 395, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "c319dde5ce602257a49c14042127ebfd43fd97bb", "type": "Variable", "name": "related_standards", "value": "input(f'Enter related_standards for {file} separated by space: ')", "value_type": "complex", "lineno": 396, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "d310d0e7812399ef51e70b96983eb52e8e0c8ffe", "type": "Variable", "name": "related_standards", "value": "list(map(str, related_standards.split()))", "value_type": "complex", "lineno": 397, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "233e04f54296e9fc0472fcab74665953c524acbd", "type": "Variable", "name": "authorizing_body", "value": "input(f'Enter authorizing_body for {file}: ')", "value_type": "complex", "lineno": 398, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "4a86b2f4f14ecaaaad09c7bca39e81d773d927dd", "type": "Variable", "name": "revision_history", "value": "input(f'Enter revision_history for {file} separated by space: ')", "value_type": "complex", "lineno": 399, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "f03b954f8561361c35021c1a026a8af2b34bc083", "type": "Variable", "name": "revision_history", "value": "list(map(str, revision_history.split()))", "value_type": "complex", "lineno": 400, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "852b8d0f27303b5bf07bc34cfd18ebbe7c6a7a36", "type": "Method", "name": "__get_topic_from_query", "qualified_name": "BasePipeline.__get_topic_from_query", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "query", "type": "str", "kind": "positional", "default": null, "position": 1}], "return_type": "Union[None, str]", "lineno": 410, "end_lineno": 419, "docstring": "Return the type of conversation by passing the user query\n\nArgs:\n    query (str): User query to pass to the LLM\n\nReturns:\n    Union[None, str]: Return None means that class is not being defined in the route_layer or str which means that the class is defined in the route_layer means that we wouldn't want to answer the query", "snippet": "    def __get_topic_from_query(self, query: str) -> Union[None, str]:\n        \"\"\"Return the type of conversation by passing the user query\n\n        Args:\n            query (str): User query to pass to the LLM\n\n        Returns:\n            Union[None, str]: Return None means that class is not being defined in the route_layer or str which means that the class is defined in the route_layer means that we wouldn't want to answer the query\n        \"\"\"\n        return route_layer(query).name", "metrics": {"lines_of_code": 10, "complexity": 1, "num_parameters": 2, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 0}}
{"id": "7f553d0e4e3c48ad0f3aece93e29c7fe3c775ed8", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "00aa4a42802ceb45901f80b3b8709d95b87a9714", "type": "Parameter", "name": "query", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "53a53baf8a4028540a09717fd4a5919f4e0fcbb9", "type": "Method", "name": "__generate_unique_references", "qualified_name": "BasePipeline.__generate_unique_references", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "docs", "type": "List[Document]", "kind": "positional", "default": null, "position": 1}], "return_type": "str", "lineno": 421, "end_lineno": 449, "docstring": "_summary_\n\nArgs:\n    docs (List[Document]): List of the source documents retrieved when LLM answers\n\nReturns:\n    str: Generated string which is the format for the references", "snippet": "    def __generate_unique_references(self, docs: List[Document]) -> str:\n        \"\"\"_summary_\n\n        Args:\n            docs (List[Document]): List of the source documents retrieved when LLM answers\n\n        Returns:\n            str: Generated string which is the format for the references\n        \"\"\"\n        unique_references = set()\n...", "metrics": {"lines_of_code": 29, "complexity": 2, "num_parameters": 2, "num_returns": 1, "num_branches": 0, "num_loops": 1, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "145532df2841c49cfd5d111864cccd3dcfbba4a3", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "9ef718023fb99882dc1179cc38cf9a11571b4857", "type": "Parameter", "name": "docs", "param_type": "List[Document]", "kind": "positional", "default": null, "position": 1}
{"id": "e71065f73286cf933f1c79fb2aaa3519a05c2f61", "type": "Variable", "name": "unique_references", "value": "set()", "value_type": "complex", "lineno": 430, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "dda42c09b96c78277f5f183c6093dce704c74140", "type": "Variable", "name": "metadata", "value": "doc.metadata", "value_type": "complex", "lineno": 432, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "3430aee7ba0eb3be5cd97baa0018bb932b11b05a", "type": "Variable", "name": "ref", "value": "f\"Author: {metadata.get('author', 'N/A')}\\nAuthorizing Body: {metadata.get('authorizing_body', 'N/A')}\\nFile Path: {metadata.get('file_path', 'N/A')}\\nPage: {metadata.get('page', 'N/A')}\\nPublication ", "value_type": "complex", "lineno": 433, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "25dd69ec615e9d650d93ed150c5000d9e4d26f6e", "type": "File", "name": "pipeline_self_query.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/pipelines/pipeline_self_query.py", "relpath": "src/pipelines/pipeline_self_query.py", "module": "src.pipelines.pipeline_self_query", "extension": ".py", "sha1": "cd8996ee8e36007e3a24d9885c8c1cd388857940", "lines_of_code": 274, "size_bytes": 11353, "language": "python", "encoding": "utf-8"}
{"id": "3b7975fc9e86db0381cb48c435dee0252d11bdc1", "type": "Import", "name": "sys", "alias": null, "import_type": "direct", "lineno": 4, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "2af23cf8798b1ac876dc99ded57c803b9e7a5a69", "type": "Import", "name": "get_files", "module": "components.file_reader", "full_name": "components.file_reader.get_files", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 8, "is_stdlib": false}
{"id": "f5cd4ca23ee9ecf77a11b1240daea41bac2d487c", "type": "Import", "name": "ChromaOps", "module": "components.chroma_ops", "full_name": "components.chroma_ops.ChromaOps", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 9, "is_stdlib": false}
{"id": "7409252ea0cbf7382e40644a717a3b2b8b2f3878", "type": "Import", "name": "Retriever", "module": "components.retrieve", "full_name": "components.retrieve.Retriever", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 10, "is_stdlib": false}
{"id": "e8ff393360ad87dcca3e8fd9bc590d805a2db801", "type": "Import", "name": "Embedder", "module": "components.embedder", "full_name": "components.embedder.Embedder", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 11, "is_stdlib": false}
{"id": "d38101faab79f1e3229cef64b234c5fbf3090b84", "type": "Import", "name": "BasePipeline", "module": "pipeline_base", "full_name": "pipeline_base.BasePipeline", "alias": null, "import_type": "from", "level": 1, "is_relative": true, "lineno": 13, "is_stdlib": false}
{"id": "9b7829c79c156e51238afd17afa18b49158b2631", "type": "Import", "name": "AttributeInfo", "module": "langchain.chains.query_constructor.schema", "full_name": "langchain.chains.query_constructor.schema.AttributeInfo", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 15, "is_stdlib": false}
{"id": "4d691dc5144c06fe2ca72d604dd169343513f0a2", "type": "Import", "name": "BaseRetriever", "module": "langchain.schema", "full_name": "langchain.schema.BaseRetriever", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 16, "is_stdlib": false}
{"id": "6e5dc56fd6c95a25eae38b5d6b88d0de475d64ed", "type": "Import", "name": "CallbackHandler", "module": "langfuse.callback", "full_name": "langfuse.callback.CallbackHandler", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 17, "is_stdlib": false}
{"id": "d5e4985994db67b8ef54445b6030ad35f0c90907", "type": "Import", "name": "os", "alias": null, "import_type": "direct", "lineno": 19, "is_stdlib": true, "is_relative": false, "level": 0}
{"id": "c44282eadd912f5db84041e0d4f5a0e759850e0e", "type": "Import", "name": "uuid", "alias": null, "import_type": "direct", "lineno": 20, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "1d1e2b584bf0f4d29826bffbfc049ae144f4d9cf", "type": "Import", "name": "openai", "alias": null, "import_type": "direct", "lineno": 21, "is_stdlib": false, "is_relative": false, "level": 0}
{"id": "e18bc412fe781a769f5361dbe2e12d4d250434d8", "type": "Import", "name": "load_dotenv", "module": "dotenv", "full_name": "dotenv.load_dotenv", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 23, "is_stdlib": false}
{"id": "401a06461105771f4de4b515ac1cadeaff7fee79", "type": "Import", "name": "List", "module": "typing", "full_name": "typing.List", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 24, "is_stdlib": true}
{"id": "f85f7a7e41f6d19bd4b5d5fe56166406075325a6", "type": "Import", "name": "Union", "module": "typing", "full_name": "typing.Union", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 24, "is_stdlib": true}
{"id": "839a3a84c7b88441d0a792e48b50e7522eb2a593", "type": "Import", "name": "Collection", "module": "chromadb.api.models.Collection", "full_name": "chromadb.api.models.Collection.Collection", "alias": null, "import_type": "from", "level": 0, "is_relative": false, "lineno": 25, "is_stdlib": false}
{"id": "f5e0b0f082a83c362bff86ac147bf65c330bedc5", "type": "Variable", "name": "metadata_field_info", "value": "[AttributeInfo(name='source', description='Source path of the PDF file', type='string'), AttributeInfo(name='file_path', description='File path of the PDF file', type='string'), AttributeInfo(name='pa", "value_type": "complex", "lineno": 30, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "2ddb2cc504459b5a1c5d4af0dd6f9ab865611010", "type": "Variable", "name": "document_content_description", "value": "\nThese document contains information about the Standards and Guidelines\n", "value_type": "str", "lineno": 168, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "de1cb5ab38e5bd115b9d0282d94dff6ec4a78604", "type": "Class", "name": "SelfQueryPipeline", "lineno": 172, "end_lineno": 267, "docstring": null, "snippet": "class SelfQueryPipeline(BasePipeline):\n\n    def __init__(self, docs_folder_path: str, langfuse_handler: Union[None, CallbackHandler] = None, use_flare: bool = False, collection_name: str = 'iso-standards') -> None:\n        \"\"\"Constructor\n\n        Args:\n            docs_folder_path (str): Media folder where all the pdf's are stored\n            langfuse_handler (Union[None, CallbackHandler], optional): Singleton instance of Langfuse handler to trace the LLM calls. Defaults to None.\n            use", "bases": ["BasePipeline"], "decorators": [], "num_methods": 4, "num_class_vars": 0, "is_private": false, "is_abstract": false}
{"id": "1d2311928b9860b1812bf9e20da78bd83880fab2", "type": "Method", "name": "__init__", "qualified_name": "SelfQueryPipeline.__init__", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": true, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "docs_folder_path", "type": "str", "kind": "positional", "default": null, "position": 1}, {"name": "langfuse_handler", "type": "Union[None, CallbackHandler]", "kind": "positional", "default": "None", "position": 2}, {"name": "use_flare", "type": "bool", "kind": "positional", "default": "False", "position": 3}, {"name": "collection_name", "type": "str", "kind": "positional", "default": "'iso-standards'", "position": 4}], "return_type": "None", "lineno": 174, "end_lineno": 186, "docstring": "Constructor\n\nArgs:\n    docs_folder_path (str): Media folder where all the pdf's are stored\n    langfuse_handler (Union[None, CallbackHandler], optional): Singleton instance of Langfuse handler to trace the LLM calls. Defaults to None.\n    use_flare (bool, optional): Boolean check if want to use flare chain instead of Conversational Chain. Defaults to False.\n    collection_name (str, optional): Name of the collection you want to create or get. Defaults to 'iso-standards'.", "snippet": "    def __init__(self, docs_folder_path: str, langfuse_handler: Union[None, CallbackHandler] = None, use_flare: bool = False, collection_name: str = 'iso-standards') -> None:\n        \"\"\"Constructor\n\n        Args:\n            docs_folder_path (str): Media folder where all the pdf's are stored\n            langfuse_handler (Union[None, CallbackHandler], optional): Singleton instance of Langfuse handler to trace the LLM calls. Defaults to None.\n            use_flare (bool, optional): Boolean check i", "metrics": {"lines_of_code": 13, "complexity": 1, "num_parameters": 5, "num_returns": 0, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 0}}
{"id": "5f48f7bc40b3adf66bf2ec8111243b4b4b2731bc", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "b796571b3cfd9dcbb0e82d7a1bf717289a7b790d", "type": "Parameter", "name": "docs_folder_path", "param_type": "str", "kind": "positional", "default": null, "position": 1}
{"id": "0f40296d1c643cae455b022036f31341a6e2a2a8", "type": "Parameter", "name": "langfuse_handler", "param_type": "Union[None, CallbackHandler]", "kind": "positional", "default": "None", "position": 2}
{"id": "f9cdaf679385f6ca1d8e196ccf7a4f26bb0a795f", "type": "Parameter", "name": "use_flare", "param_type": "bool", "kind": "positional", "default": "False", "position": 3}
{"id": "330bd839a9a660efc257b4e23f4dc9ffc5f91ad9", "type": "Parameter", "name": "collection_name", "param_type": "str", "kind": "positional", "default": "'iso-standards'", "position": 4}
{"id": "30231c6a2d15dd5d9ee113ecb592b6fc71b46212", "type": "Method", "name": "__pipeline_initialize_self_query_retriever", "qualified_name": "SelfQueryPipeline.__pipeline_initialize_self_query_retriever", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "vec_ops", "type": "ChromaOps", "kind": "positional", "default": null, "position": 1}, {"name": "collection_name", "type": "str", "kind": "positional", "default": null, "position": 2}, {"name": "document_content_description", "type": "str", "kind": "positional", "default": null, "position": 3}, {"name": "metadata_field_info", "type": "List[AttributeInfo]", "kind": "positional", "default": null, "position": 4}], "return_type": "BaseRetriever", "lineno": 188, "end_lineno": 197, "docstring": "Initialize the Self Query Retriever", "snippet": "    def __pipeline_initialize_self_query_retriever(self, vec_ops: ChromaOps, collection_name: str, document_content_description: str, metadata_field_info: List[AttributeInfo]) -> BaseRetriever:\n        \"\"\"\n        Initialize the Self Query Retriever\n        \"\"\"\n        try:\n            chroma_client = vec_ops.chroma_client()\n            retriever_instance = Retriever.self_query_retriever(Retriever, chroma_client=chroma_client, collection_name=collection_name, document_content_description=documen", "metrics": {"lines_of_code": 10, "complexity": 2, "num_parameters": 5, "num_returns": 1, "num_branches": 0, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "55c0900d811f8bfa84035be1baf350120588c35c", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "3d3b3e1a055ea4288e32dcae407962102fa09fa5", "type": "Parameter", "name": "vec_ops", "param_type": "ChromaOps", "kind": "positional", "default": null, "position": 1}
{"id": "c4550b9d1e2d4b3dbba5489e1010c0deebceae5c", "type": "Parameter", "name": "collection_name", "param_type": "str", "kind": "positional", "default": null, "position": 2}
{"id": "e6eaaf0c7d792f98fbc9d4abaffc570a2ea76055", "type": "Parameter", "name": "document_content_description", "param_type": "str", "kind": "positional", "default": null, "position": 3}
{"id": "afd2b5f505949593b0f6ec5cce862ad343d06425", "type": "Parameter", "name": "metadata_field_info", "param_type": "List[AttributeInfo]", "kind": "positional", "default": null, "position": 4}
{"id": "ea32dfbbdd852aee355da204aae1a840277f234f", "type": "Variable", "name": "chroma_client", "value": "vec_ops.chroma_client()", "value_type": "complex", "lineno": 193, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "b003b2bb4252e90c3e47dda96323306f055fd19a", "type": "Variable", "name": "retriever_instance", "value": "Retriever.self_query_retriever(Retriever, chroma_client=chroma_client, collection_name=collection_name, document_content_description=document_content_description, metadata_field_info=metadata_field_in", "value_type": "complex", "lineno": 194, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "021d32602b79d967981ee6e8a986bfb8cbd06fbe", "type": "Method", "name": "pipeline_create_embedding_in_collection", "qualified_name": "SelfQueryPipeline.pipeline_create_embedding_in_collection", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}, {"name": "chunked_files", "type": "List[List[str]]", "kind": "positional", "default": null, "position": 1}, {"name": "chunked_metadata", "type": "List[List[dict]]", "kind": "positional", "default": null, "position": 2}, {"name": "iso_collection", "type": "Collection", "kind": "positional", "default": null, "position": 3}], "return_type": "None", "lineno": 199, "end_lineno": 224, "docstring": "Creates Embedding using OpenAI", "snippet": "    def pipeline_create_embedding_in_collection(self, chunked_files: List[List[str]], chunked_metadata: List[List[dict]], iso_collection: Collection) -> None:\n        \"\"\"\n        Creates Embedding using OpenAI\n        \"\"\"\n        for doc_texts, doc_metadata in zip(chunked_files, chunked_metadata):\n            try:\n                iso_collection.add(\n                    ids=[str(uuid.uuid4()) for _ in range(len(doc_texts))],\n                    documents=doc_texts,\n                    metadatas=d", "metrics": {"lines_of_code": 26, "complexity": 10, "num_parameters": 4, "num_returns": 0, "num_branches": 2, "num_loops": 1, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 2}}
{"id": "adef2a9b065c870fba69165e2c1469c1c68a97c3", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "d981748c422155dc02990b0d1bdcd07452018250", "type": "Parameter", "name": "chunked_files", "param_type": "List[List[str]]", "kind": "positional", "default": null, "position": 1}
{"id": "ae09c38d9b559d898bb6d6625a01f4cf3b50e3ea", "type": "Parameter", "name": "chunked_metadata", "param_type": "List[List[dict]]", "kind": "positional", "default": null, "position": 2}
{"id": "a7998a942296aecd632012b8982e4930d042fe42", "type": "Parameter", "name": "iso_collection", "param_type": "Collection", "kind": "positional", "default": null, "position": 3}
{"id": "c58cf1f7636f4d91eab011def7ad83dc89cbb0b4", "type": "Method", "name": "main_pipeline", "qualified_name": "SelfQueryPipeline.main_pipeline", "is_async": false, "is_method": true, "is_static": false, "is_class_method": false, "is_property": false, "is_private": false, "is_magic": false, "decorators": [], "decorator_details": [], "parameters": [{"name": "self", "type": null, "kind": "positional", "default": null, "position": 0}], "return_type": null, "lineno": 226, "end_lineno": 267, "docstring": "Main pipeline to invoke all of the rest of the private functions defined in the Self Query Pipeline class to complete one cycle of complete end to end execution of the RAG application starting from loading pdf's from the database, updating its status, creating embedding if necessary, retrieving metadata by passing the metadata.json file, to QA chain.\n        ", "snippet": "    def main_pipeline(self):\n        \"\"\"Main pipeline to invoke all of the rest of the private functions defined in the Self Query Pipeline class to complete one cycle of complete end to end execution of the RAG application starting from loading pdf's from the database, updating its status, creating embedding if necessary, retrieving metadata by passing the metadata.json file, to QA chain.\n        \"\"\"\n        # Getting the pdf file names by passing the media folder\n        files = get_files(file", "metrics": {"lines_of_code": 42, "complexity": 2, "num_parameters": 1, "num_returns": 0, "num_branches": 1, "num_loops": 0, "has_docstring": true, "num_decorators": 0, "max_nesting_depth": 1}}
{"id": "2ba669266ba1f79c9fedf43b1c9a89eb827c242b", "type": "Parameter", "name": "self", "param_type": null, "kind": "positional", "default": null, "position": 0}
{"id": "ee6d619e74b349468d399518b51e90ddb0f953f6", "type": "Variable", "name": "files", "value": "get_files(file_dir=self.docs_folder_path)", "value_type": "complex", "lineno": 230, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "386c3827ba250f6b0f70b3f1582a5c56734e4c7e", "type": "Variable", "name": "metadata_file", "value": "os.path.dirname(__file__) + '/metadata.json'", "value_type": "complex", "lineno": 233, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "587b9ec1e5a5b3f96794cdeefeb2e4b85df6967e", "type": "Variable", "name": "metadata", "value": "self.get_metadata_for_files(files, metadata_file=metadata_file)", "value_type": "complex", "lineno": 234, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "518ffff219bf81f2f6c7c2155083a713962e4c13", "type": "Variable", "name": "all_files_in_database", "value": "self.pipeline_load_docs_from_postgres()", "value_type": "complex", "lineno": 241, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "59d4363fbc1358e1f82c5e094371a186ef5e24e3", "type": "Variable", "name": "files_on_server", "value": "[file for file in all_files_in_database]", "value_type": "complex", "lineno": 242, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "17bed8ca26df2dbcd32d86080e526d23c95bded5", "type": "Variable", "name": "all_loaded_files", "value": "self.pipeline_load_documents(all_files_in_database, metadata)", "value_type": "complex", "lineno": 248, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "7041522d3307bea87cea40fdcb8c257947f0c41b", "type": "Variable", "name": "retriever_instance", "value": "self.__pipeline_initialize_self_query_retriever(vec_ops, self.collection_name, document_content_description, metadata_field_info)", "value_type": "complex", "lineno": 256, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "7dd42d93c87cd150ea54712ab879615d817bf5f1", "type": "Variable", "name": "len_embeddings", "value": "self.pipeline_check_embeddings(iso_collection)", "value_type": "complex", "lineno": 259, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "55704c1b96987752e48e1a41f820c4054127daab", "type": "Variable", "name": "embedder", "value": "Embedder()", "value_type": "complex", "lineno": 261, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "cbda35c8ca95af9d0307074a625e579c657dc919", "type": "Variable", "name": "embeddings", "value": "embedder.get_openai_embeddings(documents=[doc for docs in chunked_files for doc in docs], dimensions=256)", "value_type": "complex", "lineno": 262, "is_global": false, "is_constant": false, "is_private": false, "scope": "local"}
{"id": "8ae31a76ec058009f1a898ac6387334e24b151fe", "type": "Variable", "name": "parent", "value": "os.path.dirname(os.path.dirname(os.path.dirname(__file__)))", "value_type": "complex", "lineno": 271, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "933c4232ffd82b63361cf2dec1734a0a65ad9ba8", "type": "Variable", "name": "media_path", "value": "os.path.join(parent, 'media')", "value_type": "complex", "lineno": 272, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "99d017b5e44dc6b6bf875ed663762c56fd09d52a", "type": "Variable", "name": "mp", "value": "SelfQueryPipeline(docs_folder_path=media_path)", "value_type": "complex", "lineno": 273, "is_global": true, "is_constant": false, "is_private": false, "scope": "global"}
{"id": "0ec20701efbc6a87cdf754102bb336f3750c77b3", "type": "File", "name": "__init__.py", "path": "/home/sahil/Workspace/Repo_Analyzer/environmental-social-and-governance-compliance-system/src/pipelines/__init__.py", "relpath": "src/pipelines/__init__.py", "module": "src.pipelines.__init__", "extension": ".py", "sha1": "d667b6460d4a9b87cd80ffd7e13d3f1092659326", "lines_of_code": 1, "size_bytes": 15, "language": "python", "encoding": "utf-8"}
{"id": "be260417dc4bbcacdbc21fdb0c8a82a1a26e0137", "type": "Import", "name": "*", "module": "", "full_name": "*", "alias": null, "import_type": "from", "level": 1, "is_relative": true, "lineno": 1, "is_stdlib": false}
